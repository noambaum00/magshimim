var DYO=DYO||{};"undefined"==typeof window.DY&&(window.DY={}),"undefined"==typeof window.DY.API&&(window.DY.API=function(){(DY.API.actions=DY.API.actions||[]).push(arguments)}),DYO=function(){function escapeContServerVariationSet(e){for(var t=experiments[e].variations.slice(0),n=0;n<t.length;n++)t[n].id=t[n].id,"undefined"!=typeof t[n].name&&null!=t[n].name&&"undefined"==typeof t[n].__name_escaped_flag&&(t[n].name=escape(t[n].name),t[n].__name_escaped_flag=!0),"undefined"!=typeof t[n].weight&&DYO.StringUtils.isN(t[n].weight)||(t[n].weight=null);return t}function escapeClientVariationSet(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=new Object;r.id=escape(DYJSON.stringify(e[n].id)),"undefined"!=typeof e[n].name&&null!=e[n].name&&(r.name=escape(e[n].name)),"undefined"!=typeof e[n].weight&&DYO.StringUtils.isN(e[n].weight)&&(r.weight=e[n].weight),t.push(r)}return t}function generateHash(e){var t=e.slice(0);t.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0});var n="";for(var r in t)t.hasOwnProperty(r)&&(n+=t[r].id,n+=DYO.ExpUtils.verSep);var i=hashCode(n),o=""+i;return o}function checkArrMatch(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&e[n]==t[r])return!0;return!1}function expNameToId(e){for(var t in experiments)if(experiments.hasOwnProperty(t)&&experiments[t].name.toLowerCase()==e.toLowerCase())return t;return null}function varNameToId(e,t){if(experimentExists(e))for(var n=0;n<experiments[e].variations.length;n++)if(experiments[e].variations[n].name.toLowerCase()==t.toLowerCase())return experiments[e].variations[n].id;return null}function setForceCalculationOption(e){return("undefined"==typeof e||null==e)&&(e=[]),null!=e&&(e[OPTION_FORCE_CALCULATION]=!0),e}function getForceCalculationOption(e,t){var n=!1;return null!=t&&"undefined"!=typeof t[OPTION_FORCE_CALCULATION]&&null!=t[OPTION_FORCE_CALCULATION]&&(n=t[OPTION_FORCE_CALCULATION]),n||getVariationIdsFromQueryParam(e)}function setDebug(e){debug=e,DYO.d=debug}function experimentExists(e){return"undefined"!=typeof experiments[e]&&null!=experiments[e]}function checkAudience(e){if(experiments[e].audiences.length>0){var t=[];if("undefined"==typeof DY||"undefined"==typeof DY.aud)return!0;if(t=DY.aud.split("."),!(t.length>0))return!1;checkArrMatch(experiments[e].audiences,t)}return!0}function calculateDist(e){var t=!1;if(checkAudience(e)){var n=Math.floor(1e3*Math.random());t=n<10*experiments[e].traffic?!0:!1}else t=!1;return t}function getVariationIdsFromQueryParam(e){var t=DYO.StringUtils.getUrlParam("__dyfc_"+e)?DYO.StringUtils.getUrlParam("__dyfc_"+e).split(","):!1;return t}function setMultipleVariations(e,t,n,r,i){var o=[],a=getCurrentVersionDataStr(e),s=experiments[e],u=DYO.Props.isControlGroupChoose(e,s,a,t),c=DYO.Props.MANUAL_MECHANISM,l=[DYO.ExpUtils.SUB_MECHANISM_NA],d="undefined"!=typeof i&&null!=i&&"undefined"!=typeof i.varArr&&null!=i.varArr&&i.varArr.length>=r;if(r>n.length||0>=r);else if(getVariationIdsFromQueryParam(e))for(var p=getVariationIdsFromQueryParam(e),f=0;f<p.length;f++)for(var m=0;m<n.length;m++)p[f]===n[m].id.toString()&&o.push(n[m]);else if(u){var g=!0;if(s.controlGroup.method==DYO.Props.CGM_RANDOM&&null!=n&&n.length>0)o=DYO.Chooser.equalDecisions(n,r);else if(s.controlGroup.method==DYO.Props.CGM_PRESET_VARS&&"undefined"!=typeof s.controlGroup.varIds)for(var h=""+s.controlGroup.varIds,y=h.split(DYO.ExpUtils.variSep),f=0;f<y.length&&r>f;f++){var v=y[f],D=v.split(DYO.ExpUtils.verSep);o.push(D.length>1?{id:D[0],name:D[1]}:{id:D[0]})}else g=!1;g&&(c=DYO.Props.CONTROL_GROUP_MECHANISM,l=[d?DYO.ExpUtils.SUB_MECHANISM_CG_WITH_PREDICT:DYO.ExpUtils.SUB_MECHANISM_CG_WITHOUT_PREDICT])}else if(d)o=i.varArr,c=DYO.Props.PREDICT_MECHANISM,"undefined"!=typeof i.smechArr&&null!=i.smechArr&&i.smechArr.length>0&&(l=i.smechArr);else if(null!=n&&n.length>0&&null==n[0].weight)o=DYO.Chooser.equalDecisions(n,r,e),c=DYO.Props.MANUAL_MECHANISM;else{if(1>=r){var O=DYO.Chooser.weightedDecision(n,e);null!=O&&null!=O.loc&&o.push(n[O.loc])}else null!=n&&n.length>0&&(o=DYO.Chooser.wRandomChoose(n,r));c=DYO.Props.getMechanismRepresentingWeights(s);var w=DYO.Props.getSubMechanismRepresentingWeights(s);null!=w&&(l=[w])}t=DYO.Props.resetVersionDataMechanism(t,c,l);for(var Y=new Array,S=new Array,f=0;r>f&&f<o.length;f++){var x="undefined"!=typeof o[f].name&&null!=o[f].name;Y[f]={id:DYJSON.parse(unescape(o[f].id)),name:x?unescape(o[f].name):""},S[f]=o[f].id+(x?DYO.ExpUtils.verSep+o[f].name:"")}return setVariations(e,t,S),Y}function calculateMultipleProgVariation(e,t){var n=DYO.Props.expProgVersionData(experiments[e]),r=experiments[e].variations.slice(0),i=[];if(calculateDist(e)){var o=getProgPredictionDecisions(e,n,r,t);i=setMultipleVariations(e,n,r,t,o)}else setVariation(e,n,DYO.ExpUtils.notInExp),log("out of experiment");var a=DYO.CoreUtils.map(function(e){return e.id},i),s=DYO.getSectionFeature("DECISION_ON_BATCH");return s&&s.enabled&&DY.API("report",{type:DYO.Enums.ENUMS.REPORT_API.TYPES.DECISION,expId:e,variationIds:a,attributionProps:DYO.Props.getCurrentAttributionProps(),versionDataStr:DYO.getCurrentVersionDataStr(e)}),i}function calculateMultipleContVariation(e,t,n,r){var i=DYO.Props.expContVersionData(experiments[e],n),o=t.slice(0),a=[];if(calculateDist(e)){experiments[e].variations.length>0&&DYO.Props.verifyClientIdsOfServerAndClientSynced(experiments[e],n)&&t.length==experiments[e].variations.length&&(o=escapeContServerVariationSet(e));var s=getContPredictionDecisions(e,i,o,n,r);a=setMultipleVariations(e,i,o,r,s)}else setVariation(e,i,DYO.ExpUtils.notInExp),log("out of experiment");var u=DYO.CoreUtils.map(function(e){return e.id},a),c=DYO.getSectionFeature("DECISION_ON_BATCH");return c&&c.enabled&&DY.API("report",{type:DYO.Enums.ENUMS.REPORT_API.TYPES.DECISION,expId:e,variationIds:u,attributionProps:DYO.Props.getCurrentAttributionProps(),versionDataStr:DYO.getCurrentVersionDataStr(e)}),a}function getProgPredictionDecisions(e,t,n,r){return getPredictionDecisions(e,t,n,r)}function getContPredictionDecisions(e,t,n,r,i){return DYO.Props.verifyClientIdsOfServerAndClientSynced(experiments[e],r)?getPredictionDecisions(e,t,n,i):void 0}function getPredictionDecisions(e,t,n,r){var i=DYO.Predict.getPrediction(e,DYO.Props.getVersionId(t));return"undefined"!=typeof i&&null!=i&&"undefined"!=typeof i.varIdArr&&null!=i.varIdArr&&i.varIdArr.length>=r?(i.varArr=orderVariationsByPrediction(i.varIdArr,n,r),i):null}function orderVariationsByPrediction(e,t,n){for(var r=[],i=0,o=0;o<e.length;o++)for(var a=0;a<t.length;a++){var s=t[a];if(e[o]==s.id){if(r.push(s),i++,i==n)return r;break}}return r}function cleanupExperiments(){experimentTree={},refreshExperiments()}function refreshExperiments(){cleanupTreeAndStore(DYO.ExpUtils.storageKey,DYO.ExpUtils.cookieKey,experimentTree,!1);var e={};cleanupTreeAndStore(DYO.ExpUtils.storageAttKey,DYO.ExpUtils.cookieAttKey,e,!0)}function cleanupTreeAndStore(e,t,n,r){try{var i=getStoredExperiments(e,t);if("undefined"!=typeof i&&""!=i&&null!=i){for(var o=i.split(DYO.ExpUtils.expSep),a=0;a<o.length;a++)try{var s=o[a].split(DYO.ExpUtils.dataSep);if("undefined"!=typeof experiments[s[0]]){s=DYO.Props.correctFreshSessionPlaceholder(s);var u=s[1].split(DYO.ExpUtils.verSep),c=s.length>4?s[4].split(DYO.ExpUtils.verSep):null;if(DYO.Props.isStoredVersionValidDuringCleanup(experiments[s[0]],u,c))if(r){var l=c;DYO.Props.isStoredAttributionValidDuringCleanup(experiments[s[0]],u,l)&&(n[s[0]]=s.join(DYO.ExpUtils.dataSep))}else n[s[0]]=null==c?s.join(DYO.ExpUtils.dataSep)+DYO.ExpUtils.dataSep+DYO.Props.generateSelectionDataPart(experiments[s[0]]):s.join(DYO.ExpUtils.dataSep)}}catch(d){log("error cleaning experiment "+o[a])}storeExperiments(e,t,n)}}catch(d){log("error cleaning experiments")}}function storeExperiments(e,t,n){var r=[],i=[];for(var o in n)n.hasOwnProperty(o)&&(DYO.ExpUtils.isExpCookieManaged(o)?i.push(n[o]):r.push(n[o]));DYO.StorageUtils.set(e,r.join(DYO.ExpUtils.expSep),["localStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain()}),DYO.StorageUtils.set(t,i.join(DYO.ExpUtils.expSep),["cookieStorage","localStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain()})}function getStoredExperiments(e,t){var n=DYO.StorageUtils.get(e,["localStorage","cookieStorage"]),r=DYO.StorageUtils.get(t,["cookieStorage","localStorage"]),i=DYO.ExpUtils.merge(r,n);return i}function emptyMethod(){}function forceChooseVariation(e,t){return t=setForceCalculationOption(t),chooseVariation(e,t)}function chooseVariation(e,t){var n=chooseMultipleVariations(e,1,t);if(null!=n&&n.length>0&&null!=n[0].id){"number"!=typeof e&&(e=expNameToId(e));for(var r=0;r<experiments[e].variations.length;r++)if(experiments[e].variations[r].id==n[0].id)return r}return 0}function forceChooseMultipleVariations(e,t,n){return n=setForceCalculationOption(n),chooseMultipleVariations(e,t,n)}function chooseMultipleVariations(e,t,n){var r=[],i=getForceCalculationOption(e,n);if("number"!=typeof e&&(e=expNameToId(e)),experimentExists(e)?(r=i?null:getDynamicVariations(e,DYO.Props.expProgVersionData(experiments[e])),(null==r||r.length!=t&&!isInPresetVarsCG(e))&&(r=calculateMultipleProgVariation(e,t)),varRimpSelectedVariations(e,r)):log("non existing experiment"),null!=r&&null!=experiments[e]&&experiments[e].autoExecuteAction)for(var o=0;o<r.length;++o)if(null!=r[o]&&null!=r[o].id){var a=r[o].id;executeVariation(parseInt(e),a)}return r}function isInPresetVarsCG(e){var t=experiments[e];if("undefined"!=typeof t.controlGroup&&t.controlGroup.method==DYO.Props.CGM_PRESET_VARS&&"undefined"!=typeof t.controlGroup.varIds){var n=DYO.getCurrentVersionDataStr(e);return DYO.Props.isCurrentlyInControlGroup(n)}return!1}function forceChooseMultipleDynamicVariations(e,t,n,r){return r=setForceCalculationOption(r),chooseMultipleDynamicVariations(e,t,n,r)}function chooseMultipleDynamicVariations(e,t,n,r){var i=getForceCalculationOption(e,r);null!=r&&"undefined"!=typeof r[OPTION_EXP_DEFAULT]&&null!=r[OPTION_EXP_DEFAULT];var o=[];if("number"!=typeof e&&(e=expNameToId(e)),experimentExists(e)){t=escapeClientVariationSet(t);var a;if(null!=r&&"undefined"!=typeof r[OPTION_VARIATION_SET_ID]&&null!=r[OPTION_VARIATION_SET_ID]&&0!=r[OPTION_VARIATION_SET_ID].length){var s=""+r[OPTION_VARIATION_SET_ID];a=s}else a=generateHash(t);var u=DYO.Props.expContVersionData(experiments[e],a);o=i?null:getDynamicVariations(e,u),(null==o||o.length!=n&&!isInPresetVarsCG(e))&&(o=calculateMultipleContVariation(e,t,a,n)),varRimpSelectedVariations(e,o)}else log("non existing experiment");return o}function forceChooseDynamicVariation(e,t,n){return n=setForceCalculationOption(n),chooseDynamicVariation(e,t,n)}function chooseDynamicVariation(e,t,n){var r=chooseMultipleDynamicVariations(e,t,1,n);return null!=r&&r.length>0?r[0]:null}function reportExperimentEvent(e){try{"number"!=typeof e&&(e=expNameToId(e)),experimentExists(e)&&DY.API("experiment",{name:experiments[e].name})}catch(t){}}function setAndPublishContext(e){"undefined"!=typeof e&&null!==e&&(DY.recommendationContext=e,DY.API("context",e))}function getServerVariations(e){return"number"!=typeof e&&(e=expNameToId(e)),experiments[e].variations}function getDynamicVariations(e,t){var n=null,r=null,i=experimentTree[e];if(null!=i){var o=i.split(DYO.ExpUtils.dataSep),a=o[1],s=a.split(DYO.ExpUtils.verSep),u=o[4],c=u.split(DYO.ExpUtils.verSep),l=t.split(DYO.ExpUtils.verSep);if(DYO.Props.isStoredVersionValidForChoose(experiments[e],s,l,c)){r=o[2],n=new Array;var d=new Array;if(r.length>0){r=r.split(DYO.ExpUtils.variSep);for(var p=0;p<r.length;p++){var f=r[p].split(DYO.ExpUtils.verSep);f.length>0&&f[0].length>0&&(n[p]={id:DYJSON.parse(unescape(f[0])),name:"undefined"!=typeof f[1]?unescape(f[1]):""},d.push(n[p].id))}}var m=DYO.Props.generateSelectionDataPart(experiments[e]);if(o[4]=m,experimentTree[e]=o.join(DYO.ExpUtils.dataSep),storeExperiments(DYO.ExpUtils.storageKey,DYO.ExpUtils.cookieKey,experimentTree),DYO.Props.isAttributionStoredOnGet(experiments[e])){var g=DYO.Props.getCurrentAttributionProps(experiments[e]);DYO.ExpUtils.attributeVariationsExplicitly(DYO.ExpUtils.DECISION_EVENT,e,a,d,g)}}}return n}function getVariationData(e){var t=e,n=null;"number"!=typeof e&&(e=expNameToId(e));var r=experimentTree[e];if(null==r)return{code:0,exp:t,msg:"experiment "+e+" is not defined"};var i=r.split(DYO.ExpUtils.dataSep),o=i[2].split(DYO.ExpUtils.verSep);n=o[0];var a=o[1];if(n==DYO.ExpUtils.notInExp)return{code:0,exp:t,msg:"user not in experiment"};for(var s=0;s<experiments[e].variations.length;s++)if(experiments[e].variations[s].id==n)return 0==experiments[e].type&&(a=experiments[e].variations[s].name),{code:1,exp:t,value:experiments[e].variations[s]};return{code:0,exp:t,msg:"error getting variation data, check the experiment settings"}}function getVariationProperties(e){var t=e,n=null;"number"!=typeof e&&(e=expNameToId(e));var r=experimentTree[e];if(null==r)return{code:0,exp:t,msg:"experiment "+e+" is not defined"};var i=r.split(DYO.ExpUtils.dataSep),o=i[2].split(DYO.ExpUtils.verSep);n=o[0];var a=o[1];if(n==DYO.ExpUtils.notInExp)return{code:0,exp:t,msg:"user not in experiment"};for(var s=0;s<experiments[e].variations.length;s++)if(experiments[e].variations[s].id==n)return 0==experiments[e].type&&(a=experiments[e].variations[s].name),experiments[e].variations[s].props;return{code:0,exp:t,msg:"error getting variation data, check the experiment settings"}}function getCurrentVersionDataStr(e){try{if("number"!=typeof e&&(e=expNameToId(e)),experimentExists(e)&&null!=experimentTree[e]){var t=experimentTree[e],n=t.split(DYO.ExpUtils.dataSep);if(null!=n&&n.length>1){var r=n[1];return r}}}catch(i){log("error in getCurrentVersionDataStr")}return null}function externalSetVariation(e,t){var n=e,r=t;if("number"!=typeof e&&(e=expNameToId(e)),experimentExists(e)){if("number"!=typeof t&&(t=varNameToId(e,t)),null==t)return{code:0,exp:n,variation:r,msg:"Variation is not defined"};var i=DYO.Props.expManualSetVersionData(experiments[e]);return setVariation(e,i,t),{code:1,exp:n,variation:r,msg:"variation "+t+" is set for experiment "+e}}return{code:0,exp:n,variation:r,msg:"experiment "+e+" is not defined"}}function externalSetVariationByPosition(e,t){var n=e;if("number"!=typeof e&&(e=expNameToId(e)),experimentExists(e)){var r=new Array;if("undefined"==typeof experiments[e].variations[t])return{code:0,exp:n,pos:t,msg:"no variation in position "+t};r[0]=experiments[e].variations[t].id;var i=DYO.Props.expManualSetVersionData(experiments[e]);return setVariations(e,i,r),{code:1,exp:n,pos:t,msg:"variation at position "+t+"is set for experiment "+e}}return{code:0,exp:n,pos:t,msg:"experiment "+e+" is not defined"}}function setVariation(e,t,n){var r=new Array;r[0]=n,setVariations(e,t,r)}function setVariations(e,t,n){if(!experimentExists(e))return void log("ignoring non-existent experiment");var r=DYO.Props.expCompleteVersionData(experiments[e],t),i=DYO.Props.getAttributionMethodForGet(experiments[e]),o=DYO.Props.generateSelectionDataPart(experiments[e]);if(experimentTree[e]=e+DYO.ExpUtils.dataSep+r+DYO.ExpUtils.dataSep+n.toString()+DYO.ExpUtils.dataSep+i+DYO.ExpUtils.dataSep+o,storeExperiments(DYO.ExpUtils.storageKey,DYO.ExpUtils.cookieKey,experimentTree),DYO.Props.isAttributionStoredOnGet(experiments[e])){var a=DYO.Props.getCurrentAttributionProps(experiments[e]);DYO.ExpUtils.attributeVariationsExplicitly(DYO.ExpUtils.DECISION_EVENT,e,r,n,a)}}function varRimpSelectedVariations(e,t){if(experimentExists(e)&&null!=t&&DYO.Props.isVarRimpOnGet(experiments[e])&&t.length>0){for(var n=[],r=0;r<t.length;++r)null!=t[r]&&null!=t[r].id&&n.push(t[r].id);var i=getCurrentVersionDataStr(e),o=DYO.Props.getCurrentAttributionProps(e),a=DYO.getSectionFeature("RIMPS_ON_BATCH");if(a&&a.enabled)DY.API("report",{type:DYO.Enums.ENUMS.REPORT_API.TYPES.REAL_IMPRESSION,expId:e,variationIds:n,attributionProps:o,versionDataStr:i});else{var s=function(){"undefined"!=typeof window.DY.ServerUtil.logVariation_new&&window.DY.ServerUtil.logVariation_new("ri",e,n,o,i)};window.DY.API("callback",s)}}}function varCVariations(e,t){if(experimentExists(e)&&null!=t&&t.length>0){for(var n=[],r=0;r<t.length;++r)null!=t[r]&&null!=t[r].id&&n.push(t[r].id);var i=getCurrentVersionDataStr(e),o=DYO.Props.getCurrentAttributionProps(e),a=DYO.getSectionFeature("CLICKS_ON_BATCH");if(a&&a.enabled)DY.API("report",{type:DYO.Enums.ENUMS.REPORT_API.TYPES.CLICK,expId:e,variationIds:n,attributionProps:o,versionDataStr:i});else{var s=function(){"undefined"!=typeof window.DY.ServerUtil.logVariation_new&&window.DY.ServerUtil.logVariation_new("c",e,n,o,i)};window.DY.API("callback",s)}}}function executeVariation(expId,variationId){var e=expId,v=variationId,jsExec=!1,htmlExec=!1;if("number"!=typeof expId&&(expId=expNameToId(expId)),experimentExists(expId)){if("number"!=typeof variationId&&(variationId=varNameToId(expId,variationId)),null==variationId)return{code:0,exp:e,variation:v,msg:"Variation is not defined"};for(var i=0;i<experiments[expId].variations.length;i++)if(experiments[expId].variations[i].id==variationId){var execScript=experiments[expId].variations[i].script,htmlInsert=experiments[expId].variations[i].html,htmlInsertPos=experiments[expId].variations[i].htmlPos;if("undefined"!=typeof execScript&&""!=execScript){try{eval("(function(){"+execScript+"})();")}catch(e){}jsExec=!0}if("undefined"!=typeof htmlInsert&&""!=htmlInsert&&""!=htmlInsertPos){var div=document.createElement("div");div.innerHTML=htmlInsert;var contDiv=document.getElementById(htmlInsertPos);contDiv&&(contDiv.insertBefore(div,contDiv.firstChild),htmlExec=!0)}}return{code:1,exp:e,variation:v,msg:"executed "+(jsExec&&htmlExec?"javascript and html insertion":jsExec?"javascript":htmlExec?"html insertion":"nothing")+" for variation "+variationId+" in experiment "+expId}}return{code:0,exp:e,variation:v,msg:"experiment "+expId+" is not defined"}}function makeSmartImage(e,t){function n(){"undefined"!=typeof $dy&&"undefined"!=typeof $dy(window)&&"undefined"!=typeof DY&&"undefined"!=typeof DY.AdDetection?DY.AdDetection.markExpUnit(u,r,s.id,!1,!1,m):setTimeout(n,100)}try{var r=e;"number"!=typeof r&&(r=parseInt(expNameToId(r)));var i=chooseVariation(r,null);if(!experimentExists(r))return{code:0,exp:r,msg:"experiment "+r+" is not defined"};var o=experiments[r].elementWidth;("undefined"==typeof o||null==o)&&(o=0);var a=experiments[r].elementHeight;("undefined"==typeof a||null==a)&&(a=0);var s=experiments[r].variations[i];if("undefined"==typeof s||"undefined"==typeof s.props||"undefined"==typeof s.props.image_url)return{code:0,exp:r,v:s.id,msg:"experiment "+r+" has no image variation "+s.id};var u=document.createElement("div");u.className="dy_unit dy_image_"+r;var c='<img src="'+s.props.image_url+'" width="'+o+'" height="'+a+'" style="border:none;" />';"undefined"!=typeof s.props.image_click_url&&null!=s.props.image_click_url&&""!=s.props.image_click_url&&(c='<a href="'+s.props.image_click_url+'" target="'+(s.props.image_click_url_target||"_top")+'">'+c+"</a>"),u.innerHTML=c;var l=!0;if("undefined"!=typeof t&&""!=t){var d=document.getElementById(t);"undefined"!=typeof d&&null!=d&&(d.appendChild(u),l=!1)}if(l){var p=document.getElementsByTagName("script"),f=p[p.length-1];f.parentElement.appendChild(u)}var m=getCurrentVersionDataStr(r);return n(),{code:1,exp:r,msg:"executing make smart image on experiment "+r}}catch(g){return{code:0,exp:e,msg:"error while executing make smart image on experiment "+e}}}function makeSmartSlider(e,t){function n(){"undefined"!=typeof DY&&"undefined"!=typeof DY.AdDetection&&"undefined"!=typeof $dy&&"undefined"!=typeof $dy(window)&&"undefined"!=typeof $dy.renderSmartCarousel?$dy.renderSmartCarousel(l,{expId:r,width:i,height:o,scrollSpeed:a,versionDataStr:c},u):setTimeout(n,100)}try{var r=e;if("number"!=typeof r&&(r=parseInt(expNameToId(r))),!experimentExists(r))return{code:0,exp:r,msg:"experiment "+r+"is not defined"};var i=experiments[r].elementWidth;("undefined"==typeof i||null==i)&&(i=0);var o=experiments[r].elementHeight;("undefined"==typeof o||null==o)&&(o=0);var a=experiments[r].autoScrollSpeed;("undefined"==typeof a||null==a)&&(a=0);var s=experiments[r].slideCount;("undefined"==typeof s||null==s||0==s)&&(s=experiments[r].variations.length);var u=chooseMultipleVariations(r,s,null),c=getCurrentVersionDataStr(r),l=document.createElement("div");l.setAttribute("style","position:relative;max-width:"+i+"px;max-height:"+o+"px;"),l.className="dy_unit dy_slider_"+r;var d=!0;if("undefined"!=typeof t&&""!=t){var p=document.getElementById(t);"undefined"!=typeof p&&null!=p&&(p.appendChild(l),d=!1)}if(d){var f=document.getElementsByTagName("script"),m=f[f.length-1];m.parentElement.appendChild(l)}for(var g=0;g<u.length;g++){for(var h=null,y=0;y<experiments[r].variations.length;y++)if(u[g].id==experiments[r].variations[y].id){h=experiments[r].variations[y].props;break}if("undefined"!=typeof h&&null!=h&&"undefined"!=typeof h.image_url){("undefined"==typeof h.image_click_url||null==h.image_click_url||""==h.image_click_url)&&(h.image_click_url="#");var v=u[g].id;u[g]=h,u[g].id=v}}return n(),{code:1,exp:r,msg:"executing make smart slider on experiment "+r}}catch(D){return{code:0,exp:e,msg:"error while executing make smart slider on experiment "+e}}}function reportVariationImpression(e,t){try{var n={type:DYO.Enums.ENUMS.REPORT_API.TYPES.IMPRESSION,expId:e,variationIds:t,attributionProps:DYO.Props.getCurrentAttributionProps(e),versionDataStr:DYO.getCurrentVersionDataStr(e)};window.DY.API("report",n)}catch(r){DY.API("internal_error",{name:"reportVariationImpression error",error:r})}}function makeSmartContainer(expName,insertionId,asPureHTML){function waitForDy(){"undefined"!=typeof $dy&&"undefined"!=typeof $dy(window)&&"undefined"!=typeof DY&&"undefined"!=typeof DY.AdDetection?DY.AdDetection.markExpUnit(cont,expId,varElem.id,!1,!1,versionDataStr):setTimeout(waitForDy,100)}try{var expId=expName;"number"!=typeof expId&&(expId=parseInt(expNameToId(expId))),asPureHTML!==!0&&(asPureHTML=!1);var varPos=chooseVariation(expId,null);if(!experimentExists(expId))return{code:0,exp:expId,msg:"experiment "+expId+" is not defined"};var width=experiments[expId].elementWidth;("undefined"==typeof width||null==width)&&(width=0);var height=experiments[expId].elementHeight;("undefined"==typeof height||null==height)&&(height=0);var varElem=experiments[expId].variations[varPos];if("undefined"==typeof varElem||"undefined"==typeof varElem.props||"undefined"==typeof varElem.props.html_code)return{code:0,exp:expId,v:varElem.id,msg:"experiment "+expId+" has no container variation "+varElem.id};var cont,source=null;if(asPureHTML)cont=document.createElement("div"),cont.className="dy_unit dy_container_"+expId,cont.innerHTML="<style type='text/css'>"+decodeURIComponent(varElem.props.css_code)+"</style>"+decodeURIComponent(varElem.props.html_code);else{cont=document.createElement("iframe"),cont.className="dy_unit dy_container_"+expId,cont.setAttribute("scrolling","no"),cont.setAttribute("style","overflow:hidden;background-color:#ffffff;border:0;width:"+width+"px;height:"+height+"px;"),cont.setAttribute("width",width),cont.setAttribute("height",height);var bodyStyle="margin:0;position: absolute;";bodyStyle+="width:"+width+"px;",bodyStyle+="height:"+height+"px;",source='<!DOCTYPE html><html><head><style type="text/css">',source+=decodeURIComponent(varElem.props.css_code),source+='</style></head><body style="'+bodyStyle+'">',source+=decodeURIComponent(varElem.props.html_code),source+='<script type="text/javascript">',source+=decodeURIComponent(varElem.props.js_code),source+="</script></body></html>"}var notAdded=!0;if("undefined"!=typeof insertionId&&""!=insertionId){var insertionPoint=document.getElementById(insertionId);"undefined"!=typeof insertionPoint&&null!=insertionPoint&&(insertionPoint.appendChild(cont),notAdded=!1)}if(notAdded){var arrScripts=document.getElementsByTagName("script"),currScript=arrScripts[arrScripts.length-1];currScript.parentElement.appendChild(cont)}asPureHTML?eval("try{(function(){"+decodeURIComponent(varElem.props.js_code)+"})();}catch(e){}"):null!=source&&(cont.contentWindow.document.open(),cont.contentWindow.document.write(source),cont.contentWindow.document.close());var versionDataStr=getCurrentVersionDataStr(expId);return waitForDy(),{code:1,exp:expId,msg:"executing make smart image on experiment "+expId}}catch(exception){return{code:0,exp:expName,msg:"error while executing make smart image on experiment "+expName}}}function initiateClocksAndWaiter(){function e(e,t,n){function r(){i||(clearTimeout(o),i=!0,DYO.pubSub.pub("dy-dep-cond-done-"+t+"-"+e),DYO.waitersTimeouts[e]=!0)}var i=!1,o=setTimeout(function(){i=!0,DYO.pubSub.pub("dy-dep-cond-done-"+t+"-"+e),DYO.waitersTimeouts[e]=!0},n);DY.API("callback",r)}DYO.waitersTimeouts={};var t=3e3;for(var n in DYO.otags)if(DYO.otags.hasOwnProperty(n)){var r=DYO.otags[n].waitForServerToReply||0;if(t=isNaN(DYO.otags[n].ttw)?t:Math.max(t,DYO.otags[n].ttw),"undefined"==typeof DYO.otags[n].ttw&&(DYO.otags[n].ttw=r),"undefined"!=typeof DYO.otags[n].rules&&DYO.otags[n].rules.length>0&&"undefined"!=typeof DYO.otags[n].rules[0].smartObject&&null!=DYO.otags[n].rules[0].smartObject.experiment){var i=DYO.otags[n].rules[0].smartObject.experiment,o=DYO.Chooser.shouldUseStaticAllocation(i)&&!DYO.ExpUtils.isInternalAction(i)&&!DYO.StorageUtils.get("_dyid",["localStorage","cookieStorage"]);o&&(DYO.otags[n].ttw=t)}e(n,"smartTag",DYO.otags[n].ttw)}t=t>4e3?4e3:t,setTimeout(function(){DYO.pubSub.pub("dy-dep-cond-max-timeouts"),DYO.waitersTimeouts._dy_max_timeout=!0},t)}function executeContextGetterEvaluator(){try{if("undefined"!=typeof DYO.contextGetterOccurred)return;if(DYO.contextGetterOccurred=1,!DYO.oevals)return;for(var e=null,t=Object.keys(DYO.oevals),n=0;n<t.length;n++)if(DYO.oevals[t[n]].hasOwnProperty("type")&&"context"===DYO.oevals[t[n]].type){e=DYO.oevals[t[n]];break}e&&e.code&&DYO.CoreUtils.safeEval(e.code)}catch(r){DY.API("internal_error",{name:"executeContextGetterEvaluator() error",error:r})}}function setupServerExperiments(){if(debug&&log("DYO setupServerExperiments"),"undefined"!=typeof DYExps&&"undefined"!=typeof DYExps.oexps){debug&&log("actually using DYExps in DYO"),DYO.section=DYExps.section,DYO.oexps=experiments=DYExps.oexps,DYO.sectionFeatures=DYExps.sectionFeatures||{},DYO.otags=smartTags=DYExps.otags,DYO.oevals=DYExps.oevals,DYO.cookieManagedExperiments=cookieManagedExperiments=DYExps.cookieManagedExperiments,DYO.dynamicVariablesV0=DYExps.dynamicVariablesV0,DYO.smartVariableExperimentsMapV1=DYExps.smartVariableExperimentsMapV1,DYO.smartVariableExperimentsV1=DYExps.smartVariableExperimentsV1,DYO.rcom=rcom=DYExps.rcom,DYO.translations=translations=DYExps.translations,DYO.ready=!0;var e=18e5;"undefined"!=typeof DYExps.expSesMs&&DYO.StringUtils.isN(DYExps.expSesMs)&&(e=DYExps.expSesMs),DYO.Seqs.loadSequences(e),initiateClocksAndWaiter(),DYO.CoreUtils.addToCommonStyleBlock(".dy-wysiwyg{line-height:normal;direction:ltr;align-text:left;margin:0;padding:0;background-color:transparent}.dy-wysiwyg a{text-decoration:none;color:#00E}.dy-full-width-notifications-close,.dy-lb-close{position:absolute;cursor:pointer;color:#fff;display:inline-block}.dy-lb-close{top:-12px;right:-11px;border:1px solid #918686;border-radius:30px;height:22px;width:22px;background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTUgNTUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDU1IDU1IiB4bWw6c3BhY2U9InByZXNlcnZlIj48ZyBpZD0iY2xvc2UiPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iNDMuNSwxNC43IDQwLjMsMTEuNSAyNy41LDI0LjMgMTQuNywxMS41IDExLjUsMTQuNyAyNC4zLDI3LjUgMTEuNSw0MC4zIDE0LjcsNDMuNSAyNy41LDMwLjcgNDAuMyw0My41IDQzLjUsNDAuMyAzMC43LDI3LjUgIi8+PC9nPjwvc3ZnPg==) #575757;background-size:22px}.dy-full-width-notifications-close{top:5px;right:5px;z-index:1;border:none;transition:opacity .15s;-webkit-transition:opacity .15s;opacity:.7;width:18px;height:18px;border-radius:30px;background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTUgNTUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDU1IDU1IiB4bWw6c3BhY2U9InByZXNlcnZlIj48ZyBpZD0iY2xvc2UiPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iNDMuNSwxNC43IDQwLjMsMTEuNSAyNy41LDI0LjMgMTQuNywxMS41IDExLjUsMTQuNyAyNC4zLDI3LjUgMTEuNSw0MC4zIDE0LjcsNDMuNSAyNy41LDMwLjcgNDAuMyw0My41IDQzLjUsNDAuMyAzMC43LDI3LjUgIi8+PC9nPjwvc3ZnPg==) 2px no-repeat #575757;background-size:14px}.dy-full-width-notifications-close:hover{opacity:1}.dy_full_width_notifications_container{position:fixed;left:0;right:0;z-index:1040}.dy_full_width_notifications_container.dy_bottom_notification{bottom:0}.dy_full_width_notifications_container.dy_top_notification{top:0}.dy_full_width_notifications_container .dy_full_width_notification_instance{opacity:0;-webkit-transition:opacity .15s;transition:opacity .15s;position:relative}.dy_full_width_notifications_container .dy_full_width_notification_instance.dy_notification_instance_active{opacity:1}.dy_full_width_notifications_container .dy_full_width_notification_instance.dy_notification_from_bottom{-webkit-animation:dy_appear_from_bottom .25s;animation:dy_appear_from_bottom .25s}.dy_full_width_notifications_container .dy_full_width_notification_instance.dy_notification_from_top{-webkit-animation:dy_appear_from_top .25s;animation:dy_appear_from_top .25s}.dy_full_width_notifications_container .dy_full_width_notification_instance.dy_notification_instance_will_exit_top{-webkit-animation:dy_exit_top .25s;animation:dy_exit_top .25s;animation-fill-mode:forwards;-webkit-animation-fill-mode:forwards}.dy_full_width_notifications_container .dy_full_width_notification_instance.dy_notification_instance_will_exit_bottom{-webkit-animation:dy_exit_bottom .25s;animation:dy_exit_bottom .25s;animation-fill-mode:forwards;-webkit-animation-fill-mode:forwards}@-webkit-keyframes dy_appear_from_bottom{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes dy_appear_from_bottom{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes dy_appear_from_top{0%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes dy_appear_from_top{0%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes dy_exit_top{100%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}}@keyframes dy_exit_top{100%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}}@-webkit-keyframes dy_exit_bottom{100%{-webkit-transform:translateY(100%);transform:translateY(100%)}}@keyframes dy_exit_bottom{100%{-webkit-transform:translateY(100%);transform:translateY(100%)}}"),executeContextGetterEvaluator(),cleanupExperiments(),DYO.exps=experimentTree,("undefined"==typeof window.DY.ssae||!window.DY.ssae||DYO.isMobile)&&"undefined"!=typeof DYO.executeSmartActions&&(window.DY.ssae=!0,DYO.executeSmartActions(!0),DYO.preview.previewUnpublishedSmarts()),"undefined"!=typeof window.DY.skipAutoEmbed&&window.DY.skipAutoEmbed||(window.DY.skipAutoEmbed=!0,DYO.autoEmbedSmarts())}}function enableCookies(){DYO.StorageUtils.forceCookies();var e=function(){"undefined"!=typeof window.DY&&"undefined"!=typeof window.DY.StorageUtils&&"undefined"!==window.DY.StorageUtils.forceCookies&&window.DY.StorageUtils.forceCookies()};window.DY.API("callback",e)}function getSectionFeature(e){if(DYO.sectionFeatures&&DYO.sectionFeatures[e]){var t=Object.keys(DYO.sectionFeatures[e]);return-1!==t.indexOf("enabled")&&-1!==t.indexOf("value")?DYO.sectionFeatures[e]:null}return null}var experimentTree={},debug=!1,isMobile=!1,OPTION_VARIATION_SET_ID="variationSetId",OPTION_EXP_DEFAULT="expDefault",OPTION_FORCE_CALCULATION="isForceCalculation",experiments={},smartTags={},cookieManagedExperiments=[],rcom={},translations={};isMobile&&"undefined"==typeof setTimeout&&(setTimeout=function(e){e()});var hashCode=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){var r=e.charCodeAt(n),t=(t<<5)-t+r;t&=t}return t},log=function(){};return{chooseVariation:chooseVariation,forceChooseVariation:forceChooseVariation,chooseMultipleVariations:chooseMultipleVariations,forceChooseMultipleVariations:forceChooseMultipleVariations,OPTION_EXP_DEFAULT:OPTION_EXP_DEFAULT,OPTION_VARIATION_SET_ID:OPTION_VARIATION_SET_ID,OPTION_FORCE_CALCULATION:OPTION_FORCE_CALCULATION,chooseDynamicVariation:chooseDynamicVariation,forceChooseDynamicVariation:forceChooseDynamicVariation,chooseMultipleDynamicVariation:chooseMultipleDynamicVariations,chooseMultipleDynamicVariations:chooseMultipleDynamicVariations,forceChooseMultipleDynamicVariations:forceChooseMultipleDynamicVariations,getDynamicVariations:getDynamicVariations,getServerVariations:getServerVariations,setVariation:externalSetVariation,setVariationByPosition:externalSetVariationByPosition,setVariations:setVariations,getVariationData:getVariationData,getVariationProperties:getVariationProperties,getCurrentVersionDataStr:getCurrentVersionDataStr,reportVariationImpression:reportVariationImpression,reportExperimentEvent:reportExperimentEvent,storeAttributeVariations:emptyMethod,exps:experimentTree,execute:executeVariation,oexps:experiments,otags:smartTags,rcom:rcom,varNameToId:varNameToId,expNameToId:expNameToId,sd:setDebug,d:debug,log:log,smartImage:makeSmartImage,smartSlider:makeSmartSlider,smartContainer:makeSmartContainer,setupServerExperiments:setupServerExperiments,enableCookies:enableCookies,setAndPublishContext:setAndPublishContext,ready:!1,refreshExperiments:refreshExperiments,getSectionFeature:getSectionFeature,isMobile:isMobile,version:12227,removeFromVariationsIgnoreList:emptyMethod,cleanupExperiments:cleanupExperiments,generateHash:generateHash}
}(),"undefined"==typeof Object.keys&&(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),/*!
 *
 * Copyright 2009-2016 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
function(e){"use strict";DYO.Q=e()}(function(){"use strict";function e(e,t){var n=e;return n&&n.toString().indexOf("[native code]")>-1?n:t}function t(e){return function(){return J.apply(e,arguments)}}function n(e){return e===Object(e)}function r(e){return"[object StopIteration]"===nt(e)||e instanceof G}function i(e,t){if(B&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(rt)){for(var n=[],r=t;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(e.stack);var i=n.join("\n"+rt+"\n");e.stack=o(i)}}function o(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;++r){var i=t[r];u(i)||a(i)||!i||n.push(i)}return n.join("\n")}function a(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function s(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function u(e){var t=s(e);if(!t)return!1;var n=t[0],r=t[1];return n===W&&r>=H&&ut>=r}function c(){if(B)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],r=s(n);if(!r)return;return W=r[0],r[1]}}function l(e){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn,e.apply(e,arguments)}}function d(e){return e instanceof g?e:D(e)?C(e):b(e)}function p(){function e(e){t=e,d.longStackSupport&&B&&(o.source=e),X(n,function(t,n){d.nextTick(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,r=void 0}var t,n=[],r=[],i=et(p.prototype),o=et(g.prototype);if(o.promiseDispatch=function(e,i,o){var a=z(arguments);n?(n.push(a),"when"===i&&o[1]&&r.push(o[1])):d.nextTick(function(){t.promiseDispatch.apply(t,a)})},o.valueOf=function(){if(n)return o;var e=y(t);return v(e)&&(t=e),e},o.inspect=function(){return t?t.inspect():{state:"pending"}},d.longStackSupport&&B)try{throw new Error}catch(a){o.stack=a.stack.substring(a.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){t||e(d(n))},i.fulfill=function(n){t||e(b(n))},i.reject=function(n){t||e(_(n))},i.notify=function(e){t||X(r,function(t,n){d.nextTick(function(){n(e)})},void 0)},i}function f(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=p();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function m(e){return f(function(t,n){for(var r=0,i=e.length;i>r;r++)d(e[r]).then(t,n)})}function g(e,t,n){void 0===t&&(t=function(e){return _(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=et(g.prototype);if(r.promiseDispatch=function(n,i,o){var a;try{a=e[i]?e[i].apply(r,o):t.call(r,i,o)}catch(s){a=_(s)}n&&n(a)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?r:e.value}}return r}function h(e,t,n,r){return d(e).then(t,n,r)}function y(e){if(v(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function v(e){return e instanceof g}function D(e){return n(e)&&"function"==typeof e.then}function O(e){return v(e)&&"pending"===e.inspect().state}function w(e){return!v(e)||"fulfilled"===e.inspect().state}function Y(e){return v(e)&&"rejected"===e.inspect().state}function S(){it.length=0,ot.length=0,st||(st=!0)}function x(e,t){st&&("object"==typeof process&&"function"==typeof process.emit&&d.nextTick.runAfter(function(){-1!==Q(ot,e)&&(process.emit("unhandledRejection",t,e),at.push(e))}),ot.push(e),it.push(t&&"undefined"!=typeof t.stack?t.stack:"(no stack) "+t))}function I(e){if(st){var t=Q(ot,e);-1!==t&&("object"==typeof process&&"function"==typeof process.emit&&d.nextTick.runAfter(function(){var n=Q(at,e);-1!==n&&(process.emit("rejectionHandled",it[t],e),at.splice(n,1))}),ot.splice(t,1),it.splice(t,1))}}function _(e){var t=g({when:function(t){return t&&I(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return x(t,e),t}function b(e){return g({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return tt(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function C(e){var t=p();return d.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function E(e){return g({isDef:function(){}},function(t,n){return k(e,t,n)},function(){return d(e).inspect()})}function P(e,t,n){return d(e).spread(t,n)}function T(e){return function(){function t(e,t){var a;if("undefined"==typeof StopIteration){try{a=n[e](t)}catch(s){return _(s)}return a.done?d(a.value):h(a.value,i,o)}try{a=n[e](t)}catch(s){return r(s)?d(s.value):_(s)}return h(a,i,o)}var n=e.apply(this,arguments),i=t.bind(t,"next"),o=t.bind(t,"throw");return i()}}function N(e){d.done(d.async(e)())}function A(e){throw new G(e)}function U(e){return function(){return P([this,M(arguments)],function(t,n){return e.apply(t,n)})}}function k(e,t,n){return d(e).dispatch(t,n)}function M(e){return h(e,function(e){var t=0,n=p();return X(e,function(r,i,o){var a;v(i)&&"fulfilled"===(a=i.inspect()).state?e[o]=a.value:(++t,h(i,function(r){e[o]=r,0===--t&&n.resolve(e)},n.reject,function(e){n.notify({index:o,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function j(e){if(0===e.length)return d.resolve();var t=d.defer(),n=0;return X(e,function(r,i,o){function a(e){t.resolve(e)}function s(e){n--,0===n&&(e.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+e.message,t.reject(e))}function u(e){t.notify({index:o,value:e})}var c=e[o];n++,h(c,a,s,u)},void 0),t.promise}function R(e){return h(e,function(e){return e=K(e,d),h(M(K(e,function(e){return h(e,Z,Z)})),function(){return e})})}function V(e){return d(e).allSettled()}function L(e,t){return d(e).then(void 0,void 0,t)}function F(e,t){return d(e).nodeify(t)}var B=!1;try{throw new Error}catch(q){B=!!q.stack}var W,G,H=c(),Z=function(){},$=function(){function e(){for(var e,r;n.next;)n=n.next,e=n.task,n.task=void 0,r=n.domain,r&&(n.domain=void 0,r.enter()),t(e,r);for(;s.length;)e=s.pop(),t(e);i=!1}function t(t,n){try{t()}catch(r){if(a)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),r;setTimeout(function(){throw r},0)}n&&n.exit()}var n={task:void 0,next:null},r=n,i=!1,o=void 0,a=!1,s=[];if($=function(e){r=r.next={task:e,domain:a&&process.domain,next:null},i||(i=!0,o())},"object"==typeof process&&"[object process]"===process.toString()&&process.nextTick)a=!0,o=function(){process.nextTick(e)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var u=new MessageChannel;u.port1.onmessage=function(){o=c,u.port1.onmessage=e,e()};var c=function(){u.port2.postMessage(0)};o=function(){setTimeout(e,0),c()}}else o=function(){setTimeout(e,0)};return $.runAfter=function(e){s.push(e),i||(i=!0,o())},$}(),J=Function.call,z=t(Array.prototype.slice),X=t(e(Array.prototype.reduce,function(e){if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,n=Object(this),r=n.length>>>0,i=0;if(2==arguments.length)t=arguments[1];else{for(;r>i&&!(i in n);)i++;if(i>=r)throw new TypeError("Reduce of empty array with no initial value");t=n[i++]}for(;r>i;i++)i in n&&(t=e(t,n[i],i,n));return t})),Q=t(e(Array.prototype.indexOf,function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return-1;var o=+t||0;if(1/0===Math.abs(o)&&(o=0),o>=i)return-1;for(n=Math.max(o>=0?o:i-Math.abs(o),0);i>n;){if(n in r&&r[n]===e)return n;n++}return-1})),K=t(e(Array.prototype.map,function(e,t){var n,r,i;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),a=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),r=new Array(a),i=0;a>i;){var s,u;i in o&&(s=o[i],u=e.call(n,s,i,o),r[i]=u),i++}return r})),et=e(Object.create,function(){var e=function(){};return function(t){if(arguments.length>1)throw Error("Second argument not supported");if(t!==Object(t))throw TypeError("Argument must be an object");if(null===t)throw Error("null [[Prototype]] not supported");e.prototype=t;var n=new e;return e.prototype=null,n}}()),tt=(t(Object.prototype.hasOwnProperty),e(Object.keys,function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,a,s=[];for(o in i)e.call(i,o)&&s.push(o);if(t)for(a=0;r>a;a++)e.call(i,n[a])&&s.push(n[a]);return s}}())),nt=t(Object.prototype.toString);G="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var rt="From previous event:";d.resolve=d,d.nextTick=$,d.longStackSupport=!1,"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(d.longStackSupport=!0),d.defer=p,p.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):e.resolve(arguments.length>2?z(arguments,1):n)}},d.Promise=f,d.promise=f,f.race=m,f.all=M,f.reject=_,f.resolve=d,d.passByCopy=function(e){return e},g.prototype.passByCopy=function(){return this},d.join=function(e,t){return d(e).join(t)},g.prototype.join=function(e){return d([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Q can't join: not the same: "+e+" "+t)})},d.race=m,g.prototype.race=function(){return this.then(d.race)},d.makePromise=g,g.prototype.toString=function(){return"[object Promise]"},g.prototype.then=function(e,t,n){function r(t){try{return"function"==typeof e?e(t):t}catch(n){return _(n)}}function o(e){if("function"==typeof t){i(e,s);try{return t(e)}catch(n){return _(n)}}return _(e)}function a(e){return"function"==typeof n?n(e):e}var s=this,u=p(),c=!1;return d.nextTick(function(){s.promiseDispatch(function(e){c||(c=!0,u.resolve(r(e)))},"when",[function(e){c||(c=!0,u.resolve(o(e)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=a(e)}catch(r){if(n=!0,!d.onerror)throw r;d.onerror(r)}n||u.notify(t)}]),u.promise},d.tap=function(e,t){return d(e).tap(t)},g.prototype.tap=function(e){return e=d(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},d.when=h,g.prototype.thenResolve=function(e){return this.then(function(){return e})},d.thenResolve=function(e,t){return d(e).thenResolve(t)},g.prototype.thenReject=function(e){return this.then(function(){throw e})},d.thenReject=function(e,t){return d(e).thenReject(t)},d.nearer=y,d.isPromise=v,d.isPromiseAlike=D,d.isPending=O,g.prototype.isPending=function(){return"pending"===this.inspect().state},d.isFulfilled=w,g.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},d.isRejected=Y,g.prototype.isRejected=function(){return"rejected"===this.inspect().state};var it=[],ot=[],at=[],st=!0;d.resetUnhandledRejections=S,d.getUnhandledReasons=function(){return it.slice()},d.stopUnhandledRejectionTracking=function(){S(),st=!1},S(),d.reject=_,d.fulfill=b,d.master=E,d.spread=P,g.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},d.async=T,d.spawn=N,d["return"]=A,d.promised=U,d.dispatch=k,g.prototype.dispatch=function(e,t){var n=this,r=p();return d.nextTick(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},d.get=function(e,t){return d(e).dispatch("get",[t])},g.prototype.get=function(e){return this.dispatch("get",[e])},d.set=function(e,t,n){return d(e).dispatch("set",[t,n])},g.prototype.set=function(e,t){return this.dispatch("set",[e,t])},d.del=d["delete"]=function(e,t){return d(e).dispatch("delete",[t])},g.prototype.del=g.prototype["delete"]=function(e){return this.dispatch("delete",[e])},d.mapply=d.post=function(e,t,n){return d(e).dispatch("post",[t,n])},g.prototype.mapply=g.prototype.post=function(e,t){return this.dispatch("post",[e,t])},d.send=d.mcall=d.invoke=function(e,t){return d(e).dispatch("post",[t,z(arguments,2)])},g.prototype.send=g.prototype.mcall=g.prototype.invoke=function(e){return this.dispatch("post",[e,z(arguments,1)])},d.fapply=function(e,t){return d(e).dispatch("apply",[void 0,t])},g.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},d["try"]=d.fcall=function(e){return d(e).dispatch("apply",[void 0,z(arguments,1)])},g.prototype.fcall=function(){return this.dispatch("apply",[void 0,z(arguments)])},d.fbind=function(e){var t=d(e),n=z(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(z(arguments))])}},g.prototype.fbind=function(){var e=this,t=z(arguments);return function(){return e.dispatch("apply",[this,t.concat(z(arguments))])}},d.keys=function(e){return d(e).dispatch("keys",[])},g.prototype.keys=function(){return this.dispatch("keys",[])},d.all=M,g.prototype.all=function(){return M(this)},d.any=j,g.prototype.any=function(){return j(this)},d.allResolved=l(R,"allResolved","allSettled"),g.prototype.allResolved=function(){return R(this)},d.allSettled=V,g.prototype.allSettled=function(){return this.then(function(e){return M(K(e,function(e){function t(){return e.inspect()}return e=d(e),e.then(t,t)}))})},d.fail=d["catch"]=function(e,t){return d(e).then(void 0,t)},g.prototype.fail=g.prototype["catch"]=function(e){return this.then(void 0,e)},d.progress=L,g.prototype.progress=function(e){return this.then(void 0,void 0,e)},d.fin=d["finally"]=function(e,t){return d(e)["finally"](t)},g.prototype.fin=g.prototype["finally"]=function(e){if(!e||"function"!=typeof e.apply)throw new Error("Q can't apply finally callback");return e=d(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},d.done=function(e,t,n,r){return d(e).done(t,n,r)},g.prototype.done=function(e,t,n){var r=function(e){d.nextTick(function(){if(i(e,o),!d.onerror)throw e;d.onerror(e)})},o=e||t||n?this.then(e,t,n):this;"object"==typeof process&&process&&process.domain&&(r=process.domain.bind(r)),o.then(void 0,r)},d.timeout=function(e,t,n){return d(e).timeout(t,n)},g.prototype.timeout=function(e,t){var n=p(),r=setTimeout(function(){t&&"string"!=typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),n.reject(t)},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},d.delay=function(e,t){return void 0===t&&(t=e,e=void 0),d(e).delay(t)},g.prototype.delay=function(e){return this.then(function(t){var n=p();return setTimeout(function(){n.resolve(t)},e),n.promise})},d.nfapply=function(e,t){return d(e).nfapply(t)},g.prototype.nfapply=function(e){var t=p(),n=z(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},d.nfcall=function(e){var t=z(arguments,1);return d(e).nfapply(t)},g.prototype.nfcall=function(){var e=z(arguments),t=p();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},d.nfbind=d.denodeify=function(e){if(void 0===e)throw new Error("Q can't wrap an undefined function");var t=z(arguments,1);return function(){var n=t.concat(z(arguments)),r=p();return n.push(r.makeNodeResolver()),d(e).fapply(n).fail(r.reject),r.promise}},g.prototype.nfbind=g.prototype.denodeify=function(){var e=z(arguments);return e.unshift(this),d.denodeify.apply(void 0,e)},d.nbind=function(e,t){var n=z(arguments,2);return function(){function r(){return e.apply(t,arguments)}var i=n.concat(z(arguments)),o=p();return i.push(o.makeNodeResolver()),d(r).fapply(i).fail(o.reject),o.promise}},g.prototype.nbind=function(){var e=z(arguments,0);return e.unshift(this),d.nbind.apply(void 0,e)},d.nmapply=d.npost=function(e,t,n){return d(e).npost(t,n)},g.prototype.nmapply=g.prototype.npost=function(e,t){var n=z(t||[]),r=p();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},d.nsend=d.nmcall=d.ninvoke=function(e,t){var n=z(arguments,2),r=p();return n.push(r.makeNodeResolver()),d(e).dispatch("post",[t,n]).fail(r.reject),r.promise},g.prototype.nsend=g.prototype.nmcall=g.prototype.ninvoke=function(e){var t=z(arguments,1),n=p();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},d.nodeify=F,g.prototype.nodeify=function(e){return e?void this.then(function(t){d.nextTick(function(){e(null,t)})},function(t){d.nextTick(function(){e(t)})}):this},d.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ut=c();return d}),DYO.MozilaImplementations=function(){var e=function(e,t){var n,r,i;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),a=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),r=new Array(a),i=0;a>i;){var s,u;i in o&&(s=o[i],u=e.call(n,s,i,o),r[i]=u),i++}return r},t=function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,n=Object(this),r=n.length>>>0,i=0;if(2==arguments.length)t=arguments[1];else{for(;r>i&&!(i in n);)i++;if(i>=r)throw new TypeError("Reduce of empty array with no initial value");t=n[i++]}for(;r>i;i++)i in n&&(t=e(t,n[i],i,n));return t},n=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=[],i=arguments.length>=2?arguments[1]:void 0,o=0;n>o;o++)if(o in t){var a=t[o];e.call(i,a,o,t)&&r.push(a)}return r},r=function(e,t){var n,r;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),r=0;o>r;){var a;r in i&&(a=i[r],e.call(n,a,r,i)),r++}},i=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;r>o;o++)if(t=n[o],e.call(i,t,o,n))return t;return void 0},o=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return-1;var o=+t||0;if(1/0===Math.abs(o)&&(o=0),o>=i)return-1;for(n=Math.max(o>=0?o:i-Math.abs(o),0);i>n;){if(n in r&&r[n]===e)return n;n++}return-1},a=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,a,s=[];for(o in i)e.call(i,o)&&s.push(o);if(t)for(a=0;r>a;a++)e.call(i,n[a])&&s.push(n[a]);return s}}();return{arrayMap:e,arrayReduce:t,arrayFilter:n,arrayForEach:r,arrayFind:i,arrayIndexOf:o,objectKeys:a}}(),DYO.CoreUtils=function(){function safeEval(code){try{return eval(code)}catch(e){return null}}function addWindowEventListener(e,t){var n=window.addEventListener?"addEventListener":"attachEvent";window[n](e,t)}function getStringSizeInBytes(e){for(var t=e.length,n=e.length-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&2047>=r?t++:r>2047&&65535>=r&&(t+=2),r>=56320&&57343>=r&&n--}return t}function getCurrentScriptLoc(){var e=document.getElementsByTagName("script");return e[e.length-1]}function insertElement(e,t,n){var r,i=!0;if("undefined"!=typeof t&&""!==t&&(r=document.getElementById(t),"undefined"!=typeof r&&null!==r&&(i=!1)),i){var o=n||getCurrentScriptLoc();r=o.parentElement}i||(r.innerHTML=""),r.appendChild(e)}function clone(e){if(null===e||"object"!=typeof e||"isActiveClone"in e)return e;if(e instanceof Date)var t=new e.constructor;else if(e.nodeType&&"function"==typeof e.cloneNode)var t=e.cloneNode(!0);else var t=e.constructor();for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e.isActiveClone=null,t[n]=clone(e[n]),delete e.isActiveClone);return t}function isEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function rejectPromiseIfFalse(e){return DYO.Q(e).then(function(e){if(e)return e;throw"reject promise"})}function orPromiseArray(e){return DYO.Q.all(e).then(function(e){return reduceOnArray(function(e,t){return e?e:t},void 0,e)})}function andPromiseArray(e){return DYO.Q.all(e).then(function(e){return reduceOnArray(function(e,t){return e?t:e},!0,e)})}function orReduceFunction(e,t){return DYO.Q(e).then(function(e){return DYO.Q(e?e:t)})}function andReduceFunction(e,t){return DYO.Q(e).then(function(e){return DYO.Q(e?t:e)})}function curry(e){var t=e.length;return function n(){var r=Array.prototype.slice.call(arguments,0);return r.length>=t?e.apply(null,r):function(){var e=Array.prototype.slice.call(arguments,0);return n.apply(null,r.concat(e))}}}function onlyUnique(e,t,n){return indexOfOnArray(e,n)===t}function runFuncOnce(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}function runFunc1OnceAfterRunFunc2(e,t){var n=!1;return function(){return n?t.apply(this,arguments):(n=!0,e.apply(this,arguments))}}function zip(e){return mapOnArray(function(t,n){return mapOnArray(function(e){return e[n]},e)},e[0])}function compose(){var e=arguments,t=e.length;return function(){for(var n=t-1,r=e[n].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function addToCommonStyleBlock(e){if("undefined"!=typeof document&&"undefined"!=typeof document.getElementsByClassName){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.className+=" dy-common-style","string"==typeof e&&t&&n&&(n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n))}}function interval(e,t,n){var r=function(t,n){return function(){if("undefined"==typeof n||n-->0){setTimeout(r,t);try{e.call(null)}catch(i){throw n=0,i.toString()}}}}(t,n);setTimeout(r,t)}function usePrototypeOrImplementation(e,t){var n=e;return n&&n.toString().indexOf("[native code]")>-1?n:t}function composeOn(e,t){return reduceOnArray(function(e,t){return t(e)},e,t)}function isNotNull(e){return null!==e}var arrayMap=usePrototypeOrImplementation(Array.prototype.map,DYO.MozilaImplementations.arrayMap),arrayReduce=usePrototypeOrImplementation(Array.prototype.reduce,DYO.MozilaImplementations.arrayReduce),arrayFilter=usePrototypeOrImplementation(Array.prototype.filter,DYO.MozilaImplementations.arrayFilter),arrayForEach=usePrototypeOrImplementation(Array.prototype.forEach,DYO.MozilaImplementations.arrayForEach),arrayFind=usePrototypeOrImplementation(Array.prototype.find,DYO.MozilaImplementations.arrayFind),arrayIndexOf=usePrototypeOrImplementation(Array.prototype.indexOf,DYO.MozilaImplementations.arrayIndexOf),objectKeys=usePrototypeOrImplementation(Object.keys,DYO.MozilaImplementations.objectKeys),mapOnArray=function(e,t){return arrayMap.call(t,e)},reduceOnArray=function(e,t,n){return arrayReduce.call(n,e,t)},filterOnArray=function(e,t){return arrayFilter.call(t,e)},forEachOnArray=function(e,t){return arrayForEach.call(t,e)},findOnArray=function(e,t){return arrayFind.call(t,e)},indexOfOnArray=function(e,t,n){return arrayIndexOf.call(t,e,n)};return{getCurrentScriptLoc:getCurrentScriptLoc,compose:compose,zip:zip,runFunc1OnceAfterRunFunc2:runFunc1OnceAfterRunFunc2,onlyUnique:onlyUnique,runFuncOnce:runFuncOnce,curry:curry,orPromiseArray:orPromiseArray,andPromiseArray:andPromiseArray,orReduceFunction:orReduceFunction,andReduceFunction:andReduceFunction,safeEval:safeEval,isEmpty:isEmpty,addWindowEventListener:addWindowEventListener,getStringSizeInBytes:getStringSizeInBytes,insertElement:insertElement,addToCommonStyleBlock:addToCommonStyleBlock,setInterval:interval,map:mapOnArray,reduce:reduceOnArray,filter:filterOnArray,forEach:forEachOnArray,find:findOnArray,clone:clone,keys:objectKeys,indexOf:indexOfOnArray,composeOn:composeOn,isNotNull:isNotNull}}(),DYO.Enums=function(){function e(e){return t(r,e)}function t(e,r){if("object"==typeof e){var i=n(e);if("undefined"!=typeof i[r])return i[r];for(var o in e)if(e.hasOwnProperty(o)){var a=t(e[o],r);if(a)return a}return null}}function n(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}var r={REPORT_API:{TYPES:{IMPRESSION:"imp",REAL_IMPRESSION:"ri",CLICK:"c",DECISION:"dec"},OLD_TYPES:{1:"imp",2:"ri",3:"c",4:"dec"}}};return{ENUMS:r,getEnumNameByValue:e}}(),DYO.ExpUtils=function(){function e(e){var t=DYO.cookieManagedExperiments;if("object"!=typeof t||"undefined"==typeof t.length||0===t.length)return!1;for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}function t(t,i,o,a,s){try{if("undefined"!=typeof o&&null!=o&&o.length>0&&"undefined"!=typeof s&&null!=s&&"undefined"!=typeof s.method){if(s.method==I&&t!==E)return;if(s.method==_&&t!==P)return;if(s.method==b&&t!==T)return;if(s.method==C&&t!==N)return;var u,c=e(i);u=c?DYO.StorageUtils.get(D,["cookieStorage","localStorage"]):DYO.StorageUtils.get(y,["localStorage","cookieStorage"]);var l=new Array;"undefined"!=typeof u&&""!=u&&null!=u&&(l=u.split(O));for(var d=!1,p=0;p<l.length;p++){var f=l[p].split(w);if(i==f[0]){if(s.method==_&&o==f[1]){var m=f[2].split(S),g=n(m.concat(a));l[p]=r(i,o,g,s)}else l[p]=r(i,o,a,s);d=!0;break}}d||(l.push(r(i,o,a,s)),d=!0),c?DYO.StorageUtils.set(D,l.join(O),["cookieStorage","localStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain()}):DYO.StorageUtils.set(y,l.join(O),["localStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain()})}}catch(h){}}function n(e){for(var t=e.concat(),n=0;n<t.length;++n)for(var r=n+1;r<t.length;++r)t[n]===t[r]&&t.splice(r--,1);return t}function r(e,t,n,r){var o=i(r),a=e+w+t+w+n.join(S)+w+l+w+o;return a}function i(e){var t=(new Date).getTime(),n=e.sesLoadSeq;e.sesLoadSeq===DYO.SessionUtils.NEXT&&DYO.SessionUtils.getNewSessionId()!==DYO.SessionUtils.NEXT&&null!=DYO.SessionUtils.getNewSessionId()&&(n=DYO.SessionUtils.getNewSessionId());var r=""+n+Y+t;return r}function o(e,t){var n="",r="undefined"!=typeof e&&""!==e&&null!==e,i="undefined"!=typeof t&&""!==t&&null!==t;if(!r&&!i)return n;if(!r)return t;if(!i)return e;try{for(var o=e.split(DYO.ExpUtils.expSep),a=t.split(DYO.ExpUtils.expSep),s={},u=0;u<a.length;++u){var c=a[u].split(DYO.ExpUtils.dataSep);s[c[0]]=a[u]}for(var u=0;u<o.length;++u){var c=o[u].split(DYO.ExpUtils.dataSep);s[c[0]]=o[u]}for(var l in s)s.hasOwnProperty(l)&&(n=""!==n?n+DYO.ExpUtils.expSep+s[l]:s[l])}catch(d){n=e+DYO.ExpUtils.expSep+t}return n}function a(e){try{if("undefined"==typeof DYO)return!1;var t=["Smart_Object_For_Placement","Smart_Action_For_Placement","_dy_collection_inject"];if(!s){s=[];for(var n in DYO.otags)if(DYO.otags.hasOwnProperty(n))for(var r=0;r<t.length;r++)0===DYO.otags[n].name.indexOf(t[r])&&s.push(n)}if(s.length){for(var i=!1,r=0;r<s.length;r++)"undefined"!=typeof DYO.otags[s[r]].rules&&"undefined"!=typeof DYO.otags[s[r]].rules[0]&&"undefined"!=typeof DYO.otags[s[r]].rules[0].smartObject&&"undefined"!=typeof DYO.otags[s[r]].rules[0].smartObject.experiment&&DYO.otags[s[r]].rules[0].smartObject.experiment===e&&(i=!0);return i}return!1}catch(o){return!1}}var s,u="0",c="1",l="2",d="0",p="1",f="2",m="3",g="4",h="_dyexps",y="_dy_att_exps",v="_dy_c_exps",D="_dy_c_att_exps",O="##",w="|",Y=":",S=",",x="-1",I="0",_="1",b="2",C="3",E="get",P="ri",T="c",N="cust";return{expSep:O,dataSep:w,verSep:Y,variSep:S,notInExp:x,storageKey:h,storageAttKey:y,cookieKey:v,cookieAttKey:D,SELECTION_AND_ATTRIBUTION:u,SELECTION:c,ATTRIBUTION:l,SUB_MECHANISM_NA:d,SUB_MECHANISM_CG_WITH_PREDICT:p,SUB_MECHANISM_CG_WITHOUT_PREDICT:f,SUB_MECHANISM_REWEIGHT_EXPLORE:m,SUB_MECHANISM_REWEIGHT_KICK_IN:g,IMPLICIT_ATTRIBUTION:I,ATTRIBUTION_AFTER_RI:_,ATTRIBUTION_AFTER_C:b,EXPLICIT_ATTRIBUTION:C,DECISION_EVENT:E,IMPRESSION_EVENT:P,CONVERSION_EVENT:T,attributeVariationsExplicitly:t,isExpCookieManaged:e,isInternalAction:a,merge:o}}(),/*
 Copyright 2013 Daniel Wirtz <dcode@dcode.io>
 Copyright 2009 The Closure Library Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS-IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */
function(e){"use strict";var t=function(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n};t.isLong=function(e){return(e&&e instanceof t)===!0};var n={},r={};t.fromInt=function(e,i){var o,a;return i?(e>>>=0,e>=0&&256>e&&(a=r[e])?a:(o=new t(e,0>(0|e)?-1:0,!0),e>=0&&256>e&&(r[e]=o),o)):(e=0|e,e>=-128&&128>e&&(a=n[e])?a:(o=new t(e,0>e?-1:0,!1),e>=-128&&128>e&&(n[e]=o),o))},t.fromNumber=function(e,n){return n=!!n,isNaN(e)||!isFinite(e)?t.ZERO:!n&&-u>=e?t.MIN_VALUE:!n&&e+1>=u?t.MAX_VALUE:n&&e>=s?t.MAX_UNSIGNED_VALUE:0>e?t.fromNumber(-e,n).negate():new t(e%a|0,e/a|0,n)},t.fromBits=function(e,n,r){return new t(e,n,r)},t.fromString=function(e,n,r){if(0===e.length)throw Error("number format error: empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t.ZERO;if("number"==typeof n&&(r=n,n=!1),r=r||10,2>r||r>36)throw Error("radix out of range: "+r);var i;if((i=e.indexOf("-"))>0)throw Error('number format error: interior "-" character: '+e);if(0===i)return t.fromString(e.substring(1),n,r).negate();for(var o=t.fromNumber(Math.pow(r,8)),a=t.ZERO,s=0;s<e.length;s+=8){var u=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+u),r);if(8>u){var l=t.fromNumber(Math.pow(r,u));a=a.multiply(l).add(t.fromNumber(c))}else a=a.multiply(o),a=a.add(t.fromNumber(c))}return a.unsigned=n,a},t.fromValue=function(e){return"number"==typeof e?t.fromNumber(e):"string"==typeof e?t.fromString(e):t.isLong(e)?e:new t(e.low,e.high,e.unsigned)};var i=65536,o=1<<24,a=i*i,s=a*a,u=s/2,c=t.fromInt(o);t.ZERO=t.fromInt(0),t.UZERO=t.fromInt(0,!0),t.ONE=t.fromInt(1),t.UONE=t.fromInt(1,!0),t.NEG_ONE=t.fromInt(-1),t.MAX_VALUE=t.fromBits(-1,2147483647,!1),t.MAX_UNSIGNED_VALUE=t.fromBits(-1,-1,!0),t.MIN_VALUE=t.fromBits(0,-2147483648,!1),t.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},t.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*a+(this.low>>>0):this.high*a+(this.low>>>0)},t.prototype.toString=function(e){if(e=e||10,2>e||e>36)throw new RangeError("radix out of range: "+e);if(this.isZero())return"0";var n;if(this.isNegative()){if(this.equals(t.MIN_VALUE)){var r=t.fromNumber(e),i=this.div(r);return n=i.multiply(r).subtract(this),i.toString(e)+n.toInt().toString(e)}return"-"+this.negate().toString(e)}var o=t.fromNumber(Math.pow(e,6),this.unsigned);n=this;for(var a="";;){var s=n.div(o),u=n.subtract(s.multiply(o)).toInt()>>>0,c=u.toString(e);if(n=s,n.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}},t.prototype.getHighBits=function(){return this.high},t.prototype.getHighBitsUnsigned=function(){return this.high>>>0},t.prototype.getLowBits=function(){return this.low},t.prototype.getLowBitsUnsigned=function(){return this.low>>>0},t.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(t.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,n=31;n>0&&0==(e&1<<n);n--);return 0!=this.high?n+33:n+1},t.prototype.isZero=function(){return 0===this.high&&0===this.low},t.prototype.isNegative=function(){return!this.unsigned&&this.high<0},t.prototype.isPositive=function(){return this.unsigned||this.high>=0},t.prototype.isOdd=function(){return 1===(1&this.low)},t.prototype.isEven=function(){return 0===(1&this.low)},t.prototype.equals=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},t.prototype.notEquals=function(e){return t.isLong(e)||(e=t.fromValue(e)),!this.equals(e)},t.prototype.lessThan=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.compare(e)<0},t.prototype.lessThanOrEqual=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.compare(e)<=0},t.prototype.greaterThan=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.compare(e)>0},t.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0},t.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.subtract(e).isNegative()?-1:1},t.prototype.negate=function(){return!this.unsigned&&this.equals(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.add=function(e){t.isLong(e)||(e=t.fromValue(e));var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,a=e.high>>>16,s=65535&e.high,u=e.low>>>16,c=65535&e.low,l=0,d=0,p=0,f=0;return f+=o+c,p+=f>>>16,f&=65535,p+=i+u,d+=p>>>16,p&=65535,d+=r+s,l+=d>>>16,d&=65535,l+=n+a,l&=65535,t.fromBits(p<<16|f,l<<16|d,this.unsigned)},t.prototype.subtract=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.negate())},t.prototype.multiply=function(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())return t.ZERO;if(this.equals(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.equals(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(c)&&e.lessThan(c))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,a=e.high>>>16,s=65535&e.high,u=e.low>>>16,l=65535&e.low,d=0,p=0,f=0,m=0;return m+=o*l,f+=m>>>16,m&=65535,f+=i*l,p+=f>>>16,f&=65535,f+=o*u,p+=f>>>16,f&=65535,p+=r*l,d+=p>>>16,p&=65535,p+=i*u,d+=p>>>16,p&=65535,p+=o*s,d+=p>>>16,p&=65535,d+=n*l+r*u+i*s+o*a,d&=65535,t.fromBits(f<<16|m,d<<16|p,this.unsigned)},t.prototype.div=function(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw new Error("division by zero");if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;var n,r,i;if(this.equals(t.MIN_VALUE)){if(e.equals(t.ONE)||e.equals(t.NEG_ONE))return t.MIN_VALUE;if(e.equals(t.MIN_VALUE))return t.ONE;var o=this.shiftRight(1);return n=o.div(e).shiftLeft(1),n.equals(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(r=this.subtract(e.multiply(n)),i=n.add(r.div(e)))}if(e.equals(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();for(i=t.ZERO,r=this;r.greaterThanOrEqual(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),s=48>=a?1:Math.pow(2,a-48),u=t.fromNumber(n),c=u.multiply(e);c.isNegative()||c.greaterThan(r);)n-=s,u=t.fromNumber(n,this.unsigned),c=u.multiply(e);u.isZero()&&(u=t.ONE),i=i.add(u),r=r.subtract(c)}return i},t.prototype.modulo=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.subtract(this.div(e).multiply(e))},t.prototype.not=function(){return t.fromBits(~this.low,~this.high,this.unsigned)},t.prototype.and=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)},t.prototype.or=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)},t.prototype.xor=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)},t.prototype.shiftLeft=function(e){return t.isLong(e)&&(e=e.toInt()),0===(e&=63)?this:32>e?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)},t.prototype.shiftRight=function(e){return t.isLong(e)&&(e=e.toInt()),0===(e&=63)?this:32>e?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},t.prototype.shiftRightUnsigned=function(e){if(t.isLong(e)&&(e=e.toInt()),e&=63,0===e)return this;var n=this.high;if(32>e){var r=this.low;return t.fromBits(r>>>e|n<<32-e,n>>>e,this.unsigned)}return 32===e?t.fromBits(n,0,this.unsigned):t.fromBits(n>>>e-32,0,this.unsigned)},t.prototype.toSigned=function(){return this.unsigned?new t(this.low,this.high,!1):this},t.prototype.toUnsigned=function(){return this.unsigned?this:new t(this.low,this.high,!0)},e.Long=t}(DYO),DYO.Predict=function(){function e(e,t){return e+l+t}function t(t,n,r){var i=e(n,r);if("undefined"!=typeof t&&null!=t){if(t.hasOwnProperty(i)){var o=t[i];return o}return f}return p}function n(){var t={};if("undefined"!=typeof DY.prd&&null!=DY.prd){for(var n=0;n<DY.prd.length;n++){var r=DY.prd[n],i=e(r.expId,r.verId);t[i]=r.vars}return t}}function r(){var t={};if("undefined"!=typeof DY.prd&&null!=DY.prd){for(var n=0;n<DY.prd.length;n++){var r=DY.prd[n],i=e(r.expId,r.verId),o=m(r.vars,r.smech);t[i]=o}return t}}function i(e,n){var i=r(),o=t(i,e,n);return o==p?void 0:o==f?[]:o}function o(e,n){var r=window.DYO.StorageUtils.get(c,["localStorage","cookieStorage"]);if("undefined"!=typeof r&&null!=r&&""!=r){var i=window.DYO.StringUtils.pkv(r),o=t(i,e,n);if(o==p)return null;if(o==f){var a=m([],null);return a}var s=window.DYO.StringUtils.pkv(o),a=m(null,null);return"undefined"!=typeof s.varIdArr&&null!=s.varIdArr&&s.varIdArr.length>0&&(a.varIdArr=s.varIdArr.split(d)),"undefined"!=typeof s.smechArr&&null!=s.smechArr&&s.smechArr.length>0&&(a.smechArr=s.smechArr.split(d)),a}return null}function a(){try{var e=r();if("undefined"!=typeof e&&null!=e){var t=window.DYO.StringUtils.skv(e);window.DYO.StorageUtils.set(c,t,["localStorage"])}else window.DYO.StorageUtils.remove(c,["localStorage"]);var i=n();if("undefined"!=typeof i&&null!=i){var o=window.DYO.StringUtils.skv(i);window.DYO.StorageUtils.set(u,o,["localStorage"])}else window.DYO.StorageUtils.remove(u,["localStorage"])}catch(a){}}function s(e,t){try{var n=i(e,t);return null==n?o(e,t):n}catch(r){}}var u="_dyprd",c="_dyprdobj",l="|",d=",",p="NP",f="NE",m=function(e,t){var n=new Object;return n.varIdArr="undefined"!=typeof e?e:null,n.smechArr="undefined"!=typeof t?t:null,n.toString=function(){return DYO.StringUtils.skv({varIdArr:this.varIdArr,smechArr:this.smechArr})},n};return{updatePredictStorage:a,getPrediction:s}}(),DYO.pubSub={},function(e){var t={},n=-1;e.sub=function(e,r){t[e]||(t[e]=[]);var i=(++n).toString();return t[e].push({token:i,func:r}),i},e.pub=function(e,n){return t[e]?(setTimeout(function(){for(var r=t[e],i=r?r.length:0;i--;)r[i].func.apply(null,n)},0),!0):!1},e.off=function(e){for(var n in t)if(t[n])for(var r=0,i=t[n].length;i>r;r++)if(t[n][r].token===e)return t[n].splice(r,1),e;return!1}}(DYO.pubSub),DYO.pubSub={},function(e){var t={},n=-1;e.sub=function(e,r){t[e]||(t[e]=[]);var i=(++n).toString();return t[e].push({token:i,func:r}),i},e.pub=function(e,n){return t[e]?(setTimeout(function(){for(var r=t[e],i=r?r.length:0;i--;)r[i].func.apply(null,n)},0),!0):!1},e.off=function(e){for(var n in t)if(t[n])for(var r=0,i=t[n].length;i>r;r++)if(t[n][r].token===e)return t[n].splice(r,1),e;return!1}}(DYO.pubSub),document.dyQuerySelectorAll||("function"==typeof document.querySelectorAll?document.dyQuerySelectorAll=function(){return document.querySelectorAll.apply(document,arguments)}:function(e,t){e=document,t=e.createStyleSheet(),e.dyQuerySelectorAll=function(n,r,i,o,a){for(a=e.all,r=[],n=n.replace(/\[for\b/gi,"[htmlFor").split(","),i=n.length;i--;){for(t.addRule(n[i],"k:v"),o=a.length;o--;)a[o].currentStyle.k&&r.push(a[o]);t.removeRule(0)}return r}}()),document.dyQuerySelector||(document.dyQuerySelector="function"==typeof document.querySelector?function(){return document.querySelector.apply(document,arguments)}:function(e){return document.dyQuerySelectorAll(e)[0]||null}),DYO.SessionUtils=function(){var e={},t=DYO;return e.NEW_SESSION_COOKIE="_dy_sess",e.NEW_SESSION_ENDTIME_COOKIE="_dy_sess_end",e.accurateNow=function(){var e=parseInt(t.StorageUtils.get("_dy_toffset",["cookieStorage","localStorage"])),n=(new Date).valueOf();return isNaN(e)||(n+=1e3*e),new Date(n)},e.NEXT="next",e.isKnownToBeNewSessionSection=function(){return window.DY&&DY.session&&DY.isNewStyleSession||null!==t.StorageUtils.get(e.NEW_SESSION_COOKIE,["localStorage"])},e.getNewSessionId=function(){var n=window.DY&&DY.isNewStyleSession&&DY.session;return!n&&parseInt(t.StorageUtils.get(e.NEW_SESSION_ENDTIME_COOKIE,["localStorage"]))>e.accurateNow().valueOf()?n=t.StorageUtils.get(e.NEW_SESSION_COOKIE,["localStorage"]):n||(n=e.NEXT),n||null},e.onNewSession=function(e){var t=!1;DY.API("sub",{on:"dy-int-new-session",callback:function(){t||(t=!0,e(DY.session))}})},e}(),DYO.StorageUtils=function(e){function t(e,t){try{for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}catch(r){return!1}}function n(t){return t!==e&&null!==t}function r(){try{var e=document.domain.split(".");return e.length<=2||/^([0-9]+\.){3}[0-9]+$/.test(document.domain)?document.domain:/[-\w]+\.(?:[-\w]+\.xn--[-\w]+|[-\w]{3,}|[-\w]+\.[-\w]{2})$/i.exec(document.domain)[0]}catch(t){return document.domain}}function i(){return null==h&&(h="undefined"!=typeof DY&&"undefined"!=typeof DY.sst&&DY.sst?!1:!0),h}function o(e,r,i){if(!n(r))return null;"string"==typeof r&&(r=[r]),(l||!u("localStorage"))&&(t(r,"cookieStorage")||t(r,"memoryStorage")||r.push("cookieStorage"));for(var o=0;o<r.length;o++){var a=p[r[o]].getItem(e,i);if(n(a))return a}return null}function a(e,r,i,o){if(n(i)){"string"==typeof i&&(i=[i]),(l||!u("localStorage"))&&(t(i,"cookieStorage")||t(i,"memoryStorage")||i.push("cookieStorage"));for(var a=0;a<i.length;a++)p[i[a]].setItem(e,r,o)}}function s(e,r,i){if(!n(r))return null;"string"==typeof r&&(r=[r]),(l||!u("localStorage"))&&(t(r,"cookieStorage")||t(r,"memoryStorage")||r.push("cookieStorage"));for(var o=0;o<r.length;o++)p[r[o]].removeItem(e,i)}function u(e){return f[e]}function c(e){l=e}var l=!1,d=30,p={},f={},m=window._dy_memStore=window._dy_memStore||{},g=function(){function e(){}return{getItem:e,setItem:e,removeItem:e}}(),h=null;return p.localStorage=function(){if(!i())return f.localStorage=!1,g;try{return window.localStorage.setItem("dy_______test","1"),window.localStorage.getItem("dy_______test"),window.localStorage.removeItem("dy_______test"),f.localStorage=!0,window.localStorage}catch(e){return f.localStorage=!1,g}}(),p.sessionStorage=function(){if(!i())return f.sessionStorage=!1,g;try{return window.sessionStorage.setItem("dy_______test","1"),window.sessionStorage.getItem("dy_______test"),window.sessionStorage.removeItem("dy_______test"),f.sessionStorage=!0,window.sessionStorage}catch(e){return f.sessionStorage=!1,g}}(),p.memoryStorage=function(){function e(e){return m[e]}function t(e,t){m[e]=t}function n(e){delete m[e]}return f.memoryStorage=!0,{getItem:function(t){return e(t)},setItem:function(e,n){return t(e,n)},removeItem:function(e){return n(e)}}}(),p.cookieStorage=function(){function e(){try{var e=navigator.cookieEnabled?!0:!1;return"undefined"!=typeof navigator.cookieEnabled||e||(document.cookie="testcookie",e=-1!=document.cookie.indexOf("testcookie")?!0:!1),e}catch(t){return!1}}function t(e,t){var r=document.cookie.match(o(e));if(n(r)){if(!t)return r[1];try{return decodeURIComponent(r[1])}catch(i){return r[1]}}}function r(e,t,n,r,i){var o;if(n){var s=new Date;s.setDate(s.getDate()+n),o=s.toGMTString()}else o="0";document.cookie=a(e,t,o,r,i)}function i(e,r,i){n(t(e))&&(document.cookie=a(e,"","Thu, 01-Jan-1970 00:00:01 GMT",r,i))}if(!e())return f.cookieStorage=!1,g;f.cookieStorage=!0;var o=function(e){return new RegExp("(?:^|;)\\s?"+e+"=(.*?)(?:;|$)","i")},a=function(e,t,n,r,i){return e+"="+encodeURIComponent(t)+(n?";expires="+n:"")+(r?";path="+r:"")+(i?";domain="+i:";domain="+document.domain)};return{getItem:function(e,r){return r=r||{},n(r.unescape)||(r.unescape=!0),t(e,r.unescape)},setItem:function(e,t,n){n=n||{};var o=0===n.expire?0:n.expire||d,a=n.path||"/",s=n.domain||document.domain;try{n.domain&&n.domain!==document.domain&&i(e,a,document.domain)}catch(u){}return r(e,t,o,a,s)},removeItem:function(e,t){t=t||{};var n=t.path||"/",r=t.domain||document.domain;try{t.domain&&t.domain!==document.domain&&i(e,n,document.domain)}catch(o){}return i(e,n,r)}}}(),{get:o,set:a,remove:s,enabled:u,getSecondLevelDomain:r,forceCookies:c}}(),DYO.StringUtils=function(){function e(e){for(var t=e.split("."),n={},r=0;r<t.length;r++){var i=t[r].split("@");n[i[0]]="nu"==i[1]?null:i[1].replace(/\%1\%/g,"@").replace(/\%0\%/g,".")}return n}function t(e){var t=[];for(var n in e)t.push(n+"@"+(null==e[n]?"nu":e[n].toString().replace(/\./g,"%0%").replace(/\@/g,"%1%")));return t.join(".")}function n(e){return!isNaN(parseFloat(e))&&isFinite(e)}function r(e,t){t||(t=location.href.toLowerCase()),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)","i"),r=n.exec(t);return null===r?null:r[1]}function i(e){return e.replace(/^(.+?:)?\/\//,"")}return{pkv:e,skv:t,isN:n,getUrlParam:r,removeHttp:i}}(),function(){function e(){this.appendedTopContainer=!1,this.appendedBottomContainer=!1}function t(e){var t=this;this.options=e,this.boundRemove=function(){t.remove()},this.el=document.createElement("div"),this.el.className="dy_full_width_notification_instance",e.showClose&&this.addCloseButton(),this.isTop="top"===e.position,0===e.delay?this.activate():setTimeout(function(){t.activate()},e.delay),-1!==e.closeAfter&&setTimeout(function(){t.remove()},e.closeAfter+e.delay),this.options.bodyClickClose&&n(document.body,"click",this.boundRemove)}function n(e,t,n){e.attachEvent?e.attachEvent(t,n):e.addEventListener(t,n)}function r(e,t,n){e.attachEvent?e.detachEvent(t,n):e.removeEventListener(t,n)}t.prototype.activate=function(){this.el.className+=" dy_notification_instance_active",this.el.className+=this.isTop?" dy_notification_from_top":" dy_notification_from_bottom"},t.prototype.remove=function(){this.el.className+=this.isTop?" dy_notification_instance_will_exit_top":" dy_notification_instance_will_exit_bottom",this.options.smartTagId&&DYO.csc.markEvent("closeAction_"+this.options.smartTagId);var e=this;setTimeout(function(){e.el.parentNode.removeChild(e.el)},230),this.options.bodyClickClose&&r(document.body,"click",this.boundRemove)},t.prototype.addCloseButton=function(){var e=document.createElement("div");e.className="dy-full-width-notifications-close";var t=this;t.el.appendChild(e),n(e,"click",function(e){return t.boundRemove(),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1})},e.prototype.appendBottomContainer=function(){if(!this.appendedBottomContainer){var e=this,t=document.createElement("div");t.className="dy_full_width_notifications_container dy_bottom_notification",this.bottomContainer=t,DYO.waitForElement("body",function(){document.body.appendChild(e.bottomContainer)}),this.appendedBottomContainer=!0}},e.prototype.appendTopContainer=function(){if(!this.appendedTopContainer){var e=document.createElement("div");e.className="dy_full_width_notifications_container dy_top_notification",this.topContainer=e;var t=this;DYO.waitForElement("body",function(){document.body.appendChild(t.topContainer)}),this.appendedTopContainer=!0}},e.prototype.addInstance=function(e,t){"top"===t.position?(this.appendTopContainer(),this.topContainer.appendChild(e.el)):(this.appendBottomContainer(),this.bottomContainer.appendChild(e.el))},e.prototype.create=function(e,n){n=n||{},n.delay=n.delay||0,n.closeAfter=n.closeAfter||-1,n.position=n.position||"top",n.showClose=n.showClose||!1,n.bodyClickClose=n.bodyClickClose||!1;var r=new t(n);return r.el.appendChild(e),this.addInstance(r,n),r},DYO.FullWidthNotifications=new e}(),function(){function e(e,t){t.parentNode.insertBefore(e,t.nextSibling)}function t(e,t){t.parentNode.insertBefore(e,t)}function n(){var e=1e6*Math.random()|0,t=Date.now();return"dyId"+e.toString(16)+t.toString(16)}function r(e){try{var t=window.location&&window.location.search||"",n=new RegExp("[?&]_dy_skip_embed="+e+"(&|$|#)","i");if(n.test(t))return!0}catch(r){return!1}return!1}var i=DYO.CoreUtils.curry,o=i(DYO.CoreUtils.map),a=i(DYO.CoreUtils.filter),s=i(DYO.CoreUtils.forEach),u=DYO.CoreUtils.composeOn;DYO.embedTag=function(r){function i(i){clearTimeout(o);try{var a=i[0],s=document.createElement(f.type||"div");f["class"]&&(s.className=f["class"]),s.id=n(),"before"===d?t(s,a):"after"===d?e(s,a):(s=a,s.id||(s.id=n())),s.setAttribute("data-dy-embedded-object","true"),DYO.smartObject(r,{target:s.id,inline:!m})}catch(u){DY.API("internal_error",{name:"AutoEmbedTag",error:u})}}var o,a=DYO.otags[r],s=a.embedOptions,u=s.selector,c=s.repeats||100,l=s.delay||50,d=s.replaceOption,p=1,f=s.container||{type:"div","class":"dy-auto-embedded-object"},m=s.inIframe||!1;DYO.waitForElement(u,i,p,l,c),-1!==c&&(o=setTimeout(function(){DY.API("internal_error",{name:"Auto Embed Place not found for tag "+r,clientOnly:!0})},c*l+100))},DYO.autoEmbedSmarts=function(e){try{e=e||{};var t=u(DYO.CoreUtils.keys(DYO.otags),[o(function(e){return{key:e,tag:DYO.otags[e],embed:DYO.otags[e].embedOptions}}),a(function(e){return!r(e.key)}),a(function(e){return"tag"===e.tag.subType}),a(function(e){return e.embed&&e.embed.enabled}),o(function(e){var t=DYO.isInAudience({rule:e.embed.conditions,session:!0});return t.then(function(t){return t?e.key:null})})]);DYO.Q.all(t).then(function(t){u(t,[a(DYO.CoreUtils.isNotNull),s(function(t){DYO.embedTag(t,e)})])})["catch"](function(e){DY.API("internal_error",{name:"AutoEmbedCycleError",error:e})})}catch(n){DY.API("internal_error",{name:"AutoEmbedCycleError",error:n})}}}();var DYO=DYO||{};DYO.Chooser=function(){function e(e){return DYO.staticAlloc?DYO.staticAlloc[e]:8766949===DYO.section||8766958===DYO.section}function t(){var e,t=DYO.Long.fromString(DY.dyid||DYO.StorageUtils.get("_dyid",["localStorage","cookieStorage"])),n=t.getHighBitsUnsigned(),r=t.getLowBitsUnsigned();return e=n?n>>>20:4095&r,e/Math.pow(2,12)}function n(n){return e(n)&&DY&&(DY.dyid||DYO.StorageUtils.get("_dyid",["localStorage","cookieStorage"]))?t():Math.random()}function r(e,t){for(var n=l(e),r=[],i=Object.keys(e).length,o=0;t>o&&i>o;o++)r.push(d(n));return r}function i(e,t,n){this.value=e.slice(0),this.weight=t,this.id=n}function o(e,t,n,r,a,s){if(!(t.length-n<r)){if(!(r>0)){var u=new i(a,s,e.length);return void e.push(u)}for(var c=n;c<t.length+1-r;++c)a.push(t[c]),o(e,t,c+1,r-1,a,s*t[c].weight),a.pop(t[c])}}function a(e,t){var r=Math.floor(n(t)*e.length),i={opt:e[r].id,loc:r};return i}function s(e,t,n){for(var r=[],i=0;t>i&&e.length>0;i++){var o=a(e,n);null!=o&&null!=o.loc&&(r.push(e[o.loc]),e.splice(o.loc,1))}return r}function u(e,t){for(var r=0,i=e[r].id,o=0,s=[],u=0;u<e.length;u++)s.push(e[u].weight+o),o+=e[u].weight;if(0>=o)return a(e,t);for(var c=Math.floor(n(t)*o+1),u=0;u<s.length;u++)if(c<s[u]){i=e[u].id,r=u;break}return{opt:i,loc:r}}var c=function(e,t,n){var r=new Object;return r.value=e,r.weight=t,r.totalWeight=n,r},l=function(e){var t,n=[void 0];for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],t=null==i.weight?0:i.weight;n.push(c(i,t,t))}for(var o=n.length-1;o>1;o--)n[o>>1].totalWeight+=n[o].totalWeight;return n},d=function(e){for(var t=e[1].totalWeight*Math.random(),n=1;t>e[n].weight;)t-=e[n].weight,n<<=1,t>e[n].totalWeight&&(t-=e[n].totalWeight,n+=1);var r=e[n].weight,i=e[n].value;for(e[n].weight=0;0!==n;)e[n].totalWeight-=r,n>>=1;return i},p=function(e,t){var n=[4e4,4e4,256,64,32,24,20,18,18],i=t<e.length-t?t:e.length-t;if(i>=n.length||e.length>n[i])return r(e,t);var a=[],s=[];if(o(a,e,0,t,s,1),a.length>0){var c=u(a);if(c.loc>=0&&c.loc<a.length)return a[c.loc].value}return[]},f=function(e,t){for(var n=[],i=[],o=0;o<e.length;o++)null==e[o].weight||e[o].weight<=0?n.push(e[o]):i.push(e[o]);var a=[];if(n.length>0&&i.length<t){var u=t-i.length;a=s(n,u)}var c=t-a.length,l=p(i,c);return null==l?[]:(l=r(l,l.length),l.length<t&&a.length>0&&(l=l.concat(a)),l)};return{wRandomChoose:f,equalDecisions:s,weightedDecision:u,shouldUseStaticAllocation:e,biasRandom:n,wRandomOrderedNoReplacement:r,wRandomOrderlessNoReplacement:p}}();var DYO=DYO||{};DYO.Props=function(){function e(e,t){return e.length>2&&t.length>2&&e[2]==t[2]||e.length>2&&e[2]==J||t.length>2&&t[2]==J}function t(e,t){return e.length>=5&&t.length>=5&&e[4]==t[4]}function n(e,t,n){return e.length>t.sessionIdx&&e[t.sessionIdx]==n}function r(e,t){return e.length>t.sessionIdx&&e.length>t.timestampIdx&&e[t.sessionIdx]===DYO.SessionUtils.NEXT}function i(e,t){return r(e,t)&&DYO.StringUtils.isN(e[t.timestampIdx])&&parseFloat(e[t.timestampIdx])+1e3*X>=(new Date).getTime()}function o(e,t,r){return r!==DYO.SessionUtils.NEXT&&n(e,t,r)||r===DYO.SessionUtils.NEXT&&i(e,t)}function a(e,t){var n="undefined"!=typeof e.calcExpirationPeriodMs&&DYO.StringUtils.isN(e.calcExpirationPeriodMs)&&e.calcExpirationPeriodMs>=0;if(n){var r=(new Date).getTime();if(t.length<4||!DYO.StringUtils.isN(t[3])||parseFloat(t[3])+e.calcExpirationPeriodMs<r)return!1}return!0}function s(e,t){return e.version==t[0]}function u(e,t){return e.length>1&&t.length>1&&e[1]==t[1]}function c(e){var t="undefined"!=typeof e.isIgnoreReweightInc&&e.isIgnoreReweightInc;return t}function l(e){var t="undefined"!=typeof e&&null!=e&&"undefined"!=typeof e.stickiness&&e.stickiness==F;return t}function d(e,t,n,r){var i=e.version,o=(new Date).getTime(),a=i+DYO.ExpUtils.verSep+t+DYO.ExpUtils.verSep+n+DYO.ExpUtils.verSep+o+DYO.ExpUtils.verSep+DYO.Seqs.loadSeq+DYO.ExpUtils.verSep+DYO.Seqs.sesLoadSeq+DYO.ExpUtils.verSep+r+DYO.ExpUtils.verSep+f([DYO.ExpUtils.SUB_MECHANISM_NA]);return a}function p(e){var t=null==e?[]:e.split(DYO.ExpUtils.verSep);return t.length<7?null:t[6]}function f(e){var t="undefined"==typeof e||null==e?[]:e;return t.join($)}function m(e){if("undefined"!=typeof e&&null!=e&&"undefined"==typeof e.attributionMethod&&"undefined"!=typeof e.isExplicitlyAttributed&&e.isExplicitlyAttributed)return DYO.ExpUtils.ATTRIBUTION_AFTER_C;var t="undefined"==typeof e||null==e||"undefined"==typeof e.attributionMethod||e.attributionMethod!=DYO.ExpUtils.ATTRIBUTION_AFTER_RI&&e.attributionMethod!=DYO.ExpUtils.ATTRIBUTION_AFTER_C&&e.attributionMethod!=DYO.ExpUtils.EXPLICIT_ATTRIBUTION?DYO.ExpUtils.IMPLICIT_ATTRIBUTION:e.attributionMethod;return t}function g(e){var t="undefined"!=typeof e.attributionTtlS&&DYO.StringUtils.isN(e.attributionTtlS)&&(e.attributionTtlS>=0||e.attributionTtlS==z);return t}function h(e,t,n){try{return s(e,t)&&(a(e,t)||null!=n&&o(n,K,DYO.Seqs.sesLoadSeq))}catch(r){return!1}}function y(e,t,n){try{if(!s(e,t))return!1;if(!g(e))return!0;if(e.attributionTtlS==z)return DYO.Seqs.sesLoadSeq===DYO.SessionUtils.NEXT?i(n,K,DYO.Seqs.sesLoadSeq)||n[0]===DYO.SessionUtils.NEXT:n[0]==DYO.Seqs.sesLoadSeq;var r=(new Date).getTime();return n.length<2||!DYO.StringUtils.isN(n[1])||parseFloat(n[1])+1e3*e.attributionTtlS<r?!1:!0}catch(o){return!1}}function v(e,t,n,r){try{return s(e,t)&&(a(e,t)||o(r,K,n[Q.sessionIdx]))&&u(t,n)&&(!l(e)&&!S(e)||o(t,Q,n[Q.sessionIdx]))}catch(i){return!0}}function D(n,r,i,a){try{return v(n,r,i,a)&&(!l(n)||t(r,i))&&(c(n)||l(n)||S(n)||o(a,K,i[Q.sessionIdx])||e(r,i))}catch(s){return!1}}function O(e){try{if(DYO.Seqs.sesLoadSeq!==DYO.SessionUtils.NEXT){if(e.length>1){var t=e[1].split(DYO.ExpUtils.verSep);r(t,Q)&&(t[Q.sessionIdx]=DYO.Seqs.sesLoadSeq,e[1]=t.join(DYO.ExpUtils.verSep))}if(e.length>4){var n=e[4].split(DYO.ExpUtils.verSep);r(n,K)&&(n[K.sessionIdx]=DYO.Seqs.sesLoadSeq,e[4]=n.join(DYO.ExpUtils.verSep))}}}catch(i){}return e}function w(e,t,n,r){if("undefined"==typeof t.controlGroup||null==t.controlGroup||"undefined"==typeof t.controlGroup.share||"undefined"==typeof t.controlGroup.method||!DYO.StringUtils.isN(t.controlGroup.share))return!1;var i=null==n||!v(t,n.split(DYO.ExpUtils.verSep),r.split(DYO.ExpUtils.verSep)),o=!1;if(i){var a=parseFloat(t.controlGroup.share);Math.floor(100*DYO.Chooser.biasRandom(e))<a&&(o=!0)}else o=Y(n);return o}function Y(e){return p(e)==B}function S(e){var t="undefined"!=typeof e&&null!=e&&"undefined"!=typeof e.stickiness&&e.stickiness==L;return t}function x(e){var t=m(e);return t==DYO.ExpUtils.ATTRIBUTION_AFTER_RI||t==DYO.ExpUtils.ATTRIBUTION_AFTER_C||t==DYO.ExpUtils.EXPLICIT_ATTRIBUTION}function I(e){var t="undefined"!=typeof e&&null!=e&&"undefined"!=typeof e.isVarRimpOnGet&&e.isVarRimpOnGet;return t}function _(e){return g(e)||x(e)?DYO.ExpUtils.SELECTION:DYO.ExpUtils.SELECTION_AND_ATTRIBUTION}function b(e){var t=m(e);return g(e)&&t==DYO.ExpUtils.IMPLICIT_ATTRIBUTION}function C(e){var t=m(e),n=DYO.Seqs.sesLoadSeq;return{method:t,sesLoadSeq:n}}function E(){var e=(new Date).getTime(),t=""+DYO.Seqs.sesLoadSeq+DYO.ExpUtils.verSep+e;return t}function P(e,t){return e.versionHash==t}function T(e){return null!=e&&"undefined"!=typeof e.weightMechanism?e.weightMechanism:DYO.Props.REWEIGHT_MECHANISM}function N(e){return null!=e&&"undefined"!=typeof e.weightSubMechanism?e.weightSubMechanism:null}function A(e,t,n){var r=e.split(DYO.ExpUtils.verSep);return r[6]=t,r[7]=f(n),r.join(DYO.ExpUtils.verSep)}function U(e){return d(e,V,null==e.reweightId?0:e.reweightId,q)}function k(e,t){return d(e,t,null==e.reweightId?0:e.reweightId,q)}function M(e){return d(e,V,J,q)}function j(e){return e.split(DYO.ExpUtils.verSep)[0]}function R(e,t){var n=null;if(null==t)n=M(e);else{"number"==typeof t&&(t=""+t);var r=t.split(DYO.ExpUtils.verSep);r.length<=1?(n=M(e),DYO.log("setting dont-care-weight due to version-data being without reweight-id data")):2==r.length?(n=k(e,r[1]),DYO.log("setting dont-care-weight due to version-data being without reweight-id data")):3==r.length?n=d(e,r[1],r[2],q):r.length<=7?(n=t,4==r.length&&(n=n+DYO.ExpUtils.verSep+DYO.Seqs.loadSeq),r.length<=5&&(n=n+DYO.ExpUtils.verSep+DYO.Seqs.sesLoadSeq),r.length<=6&&(n=n+DYO.ExpUtils.verSep+q),r.length<=7&&(n=n+DYO.ExpUtils.verSep+f([DYO.ExpUtils.SUB_MECHANISM_NA]))):n=t}return n}var V="",L="1",F="2",B="0",q="1",W="2",G="3",H="0",Z="1",$=".",J="__dontcareweight",z=-1,X=1800,Q={sessionIdx:5,timestampIdx:3},K={sessionIdx:0,timestampIdx:1};return{DONT_CARE_WEIGHT:J,CONTROL_GROUP_MECHANISM:B,MANUAL_MECHANISM:q,REWEIGHT_MECHANISM:W,PREDICT_MECHANISM:G,isStoredVersionValidDuringCleanup:h,isStoredVersionValidForChoose:D,isStoredAttributionValidDuringCleanup:y,isExplicitlyAttributed:x,isVarRimpOnGet:I,getAttributionMethodForGet:_,verifyClientIdsOfServerAndClientSynced:P,expProgVersionData:U,expContVersionData:k,expManualSetVersionData:M,getVersionId:j,expCompleteVersionData:R,resetVersionDataMechanism:A,getMechanismRepresentingWeights:T,getSubMechanismRepresentingWeights:N,isControlGroupChoose:w,isCurrentlyInControlGroup:Y,isAttributionStoredOnGet:b,getCurrentAttributionProps:C,generateSelectionDataPart:E,correctFreshSessionPlaceholder:O,CGM_PRESET_VARS:H,CGM_RANDOM:Z,SESSION_SCOPE_ATTRIBUTION_TTL:z,VERSION_DATA_IDX:Q,MODE_DATA_IDX:K,isStillFreshNextSession:i,subMechanismsArrToStr:f,getVersionDataMechanism:p,isSameReweight:e}}();var DYO=DYO||{};DYO.Seqs=function(){function e(e){try{r=1+Math.floor(99999*Math.random());var t=!1;try{if(DYO.SessionUtils.isKnownToBeNewSessionSection())if(DYO.StorageUtils.enabled("cookieStorage")){var s=DYO.StorageUtils.get(o,["cookieStorage"]);"undefined"==typeof s||null===s||""==s?(DYO.SessionUtils.getNewSessionId()!==DYO.SessionUtils.NEXT&&null!=DYO.SessionUtils.getNewSessionId()&&DYO.StorageUtils.set(o,DYO.SessionUtils.getNewSessionId(),["cookieStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain(),expire:a}),t=!1):DYO.SessionUtils.getNewSessionId()===DYO.SessionUtils.NEXT?(t=!0,DYO.StorageUtils.set(o,"x",["cookieStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain(),expire:a})):DYO.SessionUtils.getNewSessionId()==s?t=!1:(t=!0,DYO.StorageUtils.set(o,"x",["cookieStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain(),expire:a}))}else t=!0;else t=!1}catch(u){}if(t)i=null==DYO.SessionUtils.getNewSessionId()?0:DYO.SessionUtils.getNewSessionId();else{i=r;var c=DYO.StorageUtils.get(n,["cookieStorage","localStorage"]),l=(new Date).getTime();if(null!=c){var d=c.split(DYO.ExpUtils.verSep);d.length>=2&&DYO.StringUtils.isN(d[1])&&parseFloat(d[1])+e>=l&&(i=d[0])}DYO.StorageUtils.set(n,""+i+DYO.ExpUtils.verSep+l,["cookieStorage","localStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain()})}}catch(p){DYO.log("error setting up load sequences")}finally{try{DYO.Seqs.loadSeq=r,DYO.Seqs.sesLoadSeq=i}catch(u){}}}function t(){return DYO.Seqs.sesLoadSeq===DYO.SessionUtils.NEXT&&null!=DYO.SessionUtils.getNewSessionId()?(DYO.Seqs.sesLoadSeq=DYO.SessionUtils.getNewSessionId(),!0):!1}var n="_dy_ses_load_seq",r=0,i=0,o="_dy_fnsmc_",a=365;return{loadSequences:e,loadAfterDy:t,loadSeq:r,sesLoadSeq:i}}(),DYO.ServeTagUtils=function(){function e(e){for(var e in DYO.otags)for(var t=DYO.otags[e],n=0;n<t.rules.length;n++)if(1!=t.rules[n].smartObject.objectType){var r=t.rules[n].smartObject.variations;for(var i in r)if(("image"==r[i].renderType||"flash"==r[i].renderType)&&"undefined"!=typeof r[i].imageLink&&null!=r[i].imageLink&&""!=r[i].imageLink){for(var o,a=t.rules[n].smartObject.experiment,s=0;s<DYO.oexps[a].variations.length;s++)if(DYO.oexps[a].variations[s].name==i){o=DYO.oexps[a].variations[s].id;break}r[i].doNotMarkUnit=!0,r[i].imageLink="http://px.dynamicyield.com/var?t=c&e="+a+"&va=%5B"+o+"%5D&_="+Math.random()+"&red="+encodeURIComponent(r[i].imageLink)
}}}return{updateImageVariations:e}}(),DYO.SmartsPreWork=function(){function e(e){var t=u[e];if(!t.executed){var n=t.audParts.pageEventAudRules;if("undefined"!=typeof n)for(var r=0;r<n.length;r++)if("undefined"!=typeof n[r])return;if(DYO.otags[e].hasOwnProperty("ttw")&&DYO.otags[e].ttw>0||t.shouldWaitForDyId){var i=t.depConds;if("undefined"!=typeof i)for(var o=0;o<i.length;o++)if("undefined"!=typeof i[o])return}t.executed=!0,t.callback(t.audParts.cleanAudRules)}}function t(t,n,r,i){var o=a(t,n),s="undefined"!=typeof t.rules&&t.rules.length>0&&"undefined"!=typeof t.rules[0].smartObject?t.rules[0].smartObject.experiment:null,c=s&&DYO.Chooser.shouldUseStaticAllocation(s)&&!DYO.ExpUtils.isInternalAction(s)&&!DYO.StorageUtils.get("_dyid",["localStorage","cookieStorage"]);-1===o.indexOf("stScript")&&c&&o.push("stScript"),u[n]={callback:i,executed:!1,audParts:r,depConds:o,shouldWaitForDyId:c};for(var l=0;l<u[n].depConds.length;l++)!function(){function t(){delete u[n].depConds[r],e(n)}var r=l;"undefined"!=typeof u[n].depConds[r]&&(DYO.pubSub.sub("dy-dep-cond-done-smartTag-"+n,t),DYO.pubSub.sub("dy-dep-cond-max-timeouts",t))}();e(n)}function n(n,r,o){("object"!=typeof n||"undefined"==typeof r)&&o();var a=s(n.pageEventDisjs),u=a.pageEventAudRules;t(n,r,a,o);for(var c=0;c<u.length;c++)for(var l=0;u[c]&&l<u[c].conds.length;l++)!function(){function t(){delete u[o],e(r)}function n(){var e=u[o];t(),u[o]=e}var o=c,a=u[c].conds[l];switch(a.selectMethod){case"LeavePage":DY.API("sub",{on:"dy-mouse-leave-doc",callback:n});break;case"SiteEvent":DY.API("sub",{on:"dy-event-"+a.selectParameter,callback:t});break;case"TimeOnPage":if(0==a.selectParameter)t();else{var s=setTimeout(t,1e3*parseFloat(a.selectParameter));DYO.isMobile&&DY.API("page_handlers",s)}break;case"WaitForElement":DYO.waitForElement(a.selectParameter,t);break;case"WaitForExternalComponent":i(a.selectParameter.split(","),t);break;case"ClickOnElement":case"HoverOnElement":var d;switch(a.selectMethod){case"ClickOnElement":d="mousedown";break;case"HoverOnElement":d="mouseenter"}DY.API("callback",function(){$dy("body").on(d,a.selectParameter,n)})}}();e(r)}function r(e,t,n){"undefined"==typeof n&&(n=20);var i=e.split(".");i.unshift(window),o.apply(void 0,i)?t():setTimeout(function(){r(e,t,n)},n)}function i(e,t,n){for(var i=0,o=0;o<e.length;o++)r(e[o],function(){i++,e.length===i&&t()},n)}function o(e){for(var t=Array.prototype.slice.call(arguments,1),n=0;n<t.length;n++){if(!e||!e.hasOwnProperty(t[n]))return!1;e=e[t[n]]}return!0}function a(e,t){var n=[];if(DYO.waitersTimeouts._dy_max_timeout||DYO.waitersTimeouts[t])return n;var r=DYO.Conditions.webConditionsWithDependencies,i=null===DYO.StorageUtils.get("_dy_device",["localStorage","cookieStorage"]);if("undefined"!=typeof e.rules)for(var o=0;o<e.rules.length;o++)if("undefined"!=typeof e.rules[o].ruleDisjs)for(var a=0;a<e.rules[o].ruleDisjs.length;a++){var s,u=e.rules[o].ruleDisjs[a];s="undefined"!=typeof u&&"undefined"!=typeof u.condType&&"_"!==u.condType[0]?{isPerSession:!1}:r.stScript[u.condType],"undefined"!=typeof s&&(!s.isPerSession||s.isPerSession&&i)&&n.push("stScript")}return n}function s(e){for(var t=[],n=[],r=0;r<e.length;r++)"_PageEvent"===e[r].condType?t.push(e[r]):n.push(e[r]);return{pageEventAudRules:t,cleanAudRules:n}}var u={};return{executeWithPageEvents:n,waitForDependencies:t}}(),DYO.waitForElement=function(e,t,n,r,i){function o(){var a=document.dyQuerySelectorAll(e);a.length>=n?t(a):0!==i--&&setTimeout(o,r)}"undefined"==typeof n&&(n=1),"undefined"==typeof r&&(r=100),"undefined"==typeof i&&(i=-1),o()},DYO.Conditions=function(){function e(e,t){"string"==typeof t&&(t=[t]);var n="and"===e.relation.toString().toLowerCase();if(n&&t.length!==e.values.length)return!1;for(var r=0;r<t.length;r++)if(s.match("match_item_with_array")(e.method,e.values,t[r].toString().toLowerCase())!==n)return!n;return n}function t(e){for(var t={},n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];t[i.toLowerCase()]=e[i]}return t}function n(n,r){for(var i="and"===r.relation.toString().toLowerCase(),o=0;o<r.conditions.length;o++){var a=r.conditions[o],u=a.values,c=t(n)[a.field]||"";if(!("undefined"!=typeof a.field&&"undefined"!=typeof a.method&&u instanceof Array&&c))return!1;var l=!1;if("undefined"!=typeof a.multi?l=e(a,c):(c=c.toString().toLowerCase(),u=(u[0]||"").toString().toLowerCase(),l=s.match(a.method)(c,u)),l&&!i)return!0;if(!l&&i)return!1}return i}function r(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function i(e){o=r(o,e)}var o={},a={createConditionsParams:function(e,t,n,r){var i={fsParamPrefix:null,parameter:null,selectParameter:null,selectParameter2:null,selectMethod:null,context:null,eventName:null,includeUrlParams:null,jsCode:null,hitCountMethod:null,hitCount:null,timeZoneOffset:null,weatherMethod:null,weatherParameter:null,weatherCondDaysMethod:null,audienceItem:null,out:null};return i.fsParamPrefix="dy_fs_page",i.newFsParamPrefix="dy_nfs_page_"+(window.DY&&DY.scsec||""),i.firstSessionCookie="_dynfs_"+(window.DY&&DY.scsec||""),i.parameter=e.parameter,i.selectParameter=e.selectParameter,"string"==typeof i.selectParameter&&(i.selectParameter=i.selectParameter.toLowerCase()),i.selectParameter2=e.selectParameter2,"string"==typeof i.selectParameter2&&(i.selectParameter2=i.selectParameter2.toLowerCase()),i.selectMethod=e.selectMethod,i.context=r,i.includeUrlParams=e.includeUrlParams||"undefined"==typeof e.includeUrlParams,i.jsCode=e.jsCode,i.hitCountMethod=e.hitCountMethod,i.hitCount=e.hitCount,i.timeZoneOffset=e.timeZoneOffset,i.weatherMethod=e.weatherMethod,i.weatherParameter=e.weatherParameter,i.weatherCondDaysMethod=e.weatherCondDaysMethod,i.eventName=e.eventName,i.evaluatorTimeout=e.evaluatorTimeout||4e3,i.out=n,"undefined"!=typeof t&&null!==t&&(i.audienceItem=t,"string"==typeof i.audienceItem.data&&(i.audienceItem.data=i.audienceItem.data.toLowerCase())),i},matchNow:function(e,t,n,r){var i=a.createConditionsParams(t,null,n,r);"Audience"===e&&(e="_Audience");try{return o[e](i)}catch(s){return!1}},match:function(e,t){var n=a.createConditionsParams(t,e);("not_equals"===n.selectMethod||"pair_not_equals"===n.selectMethod)&&(n.selectMethod="equals");try{return o[e.type](n)}catch(r){return!1}}},s={match:function(e){switch(e.toLowerCase()){case"=":case"eq":case"equals":return u.equals;case"not":case"not_equals":return u.not_equals;case"pair_contains":case"contains":return u.contains;case"not_contains":return u.not_contains;case"regexp":return u.regexp;case"pair_equals":return u.equals;case"gt":case">":case"above":case"pair_bigger":return u.greaterThan;case"lt":case"<":case"below":case"pair_smaller":return u.lowerThan;case"gte":case"ge":case">=":case"pair_eq_bigger":return u.greaterEquals;case"lte":case"le":case"<=":case"pair_eq_smaller":return u.lowerEquals;case"exists":return u.exists;case"match_item_with_array":return u.matchItemWithArray;case"match_array_with_array":return u.matchArrayWithArray;default:return function(){return!1}}},multipleMatcher:function(e,t){if("undefined"==typeof t.conditions||"undefined"==typeof t.relation||"undefined"==typeof t.negation||"undefined"==typeof e)return!1;var r=!t.negation,i=n(e,t);return r==i}},u={equals:function(e,t,n){return(n||{}).isMandatory1&&"undefined"==typeof e?!1:(n||{}).floatingPointComparisonErrorMargin?Math.abs(parseFloat(e)-parseFloat(t))<(n||{}).floatingPointComparisonErrorMargin:e==t},not_equals:function(e,t){return e!=t},contains:function(e,t){try{return e=e.toString(),-1!==e.indexOf(t)}catch(n){return!1}},not_contains:function(e,t){try{return e=e.toString(),-1===e.indexOf(t)}catch(n){return!1}},regexp:function(e,t){return new RegExp(t).test(e)},exists:function(e){return e&&"undefined"!=typeof e&&""!==e},greaterThan:function(e,t,n){return parseFloat(e)>parseFloat(t)+((n||{}).floatingPointComparisonErrorMargin||0)},greaterEquals:function(e,t,n){return parseFloat(e)>=parseFloat(t)-((n||{}).floatingPointComparisonErrorMargin||0)},lowerThan:function(e,t,n){return parseFloat(e)<parseFloat(t)-((n||{}).floatingPointComparisonErrorMargin||0)},lowerEquals:function(e,t,n){return parseFloat(e)<=parseFloat(t)+((n||{}).floatingPointComparisonErrorMargin||0)},matchItemWithArray:function(e,t,n){DYJSON.parse(DYJSON.stringify(t))instanceof Array||(t=[t]);for(var r="not_equals"===e||"not_contains"===e,i=0;i<t.length;i++){var o=t[i];if("undefined"!=typeof o){"string"==typeof o&&(o=o.toLowerCase());var a=s.match(e)(o,n);if(r!==a){r=a;break}}}return r},matchArrayWithArray:function(e,t,n){DYJSON.parse(DYJSON.stringify(t))instanceof Array||(t=[t]);for(var r="not_equals"===e||"not_contains"===e,i=0;i<n.length;i++){var o=n[i];if("undefined"!=typeof o){var a=u.matchItemWithArray(e,t,o);if(r!==a){r=a;break}}}return r}},c={stScript:{_Audience:{isPerSession:!1},_Country:{isPerSession:!0},_Continent:{isPerSession:!0},_Region:{isPerSession:!0},_City:{isPerSession:!0},_Weather:{isPerSession:!0},_WeekDay:{isPerSession:!0},_Date:{isPerSession:!0},_TimeOfDay:{isPerSession:!0},_HasCustomUserData:{isPerSession:!1},_DeviceType:{isPerSession:!0},_DeviceBrand:{isPerSession:!0},_TrafficSource:{isPerSession:!0},_ProductPurchased:{isPerSession:!1},_ProductViewed:{isPerSession:!1},_SharedAudience:{isPerSession:!1}}};return{matchNow:a.matchNow,match:a.match,addConditions:i,Matcher:s,webConditionsWithDependencies:c}}(),function(){var e=DYO.Conditions.Matcher;DYO.sharedConditions={_URLParam:function(t){if(t.selectParameter&&t.selectParameter2&&t.selectMethod){var n=DYO.StringUtils.getUrlParam(t.selectParameter,location.href);return n?e.match(t.selectMethod)(n,t.selectParameter2):"not_equals"===t.selectMethod||"Not_exists"===t.selectMethod||"not_contains"===t.selectMethod}return!1},_Random:function(e){return 100*Math.random()<parseFloat(e.selectParameter)},_PageType:function(t){if("undefined"==typeof window.DY)return!1;if("undefined"==typeof window.DY.recommendationContext||"undefined"==typeof window.DY.recommendationContext.type)return"not_equals"===t.selectMethod;if("string"!=typeof t.selectParameter||""===t.selectParameter)return!1;var n=window.DY.recommendationContext.type.toLowerCase();return"post"===n&&(n="product"),e.match(t.selectMethod)(n,t.selectParameter)},_ProductPage:function(t){return"undefined"==typeof window.DY||"undefined"==typeof window.DY.recommendationContext||"undefined"==typeof window.DY.recommendationContext.type||"product"!==window.DY.recommendationContext.type.toLowerCase()?!1:"object"!=typeof window.DY.recommendationContext.data||null===typeof window.DY.recommendationContext.data||"undefined"==typeof window.DY.recommendationContext.data[0]?"not_equals"===t.selectMethod:"string"!=typeof t.selectParameter||""===t.selectParameter?!1:e.match(t.selectMethod)(window.DY.recommendationContext.data[0].toString().toLowerCase(),t.selectParameter)},_CartPage:function(t){return"undefined"==typeof window.DY||"undefined"==typeof window.DY.recommendationContext||"undefined"==typeof window.DY.recommendationContext.type||"cart"!==window.DY.recommendationContext.type.toLowerCase()?!1:"object"!=typeof window.DY.recommendationContext.data||null===typeof window.DY.recommendationContext.data||"undefined"==typeof window.DY.recommendationContext.data[0]?"not_equals"===t.selectMethod||"not_contains"===t.selectMethod:"string"!=typeof t.selectParameter||""===t.selectParameter?!1:e.match("match_item_with_array")(t.selectMethod,window.DY.recommendationContext.data,t.selectParameter)},_CategoryPage:function(t){if("undefined"==typeof window.DY||"undefined"==typeof window.DY.recommendationContext||"undefined"==typeof window.DY.recommendationContext.type||"category"!==window.DY.recommendationContext.type.toLowerCase())return!1;if(null===typeof window.DY.recommendationContext.data||!(window.DY.recommendationContext.data instanceof Array))return"not_equals"===t.selectMethod||"not_contains"===t.selectMethod;var n=t.selectParameter.toString().toLowerCase().split("|");return e.match("match_array_with_array")(t.selectMethod,window.DY.recommendationContext.data,n)},_Continent:function(t){return window.DY.geoCont&&"undefined"!=typeof window.DY.geoCont&&null!==t.selectParameter?e.match(t.selectMethod)(window.DY.geoCont.toLowerCase(),t.selectParameter.toLowerCase(),{isMandatory1:!0}):"not_equals"===t.selectMethod},_Country:function(t){return window.DY.geoCode&&"undefined"!=typeof window.DY.geoCode&&null!==t.selectParameter?e.match(t.selectMethod)(window.DY.geoCode.toLowerCase(),t.selectParameter.toLowerCase(),{isMandatory1:!0}):"not_equals"===t.selectMethod},_Region:function(t){return window.DY.geoRegionCode&&"undefined"!=typeof window.DY.geoRegionCode&&null!==t.selectParameter?e.match(t.selectMethod)(window.DY.geoRegionCode.toLowerCase(),t.selectParameter.toLowerCase(),{isMandatory1:!0}):"not_equals"===t.selectMethod},_City:function(t){return window.DY.geoCity&&"undefined"!=typeof window.DY.geoCity&&null!==t.selectParameter?e.match(t.selectMethod)(window.DY.geoCity.toLowerCase(),t.selectParameter.toLowerCase(),{isMandatory1:!0}):"not_equals"===t.selectMethod},_PageEvent:function(){return!0}}}(),function(){DYO.Conditions.Matcher;DYO.cpConditions={_Audience:function(e){var t=-1!=("."+(window.DY&&window.DY.aud||"")+"."+DYO.Cookies.loadCHCCookies().auds.join(".")+"."+DYO.Cookies.loadSessionCookies().sauds.join(".")+".").indexOf("."+e.parameter+".");switch(e.hitCountMethod){case">=":return t;case"<":return!t;default:return!1}},_SharedAudience:function(e){var t=-1!=("."+(window.DY&&window.DY.shrAud||"")+".").indexOf("."+e.parameter+".");switch(e.hitCountMethod){case">=":return t;case"<":return!t;default:return!1}},_Date:function(e){var t=DYO.accurateNow(),n=0;switch("undefined"!=typeof e.parameter&&1==e.parameter&&(n=60*DYO.accurateNow().getTimezoneOffset()*1e3),e.selectMethod){case"after":return t>=new Date(1e3*parseInt(e.selectParameter)+n);case"before":return t<=new Date(1e3*parseInt(e.selectParameter2)+n);case"between":return t>=new Date(1e3*parseInt(e.selectParameter)+n)&&t<=new Date(1e3*parseInt(e.selectParameter2)+n);default:return!1}},_TimeOfDay:function(e){function t(e){return 60*e.getHours()+e.getMinutes()}var n=t(DYO.accurateNow()),r=0;"undefined"!=typeof e.parameter&&1==e.parameter&&(r=60*new Date(0).getTimezoneOffset()*1e3);var i=t(new Date(1e3*parseInt(e.selectParameter)+r)),o=t(new Date(1e3*parseInt(e.selectParameter2)+r));return o>=n&&n>=i},_Weather:function(e){function t(e,t,n,r){for(var i=0;n>=i;++i){var o=r[i];switch(t){case"equals":if(o.condition===e)return!0;break;case"not_equals":if(o.condition!==e)return!0;break;default:return!1}}return!1}function n(e,t,n,r,i,o){for(var a=0;n>=a;++a){var s=r[a],u=s[i];switch(u=parseFloat("undefined"!=typeof o?u[o]:u),t){case"Above":if(u>e)return!0;break;case"Below":if(e>u)return!0;break;default:return!1}}return!1}if(!(e.selectParameter&&e.selectMethod&&e.weatherMethod&&e.weatherParameter&&e.weatherCondDaysMethod))return!1;var r,i;switch("now"===e.weatherCondDaysMethod?(r=window.DY.currentWeather&&[window.DY.currentWeather],i=0):(r=window.DY.weather,i=parseInt(e.weatherCondDaysMethod.match(/\d+/)[0])),e.selectParameter.toLowerCase()){case"weatherconditions":return t(e.weatherParameter,e.selectMethod,i,r);case"temperature":return n(parseFloat(e.weatherParameter),e.selectMethod,i,r,"temp","max");case"windspeed":return n(parseFloat(e.weatherParameter),e.selectMethod,i,r,"windspeed");case"humidity":return n(parseFloat(e.weatherParameter),e.selectMethod,i,r,"humidity");default:return!1}},_WeekDay:function(e){var t=DYO.accurateNow();return"undefined"!=typeof e.selectParameter&&1==e.selectParameter?t.getDay()===e.parameter:(t.setTime(t.getTime()+60*t.getTimezoneOffset()*1e3+60*e.timeZoneOffset*60*1e3),e.parameter==t.getDay())}}}(),function(){function e(e,t){return t?e:!e}function t(e,t){var r="";if("RightNow"===t.selectMethod)r="5min";else if("InThePast"===t.selectMethod)switch(t.selectParameter){case"hour":r="hourly";break;case"day":r="daily";break;case"week":r="weekly"}return"anywhere"===t.selectParameter2||"undefined"==typeof t.selectParameter2?n.match(t.hitCountMethod)(DY.productInterest[e][r],t.hitCount):n.match(t.hitCountMethod)(DY.productInterest[t.selectParameter2][e][r],t.hitCount)}var n=DYO.Conditions.Matcher,r={_Audience:DYO.cpConditions._Audience,_SharedAudience:DYO.cpConditions._SharedAudience,_Browser:function(e){var t=navigator.userAgent.toLowerCase(),n=function(e){return null!=/msie ([0-9]{1,}[\.0-9]{0,})/.exec(t)?parseInt(RegExp.$1)==e:/trident/.test(t)&&null!=/rv\:([0-9]{1,}[\.0-9]{0,})/.exec(t)?parseInt(RegExp.$1)==e:!1};switch(e.parameter){case 12:return/chrome/.test(t);case 13:return n(6);case 14:return n(7);case 15:return n(8);case 16:return n(9);case 17:return n(10);case 18:return/firefox/.test(t);case 33:return window.opera?!0:!1;case 34:return/safari/.test(t)&&!/chrome/.test(t);case 36:return!/chrome|firefox|safari|msie|trident/.test(t)&&!window.opera;case 39:return n(11);default:return!1}},_City:DYO.sharedConditions._City,_CurrentPage:function(e){var t=DYO.StringUtils.removeHttp(location.href.toLowerCase());if(t=t.replace(/\#.*/,""),!e.includeUrlParams&&(t=t.replace(/\?.*/,""),"regexp"!==e.selectMethod)){var r=DYO.StringUtils.removeHttp(e.selectParameter.toLowerCase()).replace(/\?.*/,"");return n.match(e.selectMethod)(t,r)}return n.match(e.selectMethod)(t,e.selectParameter)},_Continent:DYO.sharedConditions._Continent,_CookieParam:function(e){if(e.selectParameter&&e.selectParameter2&&e.selectMethod){var t=DYO.StorageUtils.get(e.selectParameter,["cookieStorage"]);return t?n.match(e.selectMethod)(t.toLowerCase(),e.selectParameter2):"not_equals"===e.selectMethod||"Not_exists"===e.selectMethod}return!1},_Date:DYO.cpConditions._Date,_Country:DYO.sharedConditions._Country,_DeviceBrand:function(e){return n.match(e.selectMethod)(window.DY.deviceInfo.brand.toLowerCase(),e.selectParameter)},_DeviceType:function(e){return n.match(e.selectMethod)(window.DY.deviceInfo.type.toLowerCase(),e.selectParameter)},_Evaluator:function(e){var t;t=DYO.CoreUtils.safeEval(e.jsCode);var r=DYO.Q.delay(e.evaluatorTimeout).then(function(){return"promise Timeout"});return DYO.Q.any([t,r]).then(function(t){return"promise Timeout"===t?!1:("boolean"==typeof t&&(t=t.toString()),"string"==typeof t&&(t=t.toLowerCase()),n.match(e.selectMethod)(t,e.selectParameter))})},_FirstPageInSession:function(e){var t,r=DYO.StringUtils.removeHttp(location.href.toLowerCase()).replace(/\#.*/,""),i=DYO.SessionUtils.isKnownToBeNewSessionSection();if(i){var o=DYO.SessionUtils.getNewSessionId(),a=DYO.StorageUtils.get(e.newFsParamPrefix,["localStorage"]);null===a||a.split(",")[0]!==o?(DYO.StorageUtils.set(e.newFsParamPrefix,[o,r].join(),["localStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain(),expire:0}),o===DYO.SessionUtils.NEXT&&DYO.SessionUtils.onNewSession(function(t){DYO.StorageUtils.set(e.newFsParamPrefix,[t,r].join(),["localStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain(),expire:0})}),t=r):t=a.split(",").splice(1).join()}else t=DYO.StorageUtils.get(e.fsParamPrefix,["cookieStorage","sessionStorage"]),null===t&&(DYO.StorageUtils.set(e.fsParamPrefix,r,["sessionStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain(),expire:0}),DYO.SessionUtils.onNewSession(function(t){DYO.StorageUtils.set(e.newFsParamPrefix,[t,r].join(),["localStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain(),expire:0})}),t=r);if(!e.includeUrlParams&&"undefined"!=typeof e.includeUrlParams&&(t=t.replace(/\?.*/,""),"regexp"!==e.selectMethod)){var s=DYO.StringUtils.removeHttp(e.selectParameter.toLowerCase()).replace(/\?.*/,"");return n.match(e.selectMethod)(t,s)}return n.match(e.selectMethod)(t,e.selectParameter)},_HasCustomUserData:function(e){return"undefined"!=typeof window.DY.cud&&"undefined"!=typeof window.DY.cud[e.parameter]&&(e.out.cud=window.DY.cud[e.parameter]||!0)},_OSDeviceName:function(t){var n=navigator.userAgent.toLowerCase(),r=navigator.platform.toLowerCase(),i="equals"===t.selectMethod;switch(t.parameter){case 0:return e(/iphone|ipod|blackberry|android|htc|lg|midp|mmp|mobile|nokia|opera mini|palm|pocket|psp|sgh|smartphone|sonyericsson|symbian|treo mini/.test(n)||/silk|ipad|android|kindle/.test(n),i);case 1:return e(/iphone|ipod/.test(n),i);case 2:return e(/silk|ipad|android|kindle/.test(n)&&(!/android/.test(n)||screen.width>1024),i);case 3:return e(/android/.test(n)&&screen.width<=1024,i);case 4:return e(/win/.test(r)||/win/.test(n),i);case 5:return e((/mac/.test(r)||/mac/.test(n))&&!/iphone|ipod|ipad/.test(n),i);case 35:return e(/linux/.test(r)||/linux/.test(n),i);default:return!1}},_PageEvent:DYO.sharedConditions._PageEvent,_ProductViewed:function(e){return t("view",e)},_ProductPurchased:function(e){return t("purchase",e)},_Random:DYO.sharedConditions._Random,_Referrer:function(e){var t=DYO.StringUtils.removeHttp(document.referrer.toLowerCase());if(t=t.replace(/\#.*/,""),!e.includeUrlParams&&"undefined"!=typeof e.includeUrlParams&&(t=t.replace(/\?.*/,""),"regexp"!==e.selectMethod)){var r=DYO.StringUtils.removeHttp(e.selectParameter.toLowerCase()).replace(/\?.*/,"");return n.match(e.selectMethod)(t,r)}return n.match(e.selectMethod)(t,e.selectParameter)},_Region:DYO.sharedConditions._Region,_ScreenSize:function(t){var n=window.innerWidth,r="equals"===t.selectMethod;switch(t.parameter){case 26:return e(n>1366,r);case 27:return e(1366>=n&&n>1024,r);case 28:return e(1024>=n,r);default:return!1}},_PageType:DYO.sharedConditions._PageType,_ProductPage:DYO.sharedConditions._ProductPage,_CartPage:DYO.sharedConditions._CartPage,_CategoryPage:DYO.sharedConditions._CategoryPage,_TimeOfDay:DYO.cpConditions._TimeOfDay,_TimeSince:function(e){var t=DYO.csc.readEvent(e.selectParameter.replace(/\$\{smartTagId\}/gi,e.context.smartTagId)),r=0;switch(e.parameter){case 0:r=t.timeSince/1e3;break;case 1:r=t.sessionsSince;break;default:return!1}return n.match(e.hitCountMethod)(r,e.hitCount)},_URLParam:DYO.sharedConditions._URLParam,_VisitorType:function(e){var t,n=DYO.SessionUtils.isKnownToBeNewSessionSection();if(n){var r=DYO.SessionUtils.getNewSessionId();t=DYO.StorageUtils.get(e.firstSessionCookie,["cookieStorage","localStorage"])===r||null===DYO.StorageUtils.get("_dyid",["cookieStorage","localStorage"])}else t=null!==DYO.StorageUtils.get("_dyfs",["cookieStorage","sessionStorage"])||null===DYO.StorageUtils.get("_dyid",["cookieStorage","localStorage"]);return e.parameter?t:!t},_WeekDay:DYO.cpConditions._WeekDay,_Weather:DYO.cpConditions._Weather,_TrafficSource:function(e){return n.match(e.selectMethod)(window.DY.trafficSource.toLowerCase(),e.selectParameter)}};DYO.Conditions.addConditions(r)}(),DYO.preview=function(){function e(e){return"undefined"==typeof e||null===e||""===e||e==={}||e===[]}function t(){try{var t="true"===DYO.StringUtils.getUrlParam("dyPersistSession"),n=DYO.StorageUtils.enabled("cookieStorage");if(t&&n&&!e(b)&&!e(C)&&!e(E)&&!e(P)){var r=b+";"+C+";"+d(E)+";"+P;DYO.StorageUtils.set(A,r,["cookieStorage"]),window.name="dy_preview"}}catch(i){DY.API("internal_error",{name:"preview persistIfNeeded",error:i})}}function n(e,t){Y(e)||(M.push(e+""),N=t,T?r(e,t):y(e,P,"DYO.preview.parseData"))}function r(n,r){try{t();var i={},o=null;if(!e(DYO.otags[n].rules))for(var a=0;a<DYO.otags[n].rules.length;a++)if(!e(DYO.otags[n].rules[a].smartObject)&&!e(DYO.otags[n].rules[a].smartObject.id)&&DYO.otags[n].rules[a].smartObject.id===C){o=DYO.otags[n].rules[a].smartObject;break}if(e(o))throw D("Preview could not be displayed. The Dynamic Content was not found on the page."),{code:0,tag:n,msg:"no rule matched for Smart Tag on preview"+n};var u=O(n,o.id);try{switch(o.objectType){case j:var l=c(E,o,1)[0],d=DYO.renderSmartObjectVariation(n,o.id,u,l,r);r.returnVar||DYO.CoreUtils.insertElement(d.el,r.target),d.cb();break;case R:for(var p=e(o.autoScrollSpeed)?0:o.autoScrollSpeed,f=e(o.slideCount)||0===o.slideCount?Object.keys(o.variations).length:o.slideCount,m=c(E,o,f),g=[],h=function(){},a=0;a<m.length;a++){var y=DYO.renderSmartObjectVariation(n,o.id,u,m[a],r);!function(){var e=h,t=y.cb;h=function(){e(),t()}}(),g.push({element:y.el,variation:E[a]})}var v=document.createElement("div");v.className="dy_unit dy_smart_object_"+o.id,DYO.CoreUtils.insertElement(v,r.target),s(function(){$dy.renderSmartTagSlider(v,{expId:null,width:o.width,height:o.height,scrollSpeed:p},g),h()});break;case V:v=document.createElement("div"),v.className="dy_unit dy_smart_object_"+o.id;for(var w=function(){},f=e(o.slideCount)||0===o.slideCount?Object.keys(o.variations).length:o.slideCount,m=c(E,o,f),a=0;a<m.length;a++){var y=DYO.renderSmartObjectVariation(n,o.id,u,m[a],r);if(v.appendChild(y.el),function(){var e=w,t=y.cb;w=function(){e(),t()}}(),a+1<E.length){var Y=document.createElement("div");Y.innerHTML=decodeURIComponent(o.htmlSeparator||"");for(var S=0;S<Y.childNodes.length;S++)v.appendChild(Y.childNodes[S])}}DYO.CoreUtils.insertElement(v,r.target),w();break;default:throw{code:0,tag:n,msg:'unsupported object type "'+o.objectType+'" for Smart Tag preview'+n+" in Smart Object "+o.id}}}catch(x){}"function"==typeof r.afterRenderCallback&&r.afterRenderCallback();var I={code:1,tag:n,msg:"executing preview Smart Tag on tag "+n};return r.returnVar&&(I.soProps=i),I}catch(x){return DY.API("internal_error",{name:"previewSmartObject",error:x}),{code:0,tag:n,msg:"error while executing preview Smart Tag on tag "+n,ex:x}}}function i(e){Y(e)||(M.push(e+""),y(e,P,"DYO.preview.parseData"))}function o(){var t=document.getElementsByClassName("lb_overlay js_lb_overlay")[0],n=document.getElementsByClassName("dy-act-overlay")[0];e(n)||n.parentNode.removeChild(n),e(t)||t.parentNode.removeChild(t)}function a(n){t();var r=null;if(!e(DYO.otags[n].rules))for(var i=0;i<DYO.otags[n].rules.length;i++)if(!e(DYO.otags[n].rules[i].smartObject)&&!e(DYO.otags[n].rules[i].smartObject.id)&&DYO.otags[n].rules[i].smartObject.id===C){r=DYO.otags[n].rules[i].smartObject;break}if(e(r))return DY.API("internal_error",{name:"preview smart action no smartObject"}),void D("Preview could not be displayed. The Dynamic Content was not found on the page.");var a=O(n,r.id),s=c(E,r,1)[0],l=null;switch(DYO.Params.initParams(s.params),r.objectType){case DYO.ACTION_TYPES.OVERLAY:o();var d=u(n,r.id,a,s),p=DYO.getPropsForOverlaysAndNotification(n,r);l=function(){window.DY.WindowActions.overlay(d,p)};break;case DYO.ACTION_TYPES.NOTIFICATION:var d=u(n,r.id,a,s),p=DYO.getPropsForOverlaysAndNotification(n,r);l=function(){window.DY.WindowActions.notify(d,p)};break;case DYO.ACTION_TYPES.JAVASCRIPT:var f={};try{f=DYJSON.parse(decodeURIComponent(s.resources))}catch(m){}DYO.loadExternalResources(f),DYO.CoreUtils.safeEval("(function(){"+DYO.Params.searchAndReplace("js",s.jsCode)+"\n})();")}e(l)||DY.API("callback",l)}function s(t){e(window.DY)||e(window.$dy)||e(window.$dy.renderSmartTagSlider)?DY.API("callback",t):t()}function u(e,t,n,r){var i=DYO.renderSmartObjectVariation(e,t,n,r,{});return i.element=i.el,i.callback=i.cb,delete i.el,delete i.cb,i}function c(t,n,r){var i=[];if("random"!==t&&"object"==typeof t){if(t.length)for(var o=0;o<t.length;o++)if(!e(n.variations[t[o]])){var a=n.variations[t[o]];a.id=t[o],i.push(a)}}else{for(var t=Object.keys(n.variations),s=[],o=0;o<t.length;o++)n.variations[t[o]].isPaused||s.push(t[o]);t=s;for(var o=0;r>o&&t.length;o++){var u=Math.floor(Math.random()*t.length),c=t[u];t.splice(u,1);var a=n.variations[c];a.id=isNaN(c)?c:parseInt(c),i.push(a)}}return 0===i.length&&(DY.API("internal_error",{name:"preview error - no variations for smart "+n.id,clientOnly:!0}),D("Preview could not be displayed. No variations were selected for preview. Please contact us if the problem persists.")),i}function l(t){if(e(t)||"random"===t)return"random";try{return t.substr(1,t.length-2).split(",")}catch(n){return"random"}}function d(e){return"string"==typeof e&&"random"===e?e:"["+e.toString()+"]"}function p(){return"undefined"!=typeof window.name&&"dy_preview"===window.name}function f(t){if(!(!(b&&C&&E&&P)||e(t)||e(b)||e(C)||e(DYO.otags[b])||e(DYO.otags[b].name)||DYO.otags[b].name!==t&&parseInt(t)!==b))return!0;var n,r,i,o,a=null,s=m();if(s&&(n=s[0],r=s[1],i=s[2],o=s[3],a=s[4]),e(t)||e(n)||e(r)||e(i)||e(DYO.otags[r])){if(e(n)&&p()){var u=S();if(u){var r=u[0],i=u[1],o=u[2],a=u[3];if(!(e(r)||e(i)||e(o)||e(DYO.otags[r])||(g(r,i,o,a),h(),e(DYO.otags[r].name)||DYO.otags[r].name!==t&&parseInt(t)!==r)))return!0}}}else if(g(r,i,o,a),!e(DYO.otags[r].name)&&(DYO.otags[r].name===t||parseInt(t)===r))return!0;return!1}function m(){var t=DYO.StringUtils.getUrlParam("dyIsPreview"),n=DYO.StringUtils.getUrlParam("dySmartId"),r=DYO.StringUtils.getUrlParam("dyExperienceId"),i=DYO.StringUtils.getUrlParam("dyVariationId"),o=DYO.StringUtils.getUrlParam("dyIsDraft");return t=null!==t?decodeURIComponent(t):null,n=null!==n?decodeURIComponent(n):null,r=null!==r?decodeURIComponent(r):null,i=null!==i?decodeURIComponent(i):null,isNaN(n)||isNaN(r)?!1:(n=parseInt(n),r=parseInt(r),e(t)||e(n)||e(r)||e(i)||e(o)?!1:[t,n,r,i,o])}function g(e,t,n,r){b=e,C=t,E=l(n),P=r}function h(){if(!e(window.history)&&"function"==typeof window.history.pushState){var t="?dyIsPreview=true&dySmartid="+b+"&dyIsDraft="+P+"&dyExperienceId="+C+"&dyVariationId="+d(E)+"&dyPersistSession=true";window.history.pushState({},{},t)}}function y(e,t,n){var r=document.createElement("script");r.src="https://gateway.dynamicyield.com/api/open/smart_tags/"+e+"?_="+(new Date).getTime()+"&is_draft="+t+"&callback="+n,r.async=!1,document.getElementsByTagName("head")[0].appendChild(r),setTimeout(function(){T||D("Preview is taking longer than expected, please try again or contact us if the problem persists.")},U)}function v(t){if(!T){T=!0;try{e(t)||e(t.id)||e(t.name)||e(t.rules)||e(t.subType)?D("Preview could not be displayed. Please contact us if the problem persists."):(DYO.otags[b]=t,"tag"===t.subType?r(b,N):"action"===t.subType?a(b):(DY.API("internal_error",{name:"preview parseData unknown type"}),D("Preview could not be displayed. Please contact us if the problem persists.")))}catch(n){DY.API("internal_error",{name:"preview parseData",error:n,clientOnly:!0}),D("Preview could not be displayed. Please contact us if the problem persists.")}}}function D(e){var t={},n="'Apercu'";t.element='<div class="dy_preview_err_notification" style="background:#0091ea;padding:5px; border-radius:3px;"><img src="//cdn.dynamicyield.com/api/8765813/images/357cd161a4f53__8bb87646647948dcb856c7c372e1e106.png" style="display:inline-block;width: 15px;height:15px;margin:5px 5px 3px 5px;"><div class="dy_preview_err_text" style="font-family:'+n+', arial, sans-serif;font-size: 13px;color:white;display:inline-block;line-height:1.5;margin-top:3px;margin-right:5px;vertical-align:super;">'+e+"</div> </div>",DY.API("callback",function(){DY.WindowActions.notify(t,{duration:k,position:2})})}function O(t,n){if(e(DYO.otags[t])||e(DYO.otags[t].rules))return null;for(var r=0;r<DYO.otags[t].rules.length;r++)if(!e(DYO.otags[t].rules[r].smartObject)&&!e(DYO.otags[t].rules[r].smartObject.id)&&DYO.otags[t].rules[r].smartObject.id==n)return r}function w(t,n){var r=DYO.StringUtils.getUrlParam("dyIsPreview");if(r=null!==r?decodeURIComponent(r):null,!p()&&e(r)||e(n)||e(n.objectType)||n.objectType!==DYO.ACTION_TYPES.OVERLAY)return!1;var i=DYO.StringUtils.getUrlParam("dySmartId");if(i=null!==i?decodeURIComponent(i):null,isNaN(i)||e(t))return!1;if(!(e(DYO.otags[i])||e(DYO.otags[i].rules)||e(DYO.otags[i].rules[0].smartObject)||e(DYO.otags[i].rules[0].smartObject.objectType)||DYO.otags[i].rules[0].smartObject.objectType!==DYO.ACTION_TYPES.OVERLAY||e(DYO.otags[i])||i===t))return!0;if(p()){var o=S();if(o){var i=o[0];if(!(e(i)||e(DYO.otags[i])||e(DYO.otags[i].name)||e(DYO.otags[i].rules)||e(DYO.otags[i].rules[0].smartObject)||e(DYO.otags[i].rules[0].smartObject.objectType)||DYO.otags[i].rules[0].smartObject.objectType!==DYO.ACTION_TYPES.OVERLAY||i===t))return!0}}return!1}function Y(e){return-1!==M.indexOf(e+"")}function S(){if(DYO.StorageUtils.enabled("cookieStorage")){var e=DYO.StorageUtils.get(A,["cookieStorage"]);if(e){var t=e.split(";");if(4===t.length&&!isNaN(t[0])&&!isNaN(t[1]))return t[0]=parseInt(t[0]),t[1]=parseInt(t[1]),t}}return!1}function x(){var t,n,r,i,o=null,a=m();if(a)t=a[0],n=a[1],r=a[2],i=a[3],o=a[4];else if(p()){var s=S();s&&(t=!0,n=s[0],r=s[1],i=s[2],o=s[3])}e(t)||"true"!==o||e(n)||e(r)||e(i)||(g(n,r,i,o),p()&&s&&h(),y(n,!0,"DYO.preview.parseDataForUnpublished"))}function I(t){try{if(T)return;T=!0,e(t)||e(t.id)||e(t.name)||e(t.rules)||e(t.subType)||(DYO.otags[b]=t,"tag"===t.subType?t.embedOptions&&DYO.embedTag(b):"action"===t.subType?DYO.SmartsPreWork.executeWithPageEvents(DYO.otags[b],b,function(){DYO.loadServerData(function(){a(b)})}):DY.API("internal_error",{name:"preview parseDataForUnpublished unknown type"}))}catch(n){DY.API("internal_error",{name:"preview parseDataForUnpublished",error:n})}}function _(e){"true"!==P&&i(e)}var b,C,E,P,T,N,A="__dy_preview_session",U=4e3,k=1e4,M=[],j=0,R=1,V=2,L={previewSmartObjectWithUncachedData:n,isPreviewForAnotherOverlay:w,isPreviewForSmartTag:f,previewPublishedSmartAction:_,parseData:v,previewUnpublishedSmarts:x,parseDataForUnpublished:I};
return L}(),DYO.accurateNow=function(){var e=parseInt(DYO.StorageUtils.get("_dy_toffset",["cookieStorage","localStorage"])),t=(new Date).valueOf();return isNaN(e)||(t+=1e3*e),new Date(t)},DYO.Cookies=function(){function e(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t}function t(t){for(var n=e(t.split(".")),r={},i=0;i<n.length;i++){var o=n[i].split("@");r[o[0]]="nu"==o[1]?null:o[1]}return r}function n(){var n=DYO.StorageUtils.get(i,["localStorage","memoryStorage"]);return null==n?{auds:[],tchc:{},chc:{},audCache:{}}:(n=n.split("*"),{auds:e(n[0].split(".")),tchc:t(n[1]),chc:t(n[2]),audCache:t(n[3])})}function r(){var n=DYO.StorageUtils.get(a,["localStorage","memoryStorage"]),r=null;return DY.isNewStyleSession||n?n&&(n=n.split(","),DYO.SessionUtils.getNewSessionId()===n[0]&&(r=n.splice(1).join())):r=DYO.StorageUtils.get(o,["sessionStorage","memoryStorage"]),null==r?{sauds:[],schc:{},saudCache:{}}:(r=r.split("*"),{sauds:e(r[0].split(".")),schc:t(r[1]),saudCache:t(r[2])})}var i="_dyaud_nchc",o="_dyaud_sess",a="_dyaud_nses";return{loadCHCCookies:n,loadSessionCookies:r}}(),DYO.Params=function(){function e(e,t,n){o[e][t]=n}function t(e,t){return o[e][t]}function n(e){if(a={html:{},css:{},js:{}},"undefined"!=typeof e&&null!=e&&""!=e)try{a=DYJSON.parse(decodeURIComponent(e))}catch(t){}}function r(e,t){t=decodeURIComponent(t);for(var n in a[e])if(a[e].hasOwnProperty(n)){var r=o[e][n],s="";s=null!=r&&"undefined"!=typeof r&&""!=r?r:DYO.dynamicField(unescape(a[e][n].value));var u=new RegExp(i(n),"gm");t=t.replace(u,s.replace("$","$$$$"))}return t}function i(e){return"\\$(ext|img|image|select|unique|)\\{\\s*"+e.replace(/\ /g,"\\ ")+"(?:\\s*,\\s*(?:\\d+|{[^}]+})\\s*)?\\s*\\}"}var o={html:{},css:{},js:{}},a={html:{},css:{},js:{}};return{initParams:n,getRemoteValue:t,searchAndReplace:r,setParam:e}}(),DYO.dynamicField=function(){function e(e){if(DY.geoFields&&DY.geoFields[e])return DY.geoFields[e];var t=DYO.StorageUtils.get("_dy_df_geo",["cookieStorage","localStorage"]);if(!t)return null;var n=t.split("."),r=null;switch(e){case"country":n[0]&&(r=n[0]);break;case"state":n[1]&&(r=n[1]);break;case"city":n[2]&&(r=n[2])}return r&&"undefined"!==r&&""!==r?r:null}function t(e,t,n,r){return e.replace(t,i(n,r.before_txt,r.after_txt,r.fallback))}function n(e,t,n){try{return"undefined"==typeof DY.productInterest||"undefined"==typeof DY.productInterest.view?0:"undefined"==typeof n||"anywhere"===n||null===n?parseInt(DY.productInterest[e][t])||0:"undefined"!=typeof DY.productInterest[n]?parseInt(DY.productInterest[n][e][t])||0:0}catch(r){return DY.API("internal_error",{name:"getProductInterest func error",error:r}),0}}function r(e){return DYO.oevals&&DYO.oevals[e]&&DYO.oevals[e].hasOwnProperty("code")?DYO.CoreUtils.safeEval(DYO.oevals[e].code):null}function i(e,t,n,r){return null!==e&&"undefined"!=typeof e?(t&&(e=t+e),n&&(e+=n)):e=r||""===r?r:"-NA-",e}return function(i){for(var o;null!==(o=/\$dy\$<<<(.*?)>>>/g.exec(i));)try{var a=DYJSON.parse(o[1]);if("views_number"===a.type||"purchases_number"===a.type)switch(a.resolution){case"5min":break;case"hour":a.resolution="hourly";break;case"day":a.resolution="daily";break;case"week":a.resolution="weekly";break;default:a.resolution="weekly",DY.API("internal_error",{name:"dynamicField func resolution not according to contract: "+a.resolution})}switch(a.type){case"views_number":try{var s=n("view",a.resolution,a.location);i=i.replace(o[0],s)}catch(u){i=i.replace(o[0],0)}break;case"purchases_number":try{var s=n("purchase",a.resolution,a.location);i=i.replace(o[0],s)}catch(u){i=i.replace(o[0],0)}break;case"last_purchased_date":break;case"evaluator-value":try{var c=r(a.key);i=t(i,o[0],c,a)}catch(u){i=i.replace(o[0],"-NA-")}break;case"url-param-value":try{if("undefined"!=typeof a.key&&null!==a.key)var c=DYO.StringUtils.getUrlParam(a.key,location.href);else var c=null;i=t(i,o[0],c,a)}catch(u){i=i.replace(o[0],"-NA-")}break;case"cookie-value":try{var c=DYO.StorageUtils.get(a.key,["cookieStorage"]);i=t(i,o[0],c,a)}catch(u){i=i.replace(o[0],"-NA-")}break;case"city":try{var c=e("city");i=t(i,o[0],c,a)}catch(u){i=i.replace(o[0],"-NA-")}break;case"country":try{var c=e("country");i=t(i,o[0],c,a)}catch(u){i=i.replace(o[0],"-NA-")}break;case"state":try{var c=e("state");i=t(i,o[0],c,a)}catch(u){i=i.replace(o[0],"-NA-")}break;default:i=i.replace(o[0],"-NA-"),DY.API("internal_error",{name:"dynamicField func type not according to contract: "+a.type})}}catch(u){i=i.replace(o[0],"-NA-"),DY.API("internal_error",{name:"dynamicField func invalid JSON or variable type error",error:u})}return i}}(),function(){function e(e,t,n,r){for(var i=Object.keys(r),o=0;o<i.length;o++)if("html"===i[o]||"css"===i[o]||"js"===i[o])for(var a=Object.keys(r[i[o]]),s=0;s<a.length;s++){var u="";switch(a[s]){case"dyTagName":e&&DYO.otags[e]&&DYO.otags[e].displayName&&(u=escape(DYO.otags[e].displayName));break;case"dyTagId":e&&!isNaN(e)&&(u=parseInt(e));break;case"dyObjectWidth":u=t&&t.width?t.width:0;break;case"dyObjectHeight":u=t&&t.height?t.height:0;break;case"dyExperienceName":t&&t.name&&(u=escape(decodeURIComponent(t.name)));break;case"dyExperienceId":t&&t.id&&(u=t.id);break;case"dyVariationName":t&&t.variations&&t.variations[n]&&t.variations[n].name&&(u=escape(decodeURIComponent(t.variations[n].name)));break;case"dyVariationId":n&&!isNaN(n)&&(u=parseInt(n))}(u||0===u)&&(r[i[o]][a[s]].value=u)}return r}function t(t,n,r,i){function o(e){return"\\$(ext|img|image|select|unique|)\\{\\s*"+e.replace(/\ /g,"\\ ")+"(?:\\s*,\\s*(?:\\d+|{[^}]+})\\s*)?\\s*\\}"}var a={html:{},css:{},js:{}};if("undefined"!=typeof i&&null!=i&&""!=i)try{a=e(t,n,r,DYJSON.parse(decodeURIComponent(i)))}catch(s){}return function(e,t){t=decodeURIComponent(t);for(var n in a[e])if(a[e].hasOwnProperty(n)){var r=DYO.Params.getRemoteValue(e,n),i="";i=null!=r&&"undefined"!=typeof r&&""!=r?r:DYO.dynamicField(unescape(a[e][n].value));var s=new RegExp(o(n),"gm");t=t.replace(s,i.replace("$","$$$$"))}return t}}function n(e){var t=window.DY&&DY.referrer||document.referrer;switch(t=null!=t&&"undefined"!=typeof t&&""!=t?t.split("/")[2]:"",t=t.toLowerCase(),e.selectMethod){case"equals":case"not_equals":return t==e.selectParameter.toLowerCase();case"contains":return-1!==t.indexOf(e.selectParameter.toLowerCase());case"not_contains":return-1===t.indexOf(e.selectParameter.toLowerCase());default:return!1}}function r(e,t,r,i,o,a){if("undefined"==typeof t.hitCountMethod||"undefined"==typeof t.hitCount)return!1;var s=r?i[t.id]||0:(parseInt(o[t.id])||0)+parseInt(a[t.id]||0);switch("Referrer"==e&&n(t)&&s++,t.hitCountMethod){case"=":return s==t.hitCount;case">=":return s>=t.hitCount;case"<=":return s<=t.hitCount;case">":return s>t.hitCount;case"<":return s<t.hitCount;default:return!1}}function i(e,t,n,i,o,a,s){var u=s.conds,c=s.condType,l=[U(function(e){return!("undefined"==typeof e||"undefined"==typeof e.id)}),A(function(s){return"_"===c.charAt(0)||"Audience"===c?DYO.Conditions.matchNow(c,s,e,t):r(c,s,n.session,i,o,a)})],d=k(u,l);return DYO.CoreUtils.orPromiseArray(d)}function o(e){if("undefined"==typeof DY.audienceRules)return void 0;var t=[U(function(e){return!("undefined"==typeof e||"undefined"==typeof e.audience)}),M(function(t){return t.audience==e})];return k(DY.audienceRules,t)}function a(e,t){function n(e){return!("undefined"==typeof e||"undefined"==typeof e.condType||"undefined"==typeof e.conds)}var r,a,s,u={};if("undefined"==typeof r||"undefined"==typeof a){var c=DYO.Cookies.loadCHCCookies();r=c.tchc,a=c.chc}if("undefined"==typeof s&&(s=DYO.Cookies.loadSessionCookies().schc),"number"==typeof e&&(e=o(e),"undefined"==typeof e))return!1;var l=k(e.rule,[U(n),A(N(i)(u,t,e,s,a,r))]);return DYO.CoreUtils.andPromiseArray(l).then(function(e){if(e&&"undefined"!=typeof u.cud){var t=new Array;for(var n in u.cud)t.push({paramName:n,paramValue:u.cud[n]});DYO.setRemoteParameters(t)}return e})}function s(e){var t=[];if(e&&e.css)for(var n=0;n<e.css.length;n++)t.push('<link rel="stylesheet" type="text/css" href="'+e.css[n]+'" />');if(e&&e.js)for(var n=0;n<e.js.length;n++)t.push('<script type="text/javascript" src="'+e.js[n]+'"></script>');return t.join("\n")}function u(e,n,r,i,o,a){if("undefined"==typeof n.variations[i])throw{type:"invalid position",vari:i};var u,c,l=n.variations[i],d=t(e,n,i,l.params),p=d("html",l.htmlCode),f=d("css",l.cssCode),m=d("js",l.jsCode),g={};try{g=DYJSON.parse(decodeURIComponent(l.resources))}catch(h){}var y='<style type="text/css">';switch(y+=f,y+="</style>",l.renderType){case"src":var v=""!==m?'<script type="text/javascript">'+m+"</script>":"";u="<!DOCTYPE html><html><head>",u+=y+"</head><body>",u+=p+v+"</body></html>",c=function(){};break;case"html":var D=navigator.userAgent.toLowerCase(),O=!1;if(parseFloat((D.match(/msie ([0-9]{1,}[\.0-9]{0,})/)||[])[1])<9&&(O=!0),o)u=document.createElement("div"),u.className=r,u.innerHTML=O?p+y:y+p,DYO.loadExternalResources(g),c=function(){DYO.CoreUtils.safeEval("try{(function(){"+m+"\n})();}catch(e){}")};else{u=document.createElement("iframe"),u.className=r,u.setAttribute("scrolling","no"),u.setAttribute("marginwidth","0"),u.setAttribute("marginheight","0"),u.setAttribute("vspace","0"),u.setAttribute("hspace","0"),u.setAttribute("frameborder","0"),u.setAttribute("frameBorder","0"),u.setAttribute("style","overflow:hidden;background-color:#ffffff;border:0;width:"+n.width+"px;height:"+n.height+"px;"),u.setAttribute("width",n.width),u.setAttribute("height",n.height);var w="margin:0;position: absolute;";w+="width:"+n.width+"px;",w+="height:"+n.height+"px;";var Y="<!DOCTYPE html><html><head>";Y+=s(g),O||(Y+=y),Y+='</head><body style="'+w+'">',Y+=p,Y+='<script type="text/javascript">',Y+=m,Y+="</script>",O&&(Y+=y),Y+="</body></html>",c=function(){"undefined"!=typeof u.contentWindow&&null!==u.contentWindow&&(u.contentWindow.document.open(),u.contentWindow.document.write(Y),u.contentWindow.document.close())}}break;case"image":a?(u="<!DOCTYPE html><html><head></head><body>",n.width=n.height="100%"):(u=document.createElement("div"),u.className=r);var S='<img src="'+l.imageUrl+'" width="'+n.width+'" height="'+n.height+'" style="border:none;z-index:10000;" />',x=l.imageLink;"undefined"!=typeof l.imageLink&&null!=l.imageLink&&""!=l.imageLink&&("undefined"!=typeof DYO.redirects[e]&&""!=DYO.redirects[e]&&(x=DYO.redirects[e]+x),S='<a href="'+x+'" target="'+l.imageLinkTarget+'">'+S+"</a>"),a?(u+=S,u+="</body></html>"):u.innerHTML=S,c=function(){};break;case"flash":var I=!1,_="";u=document.createElement("div"),u.className=r;var b=l.imageLink;"undefined"!=typeof l.imageLink&&null!=l.imageLink&&""!=l.imageLink&&(I=!0),I&&("undefined"!=typeof DYO.redirects[e]&&""!=DYO.redirects[e]&&(b=DYO.redirects[e]+b),_="clickTAG="+escape(b));var C='  <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+n.width+'" height="'+n.height+'" id="dyFlashContent">    <param name="movie" value="'+l.imageUrl+"?"+_+'">    <param name="wmode" value="transparent">    <param name="quality" value="autohigh">    <!--[if !IE]>-->    <object type="application/x-shockwave-flash" data="'+l.imageUrl+"?"+_+'" width="'+n.width+'" height="'+n.height+'">';C+="undefined"!=typeof l.backupImageUrl&&""!=l.backupImageUrl?'    <img src="'+l.backupImageUrl+'" alt="Get Adobe Flash player" />':'      <a href="//www.adobe.com/go/getflashplayer">        <img src="//www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />      </a>',C+="      <!--[if !IE]>-->    </object>    <!--<![endif]-->  </object>",I&&(C='<a href="'+b+'" target="'+l.imageLinkTarget+'">'+C+"</a>"),u.innerHTML=C,c=function(){};break;default:throw{code:0,tag:e,msg:'unsupported render type "'+l.renderType+'" for Smart Tag '+e+" in Smart Object "+n.id+' in variation "'+i+'"'}}return{element:u,callback:c}}function c(){if(window.DY=window.DY||{},"undefined"==typeof window.DY.geoCode){var e=DYO.StorageUtils.get("_dy_geo",["cookieStorage","sessionStorage"]);if(null!==e){var t=e.split(".");return window.DY.geoCode=t[0],void(t.length>1&&(window.DY.geoCont=t[1],window.DY.geoRegionCode=t[2],window.DY.geoCity=t[3]))}if(e=DYO.StorageUtils.get("DYGEO",["cookieStorage","sessionStorage"]),null!==e){var t=e.split(".");return window.DY.geoCode=t[0],void(t.length>1&&(window.DY.geoCont=t[1],window.DY.geoRegionCode=t[2],window.DY.geoCity=t[3]))}}}function l(){if(window.DY=window.DY||{},"undefined"==typeof window.DY.weather){var e=DYO.StorageUtils.get("_dy_weather_"+window.DY.scsec,["localStorage","cookieStorage"]),t=DYO.StorageUtils.get("_dy_cweather_"+window.DY.scsec,["localStorage","cookieStorage"]);if(null!==e)try{window.DY.weather=DYJSON.parse(e)}catch(n){}if(null!==t)try{window.DY.currentWeather=DYJSON.parse(t)}catch(n){}}}function d(){if(window.DY=window.DY||{},"undefined"==typeof window.DY.deviceInfo){var e=DYO.StorageUtils.get("_dy_device",["localStorage","cookieStorage"]);if(null!==e)try{window.DY.deviceInfo=DYJSON.parse(e)}catch(t){}}}function p(){if(window.DY=window.DY||{},"undefined"==typeof window.DY.trafficSource){var e=DYO.StorageUtils.get("_dy_tsrc",["localStorage","cookieStorage"]);null!==e&&(window.DY.trafficSource=e)}}function f(e,t,n,r,i,o,a){if(a)var s=DYO.oexps[r.experiment].variations[0];else var s=DYO.chooseMultipleVariations(r.experiment,1)[0];var c=s.name,l=u(n,r,i,c,t.inline),d=l.element,p=l.callback,f=w(r.variations[c]);if(!a){for(var m=DYO.getCurrentVersionDataStr(r.experiment),g=DYO.Props.isCurrentlyInControlGroup(m),h={eventName:DY.isLP==n?"DY Landing Page":"DY Smart Object"},y=0;y<e.rules.length;++y){var v=g&&e.rules[y].smartObject.gaControlGroupMethod?e.rules[y].smartObject.gaControlGroupMethod:null;E(n,[{name:c}],e.rules[y].smartObject.variations,[{system:"GA"}],h,e.rules[y].smartObject.name,v)}var D=DYO.Props.getCurrentAttributionProps(DYO.oexps[r.experiment]);DYO.reportVariationImpression(r.experiment,[s.id]);var O=function(){var e=r.experiment,t=s.id;if(r.variations[c].doNotMarkUnit!==!0)"undefined"!=typeof window.DY.AdDetection.markExpUnit_new&&window.DY.AdDetection.markExpUnit_new(d,e,t,!1,m,void 0,D);else{var n=DYO.getSectionFeature("RIMPS_ON_BATCH");n&&n.enabled?DY.API("report",{type:DYO.Enums.ENUMS.REPORT_API.TYPES.REAL_IMPRESSION,expId:e,variationIds:[t],attributionProps:D,versionDataStr:m}):"undefined"!=typeof window.DY.ServerUtil.logVariation_new&&window.DY.ServerUtil.logVariation_new("ri",e,[t],D,m)}}}return{variationIsInDoNothingCg:f,dyCallback:O,callback:p,element:d}}function m(e,t,n,r,i,o,a){var s=w(r.variations[o[0].name]),c=document.createElement("div");c.className=i;var l=function(){},d=function(){},p=r.autoScrollSpeed;("undefined"==typeof p||null==p||0==p)&&(p=0);for(var f=[],m=[],g=0;g<o.length;g++){var h=u(n,r,"",o[g].name,t.inline);!function(){var e=d,t=h.callback;d=function(){e(),t()}}(),f.push({element:h.element,variation:o[g].id}),m.push({id:o[g].id,idx:g})}var y=DYO.getCurrentVersionDataStr(r.experiment);if(!a)for(var v={eventName:DY.isLP==n?"DY Landing Page":"DY Smart Object"},D=DYO.Props.isCurrentlyInControlGroup(y),g=0;g<e.rules.length;++g){var O;D&&e.rules[g].smartObject.gaControlGroupMethod&&(O=e.rules[g].smartObject.gaControlGroupMethod),E(n,o,e.rules[g].smartObject.variations,[{system:"GA"}],v,e.rules[g].smartObject.name,O)}var Y=DYO.Props.getCurrentAttributionProps(DYO.oexps[r.experiment]);DYO.reportVariationImpression(r.experiment,m);var S=function(){$dy.renderSmartTagSlider(c,{expId:r.experiment,width:r.width,height:r.height,scrollSpeed:p,versionDataStr:y,attributionProps:Y},f),d()};return{variationIsInDoNothingCg:s,dyCallback:S,callback:l,element:c}}function g(e,t,n,r,i,o,a){for(var s=w(r.variations[o[0].name]),c=document.createElement("div"),l=null,d=function(){},p=[],f=[],m=0;m<o.length;m++){var g=u(n,r,i+"_"+o[m].id,o[m].name,t.inline);if(c.appendChild(g.element),function(){var e=d,t=g.callback;d=function(){e(),t()}}(),p.push({element:g.element,variation:o[m]}),m+1<o.length){var h=document.createElement("div");h.innerHTML=decodeURIComponent(r.htmlSeparator);for(var y=0;y<h.childNodes.length;y++)c.appendChild(h.childNodes[y])}f.push({id:o[m].id,idx:m})}if(!a){for(var v=DYO.getCurrentVersionDataStr(r.experiment),D={eventName:DY.isLP==n?"DY Landing Page":"DY Smart Object"},O=DYO.Props.isCurrentlyInControlGroup(v),m=0;m<e.rules.length;++m){var Y;O&&e.rules[m].smartObject.gaControlGroupMethod&&(Y=e.rules[m].smartObject.gaControlGroupMethod),E(n,o,e.rules[m].smartObject.variations,[{system:"GA"}],D,e.rules[m].smartObject.name,Y)}var S=DYO.Props.getCurrentAttributionProps(DYO.oexps[r.experiment]);DYO.reportVariationImpression(r.experiment,f),l=function(){for(var e=r.experiment,t=0;t<p.length;t++)if(r.variations[p[t].variation.name].doNotMarkUnit!==!0)"undefined"!=typeof window.DY.AdDetection.markExpUnit_new&&window.DY.AdDetection.markExpUnit_new(p[t].element,e,p[t].variation.id,!0,v,t,S);else{var n=DYO.getSectionFeature("RIMPS_ON_BATCH");n&&n.enabled?DY.API("report",{type:DYO.Enums.ENUMS.REPORT_API.TYPES.REAL_IMPRESSION,expId:e,variationIds:[p[t].variation.id],attributionProps:S,versionDataStr:v}):"undefined"!=typeof window.DY.ServerUtil.logVariation_new&&window.DY.ServerUtil.logVariation_new("ri",e,[p[t].variation.id],S,v)}window.DY.AdDetection.ne()}}return{variationIsInDoNothingCg:s,dyCallback:l,callback:d,element:c}}function h(e,t,n,r,i){var o=null;switch(r.objectType){case j:o=DYO.CoreUtils.curry(f)(e,t,n,r,i);break;case R:o=DYO.CoreUtils.curry(m)(e,t,n,r,i);break;case V:o=DYO.CoreUtils.curry(g)(e,t,n,r,i);break;default:throw"unsupported Object Type for "+r.objectType}return function(e,n){function i(){"undefined"==typeof window.DY||"undefined"==typeof window.DY.AdDetection||"undefined"==typeof $dy||"undefined"==typeof $dy(window)||1===r.objectType&&"undefined"==typeof $dy.renderSmartTagSlider?setTimeout(i,100):l()}var a=o(e,n),s=a.variationIsInDoNothingCg,u=a.callback,c=a.element,l=a.dyCallback;t.returnVar||s||DYO.CoreUtils.insertElement(c,t.target,t.scriptLoc),u(),"function"==typeof t.afterRenderCallback&&t.afterRenderCallback(),null!==l&&i()}}function y(e,t){var n=!1,r=function(){if(!n){for(var r in e.variations)DYO.oexps[e.experiment].variations.push({id:0,name:r.toString()});n=!0,t(DYO.oexps[e.experiment].variations,!0)}};setTimeout(r,1e4),window.DY.API("callback",function(){n||window.DY.ServerUtil.getJSON("//st."+window.DY.server+"/vaff",{sec:window.DY.section,dyid:window.DY.dyid,so:e.id},function(r,i){if(!n&&!r){var o=Object.keys(e.variations)[0],a=e.variations[o];e.variations={};for(var s=0;s<i.length;s++)DYO.oexps[e.experiment].variations.push({id:i[s].expVarId,name:i[s].varId.toString()}),e.variations[i[s].varId]={htmlCode:a.htmlCode,cssCode:a.cssCode,jsCode:a.jsCode,name:i[s].varName,params:encodeURIComponent(DYJSON.stringify({html:i[s].varParams,css:i[s].varParams,js:i[s].varParams})),renderType:a.renderType,resources:a.resources};var u={};u[DYO.OPTION_FORCE_CALCULATION]=!0,DYO.chooseMultipleVariations(e.experiment,DYO.oexps[e.experiment].variations.length,u),n=!0,t(DYO.oexps[e.experiment].variations)}})})}function v(e,t){var n=e.slideCount;if("undefined"==typeof n||null==n||0==n){var r=Object.keys(e.variations);n=r.length;for(var i=0;i<r.length;i++)w(e.variations[r[i]])&&n--}var o=new Array;if(e.objectType!==j&&e.objectType!==L)if("undefined"==typeof e.pinnedVariation)o=DYO.chooseMultipleVariations(e.experiment,n);else if(n>1){if(o=DYO.getDynamicVariations(e.experiment,DYO.Props.expProgVersionData(DYO.oexps[e.experiment])),null==o||o.length!=n||o[0].id!=e.pinnedVariation.id&&!w(e.variations[o[0].name])){o=DYO.chooseMultipleVariations(e.experiment,n-1),w(e.variations[o[0].name])||o.unshift(e.pinnedVariation);for(var a=new Array,s=0;s<o.length;s++)a.push(o[s].id+":"+o[s].name);DYO.setVariations(e.experiment,DYO.Props.expProgVersionData(DYO.oexps[e.experiment]),a)}}else{o=DYO.getDynamicVariations(e.experiment,DYO.Props.expProgVersionData(DYO.oexps[e.experiment]));var u=null!=o&&o.length>0?o[0]:e.pinnedVariation;if(null==o||1!=o.length||o[0].id!=e.pinnedVariation.id&&!w(e.variations[o[0].name])){var a=new Array;o=DYO.chooseMultipleVariations(e.experiment,1);var c=e.pinnedVariation.id+":"+e.pinnedVariation.name;o.length>0&&w(e.variations[o[0].name])&&(c=o[0].id+":"+o[0].name,u=o[0]),a.push(c),DYO.setVariations(e.experiment,DYO.Props.expProgVersionData(DYO.oexps[e.experiment]),a)}o=[u]}t(o)}function D(e){var t=DYO.CoreUtils.clone(e);return t.scriptLoc=DYO.CoreUtils.getCurrentScriptLoc(),t}function O(e,t){try{var n;window.XDomainRequest?(n=new XDomainRequest,n.CacheControl="no-cache",n.onerror=function(){},n.ontimeout=function(){},n.onprogress=function(){},n.onload=function(){t(n)}):n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.onreadystatechange=function(){4===n.readyState&&t&&t(n)},n.open("GET",e,!0),n.send()}catch(r){}}function w(e){return"undefined"!=typeof e.isDoNothingCg&&e.isDoNothingCg}function Y(e,t){var n=DYO.CoreUtils.map(function(t){return a({rule:t.ruleDisjs,session:!0},{smartTagId:e}).then(function(e){return e?t:null})},t);return DYO.Q.all(n).then(function(e){return DYO.CoreUtils.find(DYO.CoreUtils.isNotNull,e)}).then(function(e){if("undefined"==typeof e)throw"Rule Not In Audience";return e})}function S(e,t,n,r){var i=t.smartObject.experiment,o=n.id,a=DYO.Props.getCurrentAttributionProps(DYO.oexps[i]),s=function(){DYO.reportVariationImpression(i,[o]);var e=DYO.getSectionFeature("RIMPS_ON_BATCH");e&&e.enabled?DY.API("report",{type:DYO.Enums.ENUMS.REPORT_API.TYPES.REAL_IMPRESSION,expId:i,variationIds:[o],attributionProps:a,versionDataStr:r}):"undefined"!=typeof window.DY.ServerUtil.logVariation_new&&window.DY.ServerUtil.logVariation_new("ri",i,[o],a,r)};return{writeData:[e,t.smartObject.id,parseInt((new Date).getTime()/1e3)],callback:s}}function x(e,t,n,r){var i=(DYO.StorageUtils.get("_dy_soct",["cookieStorage","localStorage"])||"").split("*"),r=r||{};!function(){for(var e=0;e<i.length;e++){var t=i[e].split(".");if(3===t.length){var n=parseInt(t[0]);if(!isNaN(n)){var o=parseInt(t[1]);if(!isNaN(o)){var a=parseInt(t[2]);if(!isNaN(a)){var s=0/0;try{for(var u=0;u<DYO.otags[n].rules.length;u++)DYO.otags[n].rules[u].smartObject.id===o&&(s=parseInt(DYO.otags[n].rules[u].smartObject.frequency))}catch(c){}isNaN(s)||a+s<=(new Date).getTime()/1e3||(r[[n,o]]=a)}}}}}}();var o=(DYO.StorageUtils.get("_dy_sact",["localStorage"])||"").split("*");return function(){for(var e=0;e<o.length;e++){var t=o[e].split(".");if(2===t.length){var n=parseInt(t[0]);if(!isNaN(n)){var i=parseInt(t[1]);if(!isNaN(i)){var a;try{for(var s=0;s<DYO.otags[n].rules.length;s++)a=parseInt(DYO.otags[n].rules[s].smartObject.frequency),isNaN(a)||i+a<=(new Date).getTime()/1e3||(r[[n,DYO.otags[n].rules[s].smartObject.id]]=i)}catch(u){}}}}}}(),DYO.preview.isPreviewForSmartTag(e)?void DYO.preview.previewPublishedSmartAction(e):Y(e,t).then(function(t){if("undefined"!=typeof r[[e,t.smartObject.id]])throw"Already Executed";return t}).then(function(t){if(t.smartObject.objectType==DYO.ACTION_TYPES.OVERLAY&&!n.value||DYO.preview.isPreviewForAnotherOverlay(e,t.smartObject))throw"Stop Execution";return t}).then(function(e){var t=DYO.chooseMultipleVariations(e.smartObject.experiment,1)[0],n=DYO.getCurrentVersionDataStr(e.smartObject.experiment);return{rule:e,expVariation:t,verDatStr:n}}).then(function(t){var n=t.rule,r=t.expVariation,i=t.verDatStr,o=DYO.Props.isCurrentlyInControlGroup(i),a=o&&n.smartObject.gaControlGroupMethod?n.smartObject.gaControlGroupMethod:null;return E(e,[r],n.smartObject.variations,[{system:"GA"}],{eventName:"DY Smart Action"},n.smartObject.name,a),t}).then(function(t){var r=t.rule,i="dy_unit dy_smart_object_"+r.smartObject.id,o=t.expVariation,a=t.verDatStr,s=r.smartObject.variations[o.name];if(w(s))return S(e,r,o,a);switch(r.smartObject.objectType){case DYO.ACTION_TYPES.OVERLAY:return F(e,r,o,a,i,n);case DYO.ACTION_TYPES.NOTIFICATION:return B(e,r,o,a,i);case DYO.ACTION_TYPES.JAVASCRIPT:return q(e,r,o,a,s);default:throw"Unsupported Object Type"}}).then(function(e){var t=e.writeData;null!==t&&(r[[t[0],t[1]]]=t[2]);var n=e.callback;null!==n&&window.DY.API("callback",n)})["catch"](function(e){if("Stop Execution"===e)throw"Stop Execution"}).then(function(){i=[];for(var e in r){var t=e.split(",");i.push(t[0]+"."+t[1]+"."+r[e])}i.length>0?DYO.StorageUtils.set("_dy_soct",i.join("*"),["cookieStorage","localStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain(),expire:365}):DYO.StorageUtils.remove("_dy_soct",["cookieStorage","localStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain()}),DYO.StorageUtils.remove("_dy_sact",["cookieStorage","localStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain()})})["catch"](function(){})}function I(){$dy(function(){try{document.body.appendChild(document.createElement("script")).src="//cdn.dynamicyield.com/preview/bookmarklet.js"}catch(e){}})}function _(e,t,n,r,i,o){var a=[];for(var s in e)for(var u=0;u<t.length;++u)t[u].name==s&&a.push(e[s]);C(n,a,r,i,o)}function b(e){var t="Control Group: ",n={no_action:t+"No Action",random:t+"Random",explicit:e.length>1?t+"Multiple variations":t+decodeURIComponent(e[0].name)};return n}function C(e,t,n,r,i){if(DYO.otags[n].gaScriptType)try{var o=b(t);i&&(t=[t[0]]);for(var a=0;a<t.length;++a){var s=t[a];"universal"==DYO.otags[n].gaScriptType?!function(t){function a(){try{var a=i?o[i]:decodeURIComponent(t.name);window.ga("send","event",e,decodeURIComponent(DYO.otags[n].displayName),decodeURIComponent(r)+" ("+a+")",{nonInteraction:1})}catch(s){}}function s(){"undefined"!=typeof window.ga?a():setTimeout(s,100)}s()}(s):"classic"==DYO.otags[n].gaScriptType?!function(t){function a(){try{var a=i?o[i]:decodeURIComponent(t.name);window._gaq.push(["_trackEvent",e,decodeURIComponent(DYO.otags[n].displayName),decodeURIComponent(r)+" ("+a+")",void 0,!0])}catch(s){}}function s(){"undefined"!=typeof window._gaq?a():setTimeout(s,100)}s()}(s):"tag_manager"==DYO.otags[n].gaScriptType&&!function(t){if(DYO.otags[n].tagManagerData)try{var a=DYO.otags[n].tagManagerData.data_layer_name;window[a]=window[a]||[];var s=i?o[i]:decodeURIComponent(t.name);window[a].push({event:DYO.otags[n].tagManagerData.data_event_name,eventCategory:e,eventAction:decodeURIComponent(DYO.otags[n].displayName),eventLabel:decodeURIComponent(r)+" ("+s+")"})}catch(u){}}(s)}}catch(u){}}function E(e,t,n,r,i,o,a){for(var s=0;s<r.length;++s)switch(r[s].system){case"GA":_(n,t,i.eventName,e,o,a);break;default:return!1}}function P(){try{return DY.loggedInSites&&DY.loggedInSites.length>0&&DY.loggedInSites.indexOf("adm")>-1}catch(e){return!1}}function T(){try{P()&&DY.Util.isDesktop()&&("undefined"==typeof DY.slim||"true"!=DY.slim)&&$dy(function(){try{document.body.appendChild(document.createElement("script")).src="//cdn.dynamicyield.com/onsite/init.js"}catch(e){}})}catch(e){}}var N=DYO.CoreUtils.curry,A=N(DYO.CoreUtils.map),U=N(DYO.CoreUtils.filter),k=DYO.CoreUtils.composeOn,M=N(DYO.CoreUtils.find);DYO.setRemoteParameters=function(e){try{for(var t=0;t<e.length;t++)"undefined"!=typeof e[t]&&"undefined"!=typeof e[t].paramName&&("undefined"==typeof e[t].paramType?(DYO.setRemoteParameter("html",e[t].paramName,e[t].paramValue),DYO.setRemoteParameter("css",e[t].paramName,e[t].paramValue),DYO.setRemoteParameter("js",e[t].paramName,e[t].paramValue)):DYO.setRemoteParameter(e[t].paramType,e[t].paramName,e[t].paramValue))}catch(n){}},DYO.setRemoteParameter=DYO.Params.setParam,DYO.loadExternalResources=function(e){var t,n=document.getElementsByTagName("head")[0];if(e&&e.css)for(var r=0;r<e.css.length;r++)t=document.createElement("link"),t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e.css[r]),n.appendChild(t);if(e&&e.js)for(var r=0;r<e.js.length;r++)t=document.createElement("script"),t.setAttribute("type","text/javascript"),t.setAttribute("src",e.js[r]),n.appendChild(t)},DYO.loadServerData=function(e){c(),l(),d(),p(),e()},DYO.getTagVariationProperties=function(e){var t=e;if("number"!=typeof t){for(var n in DYO.otags)if(DYO.otags[n].name==t){t=parseInt(n);break}"number"!=typeof t&&(t=parseInt(t))}var r=DYO.otags[t];if("undefined"==typeof r||null==r)return{code:0,tag:e,msg:"Smart Tag "+e+" not found"};var i=null;for(var o in r.rules)if(null==r.rules[o].ruleDisjs||a({rule:r.rules[o].ruleDisjs,session:!0},{smartTagId:t})){i=r.rules[o].smartObject;break}if(null==i)throw{code:0,tag:e,msg:"no rule matched for Smart Tag "+e};var s=DYO.getVariationData(i.experiment);if("undefined"!=typeof s.value&&null!=s.value){var u=s.value.name,c=s.value.name,l=r.rules[o].smartObject.variations[s.value.name];return{code:1,tag:e,variation:{id:u,name:c,display:l}}}return{code:0,tag:e,msg:"no variation found for tag"}},DYO.redirects={},DYO.addRedirect=function(e,t){try{if("number"!=typeof e){for(var n in DYO.otags)if(DYO.otags[n].name==e){e=parseInt(n);break}"number"!=typeof e&&(e=parseInt(e))}DYO.redirects[e]=t,DYO.setRemoteParameter("html","rdclick",t),DYO.setRemoteParameter("css","rdclick",t),DYO.setRemoteParameter("js","rdclick",t),DYO.setRemoteParameter("html","dy_rdclick",t),DYO.setRemoteParameter("css","dy_rdclick",t),DYO.setRemoteParameter("js","dy_rdclick",t)}catch(r){return{code:0,tag:e,msg:"error while executing add redirect on tag "+e,ex:r}}},DYO.smartTag=function(e,t,n,r){DYO.smartObject(e,{target:t,inline:n,afterRenderCallback:r})};var j=0,R=1,V=2,L=100;DYO.smartObject=function(e,t,n){try{if("string"==typeof t)try{t=DYJSON.parse(t)}catch(r){t={}}if("object"!=typeof t&&(t={}),t.inline!==!0&&(t.inline=!1),t=D(t),"number"!=typeof e){for(var i in DYO.otags)if(DYO.otags[i].name==e){e=parseInt(i);break}"number"!=typeof e&&(e=parseInt(e))}var o=DYO.otags[e];if("undefined"==typeof o||null==o||"tag"!==o.subType)return{code:0,tag:e,msg:"Smart Tag "+e+" not found"};if(o.autoArchived){var a="//st.dynamicyield.com/ffst?&smt="+e;if(null!=o.smartObjects){a+="&exps=";for(var s in o.smartObjects){var u=o.smartObjects[s].experiment;a+=u+","}a=a.substring(0,a.length-1)}return void O(a,function(n){try{DYO.CoreUtils.safeEval(n.response)}catch(r){DY.API("internal_error",{name:"Error when trying to force fetch an auto archived smart tag. smtId: "+e,error:r})}DYO.otags[e]=DYExps.otags[e];for(var i in DYExps.oexps)DYO.oexps[i]=DYExps.oexps[i];"undefined"==typeof DYO.otags[e].autoArchived&&DYO.smartObject(e,t)})}var c,l={};if(DYO.SmartsPreWork.waitForDependencies(o,e,{},function(){DYO.loadServerData(function(){return DYO.preview.isPreviewForSmartTag(e)?DYO.preview.previewSmartObjectWithUncachedData(e,t):void(c=Y(e,o.rules).then(function(n){if(n){var r=n.smartObject,i="dy_unit dy_smart_object_"+r.id,a=h(o,t,e,r,i);return{object:r,renderFunction:a}}}).then(function(e){var t=e.object,n=e.renderFunction;switch(t.experimentMode){case"affinity":y(t,n);break;default:v(t,n)}})["catch"](function(){}))})}),n)return c;var d={code:1,tag:e,msg:"executing make Smart Tag on tag "+e};return t.returnVar&&(d.soProps=l),d}catch(r){return{code:0,tag:e,msg:"error while executing make Smart Tag on tag "+e,ex:r}}},DYO.ACTION_TYPES={OVERLAY:3,NOTIFICATION:4,JAVASCRIPT:5};var F=function(e,t,n,r,i,o){try{if(o.value){o.value=!1;var a=u(e,t.smartObject,i,n.name,!0,!1),s=DYO.getPropsForOverlaysAndNotification(e,t.smartObject),c=t.smartObject.experiment,l=n.id,d=DYO.Props.getCurrentAttributionProps(DYO.oexps[c]),p=a.callback;a.callback=function(){DYO.reportVariationImpression(c,[l]),"undefined"!=typeof window.DY.AdDetection.markExpUnit_new&&window.DY.AdDetection.markExpUnit_new(a.element,c,l,!1,r,void 0,d),p()};var f=function(){window.DY.WindowActions.overlay(a,s)};return{writeData:[e,t.smartObject.id,parseInt((new Date).getTime()/1e3)],callback:f}}return{writeData:null,callback:null}}catch(m){return o.value||(o.value=!0),{writeData:null,callback:null}}},B=function(e,t,n,r,i){try{var o=u(e,t.smartObject,i,n.name,!0,!1),a=DYO.getPropsForOverlaysAndNotification(e,t.smartObject),s=t.smartObject.experiment,c=n.id,l=DYO.Props.getCurrentAttributionProps(DYO.oexps[s]),d=o.callback;o.callback=function(){DYO.reportVariationImpression(s,[c]),"undefined"!=typeof window.DY.AdDetection.markExpUnit_new&&window.DY.AdDetection.markExpUnit_new(o.element,s,c,!1,r,void 0,l),d()};var p=function(){window.DY.WindowActions.notify(o,a)};return{writeData:[e,t.smartObject.id,parseInt((new Date).getTime()/1e3)],callback:p}}catch(f){return{writeData:null,callback:null}}},q=function(e,n,r,i,o){var a=!1;try{var s=n.smartObject.experiment,u=r.id,c=DYO.Props.getCurrentAttributionProps(DYO.oexps[s]),l={};try{l=DYJSON.parse(decodeURIComponent(o.resources))}catch(d){}DYO.loadExternalResources(l);var p=t(e,n.smartObject,r.name,o.params);DYO.CoreUtils.safeEval("(function(){"+p("js",o.jsCode)+"\n})();"),a=!0}catch(f){}var m=a?[e,n.smartObject.id,parseInt((new Date).getTime()/1e3)]:null,g=function(){DYO.reportVariationImpression(s,[u]);var e=DYO.getSectionFeature("RIMPS_ON_BATCH");e&&e.enabled?DY.API("report",{type:DY.Enums.ENUMS.REPORT_API.TYPES.REAL_IMPRESSION,expId:s,variationIds:[u],attributionProps:c,versionDataStr:i}):"undefined"!=typeof window.DY.ServerUtil.logVariation_new&&window.DY.ServerUtil.logVariation_new("ri",s,[u],c,i)
};return{writeData:m,callback:g}};DYO.executeSmartActions=function(e){var t={},n=window.location&&window.location.search||"";try{e&&window.DY.API("sub",{on:"dy-pageview",callback:function(){DYO.executeSmartActions(!1)}})}catch(r){}try{var i={value:!0};for(var o in DYO.otags)try{var a=new RegExp("[?&]_dy_ssae="+o+"(&|$)","i");if(a.test(n))continue;if("action"!==DYO.otags[o].subType)continue;if(!e&&DYO.otags[o].isSPACompat!==!0)continue;!function(){var e=o,n=DYO.otags[e].rules;DYO.SmartsPreWork.executeWithPageEvents(DYO.otags[e],e,function(){DYO.loadServerData(function(){x(e,n,i,t)})})}()}catch(r){DYO.d&&DY.API("internal_error",{name:"error while executing Smart Action "+o,error:r})}return{code:1,msg:"executed Smart Actions"}}catch(r){return{code:0,msg:"error while executing Smart Actions",ex:r}}},DYO.renderSmartObjectVariation=function(e,t,n,r,i){try{if(i=i||{},"number"!=typeof e){for(var o in DYO.otags)if(DYO.otags[o].name==e){e=parseInt(o);break}"number"!=typeof e&&(e=parseInt(e))}var a=DYO.otags[e];if("undefined"==typeof a||null==a)return{code:0,tag:e,msg:"Smart Tag "+e+" not found"};var s=a.rules[n].smartObject,c="";switch(s.objectType){case 0:case 3:case 4:c="dy_unit dy_smart_object_"+s.id,i.inline=!0;break;case 5:c="dy_unit dy_smart_object_"+s.id;break;case 1:c="";break;case 2:c="dy_unit dy_smart_object_"+s.id;break;default:throw{code:0,tag:e,msg:'unsupported object type "'+s.objectType+'" for Smart Tag '+e+" in Smart Object "+s.id}}var l=u(e,s,c,r.id,i.inline);return{el:l.element,cb:l.callback}}catch(d){return{code:0,tag:e,msg:"error while executing make Smart Tag on tag "+e,ex:d}}},DYO.getPropsForOverlaysAndNotification=function(e,t){var n={smartTagId:e,position:t.position,background:t.background,opacity:t.opacity,delay:t.delay,duration:t.duration,closing:t.closing,showDuration:t.showDuration||200,hideDuration:t.hideDuration||200,showAnimation:t.showAnimation||1,hideAnimation:t.hideAnimation||1};return n},DYO.getRenderedObjectsOnPage=function(){var e=document.querySelectorAll("[data-dy-var-id]"),t={};for(var n in DYO.oexps)for(var r in DYO.oexps[n].variations){var i=DYO.oexps[n].variations[r].name;isNaN(parseInt(i))||(t[DYO.oexps[n].variations[r].id]=parseInt(i))}for(var o={},a=0;a<e.length;a++){var s=e[a].getAttribute("data-dy-var-id");if(s){var u=t[s];if(u)for(var c in DYO.otags){var l=DYO.otags[c].rules;if(l)for(var d=0;d<l.length;d++)if(l[d].smartObject.variations[u]){o[c]=o[c]||{name:DYO.otags[c].name,so:l[d].smartObject,variations:[]};var p=l[d].smartObject.variations[u];p.varName=u,p.name=decodeURIComponent(p.name),o[c].variations.push(p)}}}}return o},DYO.smartPlacement=function(e,t){try{var n,r,i=!1,o=!1;if(!t.target)throw"Illegal call to smartPlacement, no target is defined";for(r in DYO.otags)for(n=0;n<DYO.otags[r].placements.length;n++)if(DYO.otags[r].placements[n]==e){i=parseInt(r);break}if(!i)for(r in DYO.rcom.widgets)for(n=0;n<DYO.rcom.widgets[r].placements.length;n++)if(DYO.rcom.widgets[r].placements[n]==e){o=parseInt(r);break}if(!i&&!o)throw"Couldn't find object id for placement: "+e;i?DYO.smartObject(i,t):o&&DYO.recommendationWidget(o,t)}catch(a){return{code:0,placement:e,msg:"error while executing placement on placement id: "+e,ex:a}}},DYO.getUserObjectsAndVariations=function(){function e(e){var t=parseInt(e.objectType);switch(t){case 0:return"SmartObject - Single";case 1:return"SmartObject - Slider";case 2:return"SmartObject - ItemList";case 3:return"SmartAction - Overlay";case 4:return"SmartAction - Notification";case 5:return"SmartAction - Javascript Action";default:return"SmartObject"}}function t(t){var r=n[t];if(r){var i=DYO.otags[r.tId];if(i){var o=i.name;if(o.indexOf("_dy_collection_inject")>-1||o.indexOf("Smart_Action_For_Placement_")>-1)return}var a=DYO.otags[r.tId].rules[r.rIdx].smartObject;s[r.tId]=s[r.tId]||{tagId:r.tId,variations:[],ruleName:decodeURIComponent(a.name),ruleId:a.id,tagName:DYO.otags[r.tId].name,objectType:e(a)};var u=a.variations[t];s[r.tId].variations.push({id:t,name:decodeURIComponent(u.name)})}}var n={};for(var r in DYO.otags){var i=DYO.otags[r].rules;if(i)for(var o=0;o<i.length;o++)for(var a in i[o].smartObject.variations)n[a]={rIdx:o,tId:r}}var s={},u=DYO.exps;for(var r in DYO.exps)try{var c=u[r].split("|")[2].split(",");c.forEach(function(e){t(e.split(":")[1])})}catch(l){}var d=[];for(var p in s){var f=s[p];d.push({objectId:parseInt(p),objectName:f.tagName,conditionName:f.ruleName,conditionId:f.ruleId,objectType:f.objectType,variations:f.variations.map(function(e){return e.name}),variationIds:f.variations.map(function(e){return parseInt(e.id)})})}return d},DYO.isInAudience=a;try{-1!==location.href.indexOf("__dy__open_bookmarklet=true")&&P()&&DY.API("callback",I)}catch(W){}DY.API("callback",T)}(),function(){function e(e){function t(e){return{id:e.id,type:e.type,slots:e.slots,isContextAware:e.isContextAware}}function n(e){var t=Date.now();return e.valid_from<=t&&(null===e.valid_to||e.valid_to>=t)}var r=[];if(!e||e.length<=0)return r;for(var i=0;i<e.length;i++){var o=e[i];n(o)&&(null===o.ruleDisjs?r.push(t(o)):DYO.syncIsInAudience({rule:o.ruleDisjs,session:!0})&&r.push(t(o)))}return r}function t(e){function t(e){return{id:e.id,type:e.type,slots:e.slots,isContextAware:e.isContextAware}}function n(e){var t=Date.now();return e.valid_from<=t&&(null===e.valid_to||e.valid_to>=t)}function r(e,t){var n=e?{smartTagId:e}:null;return DYO.isInAudience({rule:t.ruleDisjs,session:!0},n).then(function(e){return e?t:null})}e||(e=[]);var i=[u(n),s(function(e){return null===e.ruleDisjs?e:r(null,e)})],o=c(e,i);return DYO.Q.all(o).then(function(e){return c(e,[u(DYO.CoreUtils.isNotNull),s(t)])})}function n(e){var t=DYO.rcom||{},n=t.widgets||{};for(var r in n)if(r==e)return DYO.CoreUtils.clone(n[e]);return!1}function r(e){for(var t=e.slots,n=1,r=[],i=n,o=!1,a=0;a<t.length;a++){var s=t[a];r.push(s.item),o||-1!=s.strId&&(i=s.strId,o=!0)}var u=[{items:r,id:i,name:e.name}];return delete e.slots,e.strategies=u,e}function i(e){return e.attr("data-dy-widget-id")}function o(e){return e.find("[data-dy-product-id]")}var a=DYO.CoreUtils.curry,s=a(DYO.CoreUtils.map),u=a(DYO.CoreUtils.filter),c=DYO.CoreUtils.composeOn;DYO.recommendationsUtils={getSyncMatchedRules:e,backwardCompRcomResponse:r,getWidgetElementId:i,getMatchedRules:t,findWidgetById:n,findProductElements:o}}(),function(e){function t(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function n(){DY.recommendationContext!==e&&(U=DY.recommendationContext,R=h(),M=!0,v(),O())}function r(e){var t=DYO.rcom||{},n=t.tpls||{};for(var r in n)if(r==e)return n[e];return!1}function i(e,t){var n=$dy(e.options.target);if(0===n.length)throw{msg:"Could not find target element for widget "+e.id+" target: "+e.options.target};var i=r(t.widgetTplId);if(!i)throw{msg:"Could not find template id "+t.widgetTplId};var o=s(i,t.staticParams,!0);return o.attr({"data-dy-widget-id":t.id,"data-dy-feed-id":t.feedId}),o.data("dyCtx",t.options.context||U),{target:n,widget:o}}function o(e,n){for(var r in n){var i=n[r];if("object"!=typeof i&&"function"!=typeof i){var o=new RegExp("\\$\\{"+t(r)+"\\}","g");e=e.replace(o,i)}}return e}function a(t,n){var r=t.data("dy-strategy-tpl");if(null===r||r===e){var i=t.find("[data-dy-strategy-container]");0===i.length&&(i=t.find("[data-dy-recommendation-item-container]"),i.attr("data-dy-strategy-container","")),i=i.parent(),r=o(i.html(),n),i.html(r),t.data("dy-strategy-tpl",r)}else t.find("[data-dy-strategy-container]").parent().append(r);var a=t.find("[data-dy-strategy-container]").last();return a.attr("data-dy-strategy-id",n.id),a}function s(t,n,r){(n===e||null===n)&&(n={});var i=o(t.html,n),a=$dy(i),s=null==t.css?null:o(t.css,n);if(null!==s){var u=$dy('<style rel="stylesheet">'+s+"</style>");a.prepend(u)}if(r===!0){var c=null==t.js?null:o(t.js,n);if(null!==c){var l=$dy('<script type="text/javascript">'+c+"</script>");a.prepend(l)}}return a}function u(t,n,r,i){for(var o=[],a=t.find("[data-dy-recommendation-item-container]"),u=0;u<n.length;u++){var c=!1;0===i&&0===u&&(c=!0);var l=s(r,n[u],c);l.attr("data-dy-product-id",n[u].sku);var d=n[u]._dy_decision;d!==e&&l.attr("data-dy-rcom-decision",encodeURIComponent(A.stringify(d))),o.push(l),a.append(l)}return o}function c(e,t,n){var i=e.itemTplId,o=r(i);if(!o)throw{msg:"Failed to find item template id:"+e.itemTplId};for(var s=n.strategies,c=[],l=0;l<s.length;l++)for(var d=a(t.widget,s[l]),p=n.strategies[l].items,f=u(d,p,o,l),m=0;m<f.length;m++)c.push($dy(f[m][0]));return c}function l(e){return DYO.recommendationsUtils.getMatchedRules(e.rules).then(function(t){var n={wId:e.id,fId:e.feedId,maxProducts:e.numOfItems,rules:t,ctx:e.options.context||U},r={sec:DY.scsec,uid:DY.dyid,data:n,v:1},i=e.skusOnly;return i&&(r.skusOnly=i),r}).then(function(e){return DYO.Q.nfcall(DY.ServerUtil.postJSON,"//rcom."+DY.server+"/recommend",{},e)}).then(function(e){return{newResponse:e,oldResponse:DYO.recommendationsUtils.backwardCompRcomResponse($dy.extend(!0,{},e))}})}function d(t){if(DYO.translations===e)return"";var n=DY.recommendationContext.lng;return n=n?n.split("_")[0]:L,DYO.translations[t]?DYO.translations[t][n]||DYO.translations[t][L]:""}function p(e){if(!M)return void k.push(e);var t=e.id;e.options="object"==typeof e.options?e.options:{};var n=DYO.recommendationsUtils.findWidgetById(t);if(n.id=t,!n)throw{msg:"Could not find widget with id "+t};n.options=e.options,l(n)["catch"](function(e){throw DY.API("internal_error",{name:"recommendations error - rcom server returned !== 200",error:e}),"Stop Execution"}).then(function(e){var t=e.oldResponse;if(t.strategies)for(var n=t.strategies,r=0;r<n.length;r++){var i=n[r];if(i.name){var o=i.items;i[V]=d(i.name);for(var a=0;a<o.length;a++)o[a][V]=i[V]}}return e}).then(function(t){var r=i(e,n);r.target.empty(),r.target.append(r.widget);var o=c(n,r,t.oldResponse);return{elementsToMonitor:o,recommendationsData:t.newResponse,context:U}}).then($)["catch"](function(){})}function f(e){var t=e.recommendationsData,n=Z(t.slots,[B(function(e){return{wId:t.wId,fId:t.fId,expData:t.expData,fallbackData:t.fallback,strId:e&&e.strId,pId:e&&e.item&&e.item.sku}})]),r=Z(n,[B(function(e){return e.strId}),W(DYO.CoreUtils.onlyUnique),B(function(e){return H(function(t){return t.strId===e},n)}),B(function(e){var t=$dy.extend(!0,{},e);return delete t.pId,t})]);return{elementsToMonitor:e.elementsToMonitor,reportData:n,strReportData:r,context:e.context}}function m(e){return function(t){var n=e.context,r=t.reportData,i=Z(r,[B(function(e){return J("PIMP",e)})]);return R.add(n,i),t}(e),function(t){var n=e.context,r=t.strReportData,i=Z(r,[B(function(e){return z("WIMP",e)})]);return R.add(n,i),t}(e),e}function g(e){var t=e.context,n=e.strReportData,r=e.elementsToMonitor,i=Z(n,[B(function(e){return[e.strId,z("WRIMP",e)]}),B(function(e){return[e[0],DYO.CoreUtils.runFunc1OnceAfterRunFunc2(e[1],function(e){return e})]}),G(function(e,t){var n=$dy.extend(!0,{},e);return n[t[0]]=t[1],n},{})]);Z(DYO.CoreUtils.zip([e.reportData,r]),[q(function(e){var n=e[0],r=i[n.strId],o=DYO.CoreUtils.runFunc1OnceAfterRunFunc2(J("PRIMP",n),function(e){return e});DY.AdDetection.monitorInView(e[1],function(){R.add(t,[o,r])});var a=J("PCLICK",n);e[1].mousedown(function(){R.add(t,[a,r,o])})})])}function h(){function e(e,t){var n=H(function(t){return t.context===e},r);if(!n){var i=r.push({context:e,reportFuncs:[]});n=r[i-1]}n.reportFuncs=n.reportFuncs.concat(t)}function t(){return B(function(e){var t=e.context,n=e.reportFuncs,r=function(e){return{ctx:e,widgets:{}}}(t);return G(function(e,t){return t(e)},r,n)},r)}function n(){r=[]}var r=[];return{add:e,getReports:t,clean:n}}function y(e,t,n,r){var i=$dy.extend(!0,{},r),o=i.widgets[n.wId]&&i.widgets[n.wId].events||[],a=e(t,n,o);return i.widgets[n.wId]=function(e,t){return{fId:e.fId,fallbackData:e.fallbackData,expData:e.expData,events:t}}(n,a),i}function v(){for(var t=k.pop();t!==e;){try{p(t)}catch(n){DY.API("internal_error",{name:"recommendations drawing error",error:n})}t=k.pop()}}function D(){N=window.$dy,A=window.DYJSON,DY.recommendationContext!==e?n():DY.PubSub.sub({on:"recommendationContextChanged",callback:function(){n()}})}function O(){function e(){if(null!==R){var e=R.getReports();Z(e,[W(function(e){return 0!==DYO.CoreUtils.keys(e.widgets).length}),q(function(e){DY.ServerUtil.logRcom(e)})]),R.clean()}}function t(){clearTimeout(r),r=setTimeout(function(){t(),e()},n)}var n=5e3;"undefined"!=typeof DY.rcomFlushTimer&&(n=DY.rcomFlushTimer),DYO.CoreUtils.addWindowEventListener("beforeunload",e);var r;t()}function w(e){var t=$dy(e),n=t.attr("data-dy-widget-id"),r=Z(t.find("[data-dy-product-id]"),[B(function(e){return $dy(e)})]),i=Z(r,[B(function(e){return e.attr("data-dy-product-id")})]);return{widgetId:n,productIds:i,elementsToMonitor:r}}function Y(e,t,n){var r=Z(e.newResponse.slots,[W(function(e){return H(function(t){return e.item.sku==t[0]},t)})]),i=Z(r,[B(function(e){var n=H(function(t){return e.item.sku==t[0]},t);return n[1]})]),o=$dy.extend(!0,{},e.newResponse);o.slots=r,$({elementsToMonitor:i,recommendationsData:o,context:n})}function S(e){var t=e;return("undefined"==typeof e||""===e)&&(t=U),t}function x(e,t,n,r){try{(3===arguments.length||"function"!=typeof r)&&(r=function(){}),t=S(t);var i=I(t)||_(n);if(i)return void r(i);var o=w(e);if(i=b(o.widgetId,n.wId)||C(o.productIds,n))return r(i);var a={newResponse:$dy.extend(!0,{},n)};Y(a,DYO.CoreUtils.zip([o.productIds,o.elementsToMonitor]),t),r()}catch(i){r(i)}}function I(e){return e.type?e.data?!1:"RecommendationContext without data":"RecommendationContext without type"}function _(e){if(!e.wId)return"ServerData without wId";if(!e.fId)return"ServerData without fId";if("[object Array]"!==Object.prototype.toString.call(e.slots))return"ServerData with incompatible type slots";for(var t=0;t<e.slots.length;t++){var n=e.slots[t];if("[object Object]"!==Object.prototype.toString.call(n))return"ServerData with incompatible type for slot at position "+t;if("[object Object]"!==Object.prototype.toString.call(n.item))return"ServerData with incompatible type in slots for item at position "+t;if(!n.strId)return"ServerData  with no strId in slots at position "+t;if(!n.item.sku)return"ServerData slot with no sku in slots at position "+t}return!1}function b(e,t){return e!=t?"ServerData and widget Id are not correlated":!1}function C(e,t){for(var n={},r=0;r<t.slots.length;r++){var i=t.slots[r];n[i.item.sku]=!0}for(var r=0;r<e.length;r++)if(!n[e[r]])return"Product "+e[r]+" on DOM and not in serverData";return!1}function E(e){var t=DYO.rcom||{},n=t.widgets||{};for(var r in n)if(n.hasOwnProperty(r)&&n[r].name===e)return n[r].id=r,n[r];return!1}function P(e,t){t=S(t);var n=I(t);if(n)throw n;var r=w(e),i=DYO.CoreUtils.zip([r.productIds,r.elementsToMonitor]);j[r.widgetId](i,t)}function T(e,t,n){n||(n=function(){});var r=A.stringify({id:e,opts:t}),i=X[r];if(i)n(null,i);else{t=t||{};var o=t.context||U,a=t.skusOnly||!1,s=DYO.recommendationsUtils.findWidgetById(e);if(s)s.id=e;else if(s=E(e),!s)throw{msg:"Could not find widget with id "+e};if(!o)throw{msg:"Context not defined"};s.skusOnly=a,s.options={context:o},l(s).then(function(t){return j[e]=F(Y)(t),t}).then(function(e){X[r]=e.oldResponse,n(null,e.oldResponse)})["catch"](function(e){n(e)})}}var N,A,U=null,k=[],M=!1,j={},R=null,V="_dyStrategyTitle_",L="Default",F=DYO.CoreUtils.curry,B=F(DYO.CoreUtils.map),q=F(DYO.CoreUtils.forEach),W=F(DYO.CoreUtils.filter),G=F(DYO.CoreUtils.reduce),H=F(DYO.CoreUtils.find),Z=DYO.CoreUtils.composeOn,$=DYO.CoreUtils.compose(g,m,f),J=F(y)(function(e,t,n){var r=H(function(n){return n.type===e&&n.strId===t.strId},n),i=(r&&r.pId||[]).concat(t.pId),o={type:e,pId:i,strId:t.strId};return W(function(n){return!(n.type===e&&n.strId===t.strId)},n).concat(o)}),z=F(y)(function(e,t,n){return n.concat({type:e,strId:t.strId})});DY.API("callback",D),DYO.recommendationWidget=function(e,t){try{p({id:e,options:t})}catch(n){DY.API("internal_error",{name:"recommendations drawing error",error:n})}};var X={};DYO.recommendations={draw:p,getRcomData:T,registerElements:P,registerElementsAndServerData:x}}(),"object"!=typeof DYJSON&&(DYJSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,o,a,s=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toDYJSON&&(u=u.toDYJSON(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,n=0;o>n;n+=1)a[n]=str(n,u)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,u),i&&a.push(quote(r)+(gap?": ":":")+i));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(i=str(r,u),i&&a.push(quote(r)+(gap?": ":":")+i));return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}"function"!=typeof Date.prototype.toDYJSON&&(Date.prototype.toDYJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toDYJSON=Number.prototype.toDYJSON=Boolean.prototype.toDYJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof DYJSON.stringify&&(DYJSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"undefined"!=typeof JSON&&"function"==typeof JSON.parse&&(DYJSON.parse=JSON.parse),"function"!=typeof DYJSON.parse&&(DYJSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),DYO.csc=function(){function e(){try{return DYJSON.parse(DYO.StorageUtils.get("_dy_csc",["localStorage","memoryStorage"]))||{}}catch(e){return{}}}function t(e){return DYO.StorageUtils.set("_dy_csc",DYJSON.stringify(e),["localStorage","memoryStorage"])}function n(t){return e()[t.toLowerCase()]}function r(n,r){var i=e();return i[n.toLowerCase()]=r,t(i),!0}function i(e){r(e,{ts:(new Date).valueOf(),ses:l,pv:d})}function o(e){return"undefined"==typeof n(e)&&i(e)}function a(e,t){return"undefined"!=typeof t&&null!==t?e-t:Number.MAX_VALUE}function s(e){var t=n(e);return t?{timeSince:a((new Date).valueOf(),t.ts),sessionsSince:a(l,t.ses),pageviewsSince:a(d,t.pv)}:{timeSince:Number.MAX_VALUE,sessionsSince:Number.MAX_VALUE,pageviewsSince:Number.MAX_VALUE}}function u(){d=n("_pv")||0,d++,r("_pv",d),l=n("_ses")||0;var e=!1;if(DYO.SessionUtils.isKnownToBeNewSessionSection()){var t=n("_sessid"),i=DYO.SessionUtils.getNewSessionId();i!==DYO.SessionUtils.NEXT&&(i!==t&&(e||(l++,e=!0),r("_ses",l)),r("_sessid",i))}else{var o=DYO.StorageUtils.get("_dy_csc_ses",["cookieStorage","sessionStorage"]);"t"!==o&&(e||(l++,e=!0),r("_ses",l)),DYO.StorageUtils.set("_dy_csc_ses","t",["cookieStorage","sessionStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain(),expire:0})}DYO.SessionUtils.onNewSession(function(t){var i=n("_sessid");t!==i&&(e||(l++,e=!0),r("_ses",l)),r("_sessid",t)})}var c={},l=0,d=0;return c.markEvent=i,c.createEvent=o,c.readEvent=s,u(),c}(),function(){DYO.csc.createEvent("firstPV"),DY.API("sub",{on:"dy-event",callback:function(e,t){DYO.csc.markEvent("lastEvent_"+t)}})}(),function(){function e(e){return"object"==typeof DYO.smartVariableExperimentsMapV1&&"undefined"!=typeof DYO.smartVariableExperimentsMapV1[e]&&null!==DYO.smartVariableExperimentsMapV1[e]?DYO.smartVariableExperimentsMapV1[e]:null}function t(e,t,n){return"undefined"!=typeof DYO.smartVariableExperimentsV1?DYO.smartVariableExperimentsV1[e][t][n]:null}DYO.getDynamicVariableValue=function(n,r){if("undefined"!=typeof r)try{var i=JSON.parse(r);if("undefined"!=typeof i[n])return i[n]}catch(o){return null}var a=e(n);if(!a)return null;if("undefined"==typeof a.expId||null===a.expId)return a.value;a=a.expId;var s=DYO.chooseMultipleVariations(parseInt(a),1,null),u=s[0].name;return"undefined"==typeof u||null===u?null:(DY.API("report",{type:DYO.Enums.ENUMS.REPORT_API.TYPES.IMPRESSION,expId:a,variationIds:[s[0].id],attributionProps:DYO.Props.getCurrentAttributionProps(DYO.oexps[a]),versionDataStr:DYO.getCurrentVersionDataStr(a)}),t(a,u,n))}}(),DYO.setupServerExperiments();